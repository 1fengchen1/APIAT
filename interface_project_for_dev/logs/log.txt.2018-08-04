2018-08-02 18:13:39,734 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-02 18:13:39,950 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-02 19:15:40,925 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-02 19:15:41,199 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 09:03:52,982 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 09:03:52,982 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 09:03:53,288 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 09:03:53,514 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 09:33:54,067 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 09:33:54,068 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 09:33:54,293 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 09:33:54,513 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 09:33:54,851 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 09:33:54,851 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 09:33:54,989 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 09:33:54,989 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 09:33:55,127 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 09:33:55,131 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 09:33:55,131 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 09:33:55,132 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 09:33:55,174 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 09:33:55,195 global_function.py[line: 81] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 09:33:55,195 global_function.py[line: 84] INFO: 成功读取配置信息：
2018-08-03 09:33:55,199 global_function.py[line: 86] ERROR: 测试项目[project：接口自动化测试]未配置协议，host，端口信息，暂时无法执行
2018-08-03 09:33:55,199 main.py[line: 198] CRITICAL: 套件所在项目配置存在问题，跳过执行该套件
2018-08-03 09:33:55,200 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 09:33:55,200 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 09:33:55,201 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803093354',)
2018-08-03 09:33:55,312 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 09:33:55,312 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803093354')
2018-08-03 09:33:55,419 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 09:33:55,419 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803093354')
2018-08-03 09:33:55,534 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 09:33:55,534 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803093354')
2018-08-03 09:33:55,637 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 09:33:55,638 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803093354')
2018-08-03 09:33:55,745 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2018-08-03 09:33:55,745 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803093354',)
2018-08-03 09:33:55,853 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2018-08-03 09:33:55,854 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803093354',)
2018-08-03 09:33:55,967 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2018-08-03 09:33:55,973 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\reporttest_report20180803093354.html
2018-08-03 09:33:55,975 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2018-08-03 09:33:55,978 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 09:33:57,323 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\reporttest_report20180803093354.html
2018-08-03 09:33:57,324 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 09:33:58,203 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 10:00:41,170 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 10:00:41,170 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 10:00:41,417 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 10:00:41,675 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 10:00:41,880 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 10:00:41,881 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 10:00:41,997 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 10:00:41,997 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 10:00:42,121 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 10:00:42,122 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 10:00:42,122 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 10:00:42,123 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 10:00:42,161 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 10:00:42,184 global_function.py[line: 81] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 10:00:42,185 global_function.py[line: 84] INFO: 成功读取配置信息：
2018-08-03 10:00:42,186 global_function.py[line: 86] ERROR: 测试项目[project：接口自动化测试]未配置协议，host，端口信息，暂时无法执行
2018-08-03 10:00:42,191 main.py[line: 198] CRITICAL: 套件所在项目配置存在问题，跳过执行该套件
2018-08-03 10:00:42,191 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 10:00:42,192 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 10:00:42,192 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803100041',)
2018-08-03 10:00:42,309 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 10:00:42,309 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803100041')
2018-08-03 10:00:42,431 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 10:00:42,432 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803100041')
2018-08-03 10:00:42,557 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 10:00:42,558 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803100041')
2018-08-03 10:00:42,672 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 10:00:42,673 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803100041')
2018-08-03 10:00:42,793 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2018-08-03 10:00:42,795 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803100041',)
2018-08-03 10:00:42,911 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2018-08-03 10:00:42,911 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803100041',)
2018-08-03 10:00:43,022 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2018-08-03 10:00:43,022 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803100041.html
2018-08-03 10:00:43,022 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2018-08-03 10:00:43,025 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 10:00:45,204 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803100041.html
2018-08-03 10:00:45,204 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 10:00:47,126 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 10:26:50,364 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 10:26:50,364 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 10:26:50,698 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 10:26:50,924 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 10:26:51,139 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 10:26:51,139 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 10:26:51,315 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 10:26:51,315 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 10:26:51,453 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 10:26:51,454 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 10:26:51,454 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 10:26:51,454 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 10:26:51,506 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 10:26:51,524 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 10:26:51,525 global_function.py[line: 91] INFO: 成功读取配置信息：
2018-08-03 10:26:51,525 global_function.py[line: 93] ERROR: 测试项目[project：接口自动化测试]未配置协议，host，端口信息，暂时无法执行
2018-08-03 10:26:51,525 main.py[line: 198] CRITICAL: 套件所在项目配置存在问题，跳过执行该套件
2018-08-03 10:26:51,525 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 10:26:51,526 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 10:26:51,527 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803102650',)
2018-08-03 10:26:51,675 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 10:26:51,675 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803102650')
2018-08-03 10:26:51,777 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 10:26:51,778 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803102650')
2018-08-03 10:26:51,942 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 10:26:51,943 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803102650')
2018-08-03 10:26:52,065 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 10:26:52,066 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803102650')
2018-08-03 10:26:52,169 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 10:26:52,169 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803102650',)
2018-08-03 10:26:52,279 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 10:26:52,279 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803102650',)
2018-08-03 10:26:52,394 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 10:26:52,395 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803102650.html
2018-08-03 10:26:52,395 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 10:26:52,397 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 10:26:53,783 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803102650.html
2018-08-03 10:26:53,783 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 10:26:54,623 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 10:28:12,737 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 10:28:12,737 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 10:28:12,986 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 10:28:13,196 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 10:28:13,408 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 10:28:13,408 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 10:28:13,518 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 10:28:13,518 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 10:28:13,627 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 10:28:13,627 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 10:28:13,628 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 10:28:13,628 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 10:28:13,668 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 10:28:13,684 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 10:28:13,684 global_function.py[line: 91] INFO: 成功读取配置信息：
2018-08-03 10:28:13,684 global_function.py[line: 93] ERROR: 测试项目[project：接口自动化测试]未配置协议，host，端口信息，暂时无法执行
2018-08-03 10:37:14,399 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 10:37:14,399 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 10:37:14,626 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 10:37:14,829 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 10:37:15,034 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 10:37:15,034 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 10:37:15,146 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 10:37:15,146 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 10:37:15,263 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 10:37:15,263 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 10:37:15,264 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 10:37:15,264 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 10:37:15,303 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 10:37:15,319 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 10:37:15,319 global_function.py[line: 91] INFO: 成功读取配置信息：
2018-08-03 10:37:15,319 global_function.py[line: 93] ERROR: 测试项目[project：接口自动化测试]未配置协议，host，端口信息，暂时无法执行
2018-08-03 10:44:23,200 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 10:44:23,200 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 10:44:23,419 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 10:44:23,630 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 10:44:23,842 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 10:44:23,842 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 10:44:23,953 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 10:44:23,953 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 10:44:24,062 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 10:44:24,063 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 10:44:24,063 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 10:44:24,063 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 10:44:24,093 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 10:44:24,108 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 10:44:24,108 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 10:44:24,108 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 10:44:24,108 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 10:44:24,108 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 10:44:24,181 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 10:44:24,255 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 10:44:24,273 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 01:08:40', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 10:44:24,288 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 10:44:24,288 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803104423', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 10:44:24,404 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 10:44:24,405 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 10:44:24,406 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 10:44:24,406 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 10:44:24,406 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803104424', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 10:44:24,522 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1079, name=获取token]
2018-08-03 10:44:24,522 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 10:44:24,523 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 10:44:24" WHERE executed_history_id = 20180803104424 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 10:44:24,640 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 10:44:24,640 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 10:44:24", case_exec_history_id="20180803104424" WHERE executed_history_id = 20180803104423 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 10:44:24,774 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 00:56:10', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 10:44:24,788 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 10:44:24,788 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803104423', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 10:44:24,897 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 10:44:24,897 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 10:44:24,898 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 10:44:24,898 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 10:44:24,898 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803104424', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 10:44:25,023 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 10:44:25,024 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 10:44:25,024 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 10:44:25" WHERE executed_history_id = 20180803104424 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 10:44:25,133 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 10:44:25,134 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 10:44:24", case_exec_history_id="20180803104424" WHERE executed_history_id = 20180803104423 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 10:44:25,259 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 10:44:25,273 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 10:44:25,273 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803104423', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 10:44:25,384 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 10:44:25,384 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 10:44:25,386 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 10:44:25,386 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 10:44:25", case_exec_history_id="20180803104425" WHERE executed_history_id = 20180803104423 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 10:44:25,495 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 10:44:25,495 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 10:44:25,497 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 10:44:25,498 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803104423',)
2018-08-03 10:44:25,615 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 10:44:25,615 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803104423')
2018-08-03 10:44:25,730 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 10:44:25,730 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803104423')
2018-08-03 10:44:25,837 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 10:44:25,838 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803104423')
2018-08-03 10:44:25,942 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 10:44:25,942 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803104423')
2018-08-03 10:44:26,045 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 10:44:26,045 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803104423',)
2018-08-03 10:44:26,150 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 10:44:26,150 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803104423')
2018-08-03 10:44:26,260 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 10:44:26,260 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 10:44:26,260 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803104423',)
2018-08-03 10:44:26,375 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 10:44:26,375 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803104423')
2018-08-03 10:44:26,477 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 10:44:26,477 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803104424')
2018-08-03 10:44:26,597 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 10:44:26,597 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803104424')
2018-08-03 10:44:26,701 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 10:44:26,702 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803104425')
2018-08-03 10:44:26,808 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 10:44:26,809 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803104423.html
2018-08-03 10:44:26,809 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 10:44:26,812 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 10:44:28,796 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803104423.html
2018-08-03 10:44:28,797 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 10:44:30,389 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:04:59,086 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:04:59,086 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:04:59,336 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:04:59,591 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:04:59,798 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:04:59,798 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:04:59,909 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:04:59,909 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:05:00,027 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:05:00,028 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:05:00,028 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:05:00,029 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:05:00,059 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:05:00,075 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:05:00,075 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:05:00,077 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:05:00,077 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:05:00,077 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:05:00,149 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:05:00,224 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:05:00,244 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:03:31', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:{},<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:05:00,259 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:05:00,259 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110459', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:05:00,376 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:05:00,376 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":{},"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:05:00,376 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:05:00,378 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:05:00,378 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110500', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":{},"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:05:00,495 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1079, name=获取token]
2018-08-03 11:05:00,496 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:05:00,496 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:05:00" WHERE executed_history_id = 20180803110500 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:05:00,609 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:05:00,609 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:05:00", case_exec_history_id="20180803110500" WHERE executed_history_id = 20180803110459 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:05:00,906 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 00:56:10', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:05:00,920 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:05:00,921 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110459', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:05:01,030 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:05:01,030 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:05:01,031 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:05:01,032 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:05:01,032 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110501', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:05:01,142 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:05:01,142 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:05:01,142 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:05:01" WHERE executed_history_id = 20180803110501 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:05:01,261 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:05:01,261 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:05:01", case_exec_history_id="20180803110501" WHERE executed_history_id = 20180803110459 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:05:01,384 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:05:01,399 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:05:01,399 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110459', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:05:01,536 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:05:01,536 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:05:01,536 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:05:01,537 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:05:01", case_exec_history_id="20180803110501" WHERE executed_history_id = 20180803110459 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:05:01,664 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:05:01,665 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:05:01,666 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:05:01,667 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803110459',)
2018-08-03 11:05:01,787 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:05:01,787 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803110459')
2018-08-03 11:05:01,893 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:05:01,893 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803110459')
2018-08-03 11:05:01,996 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:05:01,997 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803110459')
2018-08-03 11:05:02,103 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:05:02,104 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803110459')
2018-08-03 11:05:02,210 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:05:02,210 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110459',)
2018-08-03 11:05:02,313 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:05:02,314 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110459')
2018-08-03 11:05:02,427 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:05:02,428 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:05:02,429 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110459',)
2018-08-03 11:05:02,542 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:05:02,542 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110459')
2018-08-03 11:05:02,647 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:05:02,650 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803110500')
2018-08-03 11:05:02,758 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:05:02,759 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803110501')
2018-08-03 11:05:02,875 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:05:02,875 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803110501')
2018-08-03 11:05:02,983 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:05:02,983 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803110459.html
2018-08-03 11:05:02,983 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:05:02,986 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:05:04,272 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803110459.html
2018-08-03 11:05:04,272 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:05:04,894 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:06:46,963 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:06:46,964 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:06:47,317 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:06:47,532 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:06:47,747 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:06:47,747 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:06:47,863 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:06:47,863 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:06:47,975 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:06:47,976 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:06:47,976 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:06:47,976 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:06:48,014 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:06:48,028 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:06:48,029 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:06:48,029 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:06:48,029 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:06:48,029 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:06:48,097 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:06:48,167 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:06:48,185 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:05:22', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;, &quot;charset&quot;:&quot;utf-8&quot;},<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:06:48,199 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:06:48,199 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110647', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:06:48,312 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:06:48,313 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":{"Content-Type":"application/x-www-form-urlencoded", "charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:06:48,314 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:06:48,316 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:06:48,316 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110648', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":{"Content-Type":"application/x-www-form-urlencoded", "charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:06:48,427 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 121 (char 120),停止执行用例[id=1079, name=获取token]
2018-08-03 11:06:48,427 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:06:48,427 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 121 (char 120)", protocol_method="未获取到", runtime="2018-08-03 11:06:48" WHERE executed_history_id = 20180803110648 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:06:48,537 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:06:48,538 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:06:48", case_exec_history_id="20180803110648" WHERE executed_history_id = 20180803110647 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:06:48,702 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 00:56:10', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:06:48,733 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:06:48,734 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110647', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:06:48,848 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:06:48,849 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:06:48,849 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:06:48,850 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:06:48,850 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110648', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:06:48,959 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:06:48,959 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:06:48,959 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:06:48" WHERE executed_history_id = 20180803110648 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:06:49,065 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:06:49,065 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:06:48", case_exec_history_id="20180803110648" WHERE executed_history_id = 20180803110647 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:06:49,208 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:06:49,222 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:06:49,222 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110647', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:06:49,347 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:06:49,348 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:06:49,348 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:06:49,349 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:06:49", case_exec_history_id="20180803110649" WHERE executed_history_id = 20180803110647 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:06:49,456 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:06:49,457 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:06:49,458 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:06:49,458 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803110647',)
2018-08-03 11:06:49,560 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:06:49,560 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803110647')
2018-08-03 11:06:49,662 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:06:49,663 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803110647')
2018-08-03 11:06:49,764 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:06:49,765 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803110647')
2018-08-03 11:06:49,874 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:06:49,874 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803110647')
2018-08-03 11:06:49,981 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:06:49,981 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110647',)
2018-08-03 11:06:50,085 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:06:50,085 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110647')
2018-08-03 11:06:50,204 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:06:50,205 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:06:50,205 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110647',)
2018-08-03 11:06:50,308 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:06:50,309 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110647')
2018-08-03 11:06:50,414 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:06:50,415 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803110648')
2018-08-03 11:06:50,518 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:06:50,519 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803110648')
2018-08-03 11:06:50,629 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:06:50,629 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803110649')
2018-08-03 11:06:50,735 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:06:50,735 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803110647.html
2018-08-03 11:06:50,735 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:06:50,739 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:06:52,498 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803110647.html
2018-08-03 11:06:52,499 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:06:54,026 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:09:50,029 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:09:50,030 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:09:50,273 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:09:50,485 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:09:50,696 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:09:50,696 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:09:50,827 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:09:50,827 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:09:50,937 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:09:50,938 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:09:50,938 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:09:50,938 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:09:50,970 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:09:50,984 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:09:50,984 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:09:50,985 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:09:50,985 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:09:50,985 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:09:51,053 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:09:51,123 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:09:51,141 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:08:27', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,<br />\n&quot;charset&quot;:&quot;utf-8&quot;},<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:09:51,154 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:09:51,155 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110950', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:09:51,267 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:09:51,268 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:09:51,268 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:09:51,269 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:09:51,269 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110951', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:09:51,384 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:09:51,385 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:09:51,385 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:09:51" WHERE executed_history_id = 20180803110951 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:09:51,496 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:09:51,496 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:09:51", case_exec_history_id="20180803110951" WHERE executed_history_id = 20180803110950 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:09:51,627 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 00:56:10', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:09:51,642 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:09:51,642 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110950', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:09:51,756 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:09:51,757 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:09:51,757 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:09:51,757 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:09:51,758 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110951', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:09:51,873 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:09:51,873 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:09:51,873 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:09:51" WHERE executed_history_id = 20180803110951 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:09:51,985 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:09:51,985 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:09:51", case_exec_history_id="20180803110951" WHERE executed_history_id = 20180803110950 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:09:52,122 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:09:52,136 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:09:52,137 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803110950', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:09:52,246 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:09:52,246 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:09:52,247 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:09:52,249 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:09:52", case_exec_history_id="20180803110952" WHERE executed_history_id = 20180803110950 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:09:52,366 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:09:52,369 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:09:52,372 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:09:52,373 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803110950',)
2018-08-03 11:09:52,479 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:09:52,480 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803110950')
2018-08-03 11:09:52,584 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:09:52,585 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803110950')
2018-08-03 11:09:52,691 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:09:52,691 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803110950')
2018-08-03 11:09:52,801 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:09:52,802 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803110950')
2018-08-03 11:09:52,912 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:09:52,912 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110950',)
2018-08-03 11:09:53,022 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:09:53,022 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110950')
2018-08-03 11:09:53,128 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:09:53,128 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:09:53,129 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803110950',)
2018-08-03 11:09:53,232 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:09:53,233 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803110950')
2018-08-03 11:09:53,337 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:09:53,338 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803110951')
2018-08-03 11:09:53,445 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:09:53,446 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803110951')
2018-08-03 11:09:53,553 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:09:53,553 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803110952')
2018-08-03 11:09:53,659 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:09:53,660 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803110950.html
2018-08-03 11:09:53,660 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:09:53,663 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:09:55,642 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803110950.html
2018-08-03 11:09:55,643 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:09:57,216 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:12:43,543 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:12:43,544 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:12:43,761 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:12:43,972 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:12:44,172 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:12:44,173 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:12:44,283 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:12:44,283 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:12:44,398 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:12:44,399 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:12:44,400 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:12:44,400 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:12:44,434 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:12:44,450 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:12:44,450 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:12:44,450 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:12:44,451 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:12:44,451 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:12:44,520 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:12:44,601 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:12:44,619 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:10:53', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:12:44,633 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:12:44,633 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111243', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:12:44,744 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:12:44,744 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:12:44,744 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:12:44,745 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:12:44,745 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111244', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:12:44,857 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:12:44,858 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:12:44,859 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:12:44" WHERE executed_history_id = 20180803111244 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:12:44,972 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:12:44,972 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:12:44", case_exec_history_id="20180803111244" WHERE executed_history_id = 20180803111243 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:12:45,108 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 00:56:10', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{<br />\n&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:12:45,123 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:12:45,123 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111243', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:12:45,238 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:12:45,238 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:12:45,239 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:12:45,239 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:12:45,239 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111245', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:12:45,347 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:12:45,348 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:12:45,348 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:12:45" WHERE executed_history_id = 20180803111245 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:12:45,459 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:12:45,459 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:12:45", case_exec_history_id="20180803111245" WHERE executed_history_id = 20180803111243 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:12:45,593 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:12:45,607 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:12:45,608 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111243', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:12:45,718 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:12:45,719 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:12:45,719 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:12:45,719 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:12:45", case_exec_history_id="20180803111245" WHERE executed_history_id = 20180803111243 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:12:45,844 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:12:45,844 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:12:45,845 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:12:45,846 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803111243',)
2018-08-03 11:12:45,952 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:12:45,952 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803111243')
2018-08-03 11:12:46,055 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:12:46,055 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803111243')
2018-08-03 11:12:46,156 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:12:46,156 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803111243')
2018-08-03 11:12:46,264 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:12:46,264 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803111243')
2018-08-03 11:12:46,369 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:12:46,369 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111243',)
2018-08-03 11:12:46,475 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:12:46,476 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111243')
2018-08-03 11:12:46,585 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:12:46,585 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:12:46,585 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111243',)
2018-08-03 11:12:46,690 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:12:46,690 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111243')
2018-08-03 11:12:46,796 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:12:46,796 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803111244')
2018-08-03 11:12:46,902 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:12:46,902 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803111245')
2018-08-03 11:12:47,011 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:12:47,011 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803111245')
2018-08-03 11:12:47,118 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:12:47,119 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803111243.html
2018-08-03 11:12:47,119 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:12:47,123 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:12:48,133 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803111243.html
2018-08-03 11:12:48,133 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:12:48,841 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:13:45,063 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:13:45,063 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:13:45,381 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:13:45,606 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:13:45,807 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:13:45,807 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:13:45,919 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:13:45,921 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:13:46,046 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:13:46,047 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:13:46,047 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:13:46,048 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:13:46,097 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:13:46,122 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:13:46,123 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:13:46,124 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:13:46,124 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:13:46,125 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:13:46,240 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:13:46,376 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:13:46,407 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:12:08', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:13:46,432 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:13:46,432 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111345', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:13:46,568 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:13:46,568 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:13:46,569 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:13:46,569 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:13:46,569 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111346', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":{"Content-Type":"application/x-www-form-urlencoded","charset":"utf-8"},"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:13:46,686 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:13:46,688 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:13:46,689 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:13:46" WHERE executed_history_id = 20180803111346 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:13:46,805 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:13:46,805 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:13:46", case_exec_history_id="20180803111346" WHERE executed_history_id = 20180803111345 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:13:46,962 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:12:15', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:13:46,976 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:13:46,976 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111345', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:13:47,132 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:13:47,132 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:13:47,133 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:13:47,133 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:13:47,133 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111347', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:13:47,244 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:13:47,244 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:13:47,244 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:13:47" WHERE executed_history_id = 20180803111347 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:13:47,363 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:13:47,363 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:13:47", case_exec_history_id="20180803111347" WHERE executed_history_id = 20180803111345 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:13:47,489 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:13:47,504 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:13:47,504 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111345', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:13:47,624 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:13:47,624 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:13:47,624 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:13:47,624 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:13:47", case_exec_history_id="20180803111347" WHERE executed_history_id = 20180803111345 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:13:47,729 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:13:47,731 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:13:47,734 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:13:47,734 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803111345',)
2018-08-03 11:13:47,838 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:13:47,838 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803111345')
2018-08-03 11:13:47,942 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:13:47,943 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803111345')
2018-08-03 11:13:48,070 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:13:48,070 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803111345')
2018-08-03 11:13:48,176 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:13:48,177 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803111345')
2018-08-03 11:13:48,282 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:13:48,282 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111345',)
2018-08-03 11:13:48,387 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:13:48,387 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111345')
2018-08-03 11:13:48,493 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:13:48,494 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:13:48,494 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111345',)
2018-08-03 11:13:48,609 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:13:48,610 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111345')
2018-08-03 11:13:48,715 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:13:48,716 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803111346')
2018-08-03 11:13:48,818 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:13:48,818 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803111347')
2018-08-03 11:13:48,927 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:13:48,928 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803111347')
2018-08-03 11:13:49,035 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:13:49,035 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803111345.html
2018-08-03 11:13:49,035 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:13:49,038 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:13:50,146 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803111345.html
2018-08-03 11:13:50,147 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:13:51,087 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:18:38,998 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:18:38,999 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:18:39,219 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:18:39,435 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:18:39,637 main.py[line: 58] INFO: 正在创建测试用例报告报表
2018-08-03 11:18:39,637 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:18:39,747 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2018-08-03 11:18:39,747 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:18:39,856 main.py[line: 64] INFO: 正在读取运行模式配置
2018-08-03 11:18:39,857 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:18:39,857 main.py[line: 173] INFO: 按套件运行测试
2018-08-03 11:18:39,857 main.py[line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:18:39,891 main.py[line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:18:39,907 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:18:39,907 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"443"}
2018-08-03 11:18:39,908 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:18:39,908 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:18:39,908 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:18:39,976 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:18:40,049 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:18:40,066 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:16:01', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:18:40,081 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:18:40,081 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111839', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:18:40,196 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:18:40,197 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:18:40,197 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:18:40,199 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:18:40,199 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111840', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:18:40,341 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:18:40,341 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:18:40,341 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:18:40" WHERE executed_history_id = 20180803111840 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:18:40,450 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:18:40,450 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:18:40", case_exec_history_id="20180803111840" WHERE executed_history_id = 20180803111839 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:18:40,591 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:12:15', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;请求头&quot;:&quot;&quot;,<br />\n&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;, &quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:18:40,606 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:18:40,606 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111839', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:18:40,724 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:18:40,724 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"请求头":"","方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:18:40,725 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:18:40,725 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:18:40,726 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111840', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '443', '{"请求头":"","方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:18:40,859 testcase.py[line: 112] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 52 (char 51),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:18:40,860 testcase.py[line: 119] INFO: 正在更新步骤执行结果
2018-08-03 11:18:40,860 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 52 (char 51)", protocol_method="未获取到", runtime="2018-08-03 11:18:40" WHERE executed_history_id = 20180803111840 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:18:40,979 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:18:40,979 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:18:40", case_exec_history_id="20180803111840" WHERE executed_history_id = 20180803111839 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:18:41,104 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:18:41,118 testsuite.py[line: 106] INFO: 记录测试用例到测试用例报表
2018-08-03 11:18:41,118 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803111839', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:18:41,236 testsuite.py[line: 109] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:18:41,236 testcase.py[line: 205] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:18:41,236 testsuite.py[line: 114] INFO: 正在更新用例执行结果
2018-08-03 11:18:41,237 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:18:41", case_exec_history_id="20180803111841" WHERE executed_history_id = 20180803111839 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:18:41,348 testsuite.py[line: 122] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:18:41,348 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:18:41,348 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:18:41,348 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803111839',)
2018-08-03 11:18:41,455 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:18:41,455 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803111839')
2018-08-03 11:18:41,562 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:18:41,562 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803111839')
2018-08-03 11:18:41,672 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:18:41,673 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803111839')
2018-08-03 11:18:41,778 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:18:41,778 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803111839')
2018-08-03 11:18:41,891 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:18:41,891 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111839',)
2018-08-03 11:18:41,997 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:18:41,997 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111839')
2018-08-03 11:18:42,104 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:18:42,105 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:18:42,105 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803111839',)
2018-08-03 11:18:42,208 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:18:42,208 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803111839')
2018-08-03 11:18:42,312 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:18:42,312 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803111840')
2018-08-03 11:18:42,425 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:18:42,425 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803111840')
2018-08-03 11:18:42,533 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:18:42,533 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803111841')
2018-08-03 11:18:42,641 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:18:42,641 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803111839.html
2018-08-03 11:18:42,641 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:18:42,644 main.py[line: 235] INFO: 生成测试报告成功
2018-08-03 11:18:43,985 main.py[line: 242] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803111839.html
2018-08-03 11:18:43,985 main.py[line: 245] INFO: 正在发送测试报告邮件...
2018-08-03 11:18:44,579 main.py[line: 249] INFO: 发送邮件成功
2018-08-03 11:48:46,228 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:48:46,228 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:48:46,447 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:48:46,661 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:48:46,876 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 11:48:46,876 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:48:46,993 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 11:48:46,993 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:48:47,103 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 11:48:47,104 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:48:47,105 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 11:48:47,105 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:48:47,140 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:48:47,156 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:48:47,156 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-03 11:48:47,156 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:48:47,157 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:48:47,159 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:48:47,233 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:48:47,308 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:48:47,339 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:16:01', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:48:47,363 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:48:47,363 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803114846', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:48:47,472 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:48:47,472 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:48:47,472 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:48:47,473 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:48:47,473 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803114847', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:48:47,588 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:48:47,588 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:48:47,589 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:48:47" WHERE executed_history_id = 20180803114847 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:48:47,698 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:48:47,698 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:48:47", case_exec_history_id="20180803114847" WHERE executed_history_id = 20180803114846 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:48:47,826 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:48:47,840 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:48:47,840 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803114846', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:48:47,965 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:48:47,965 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:48:47,965 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:48:47,966 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:48:47,967 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803114847', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:48:48,081 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:48:48,081 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:48:48,082 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 11:48:48" WHERE executed_history_id = 20180803114847 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:48:48,190 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:48:48,190 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:48:47", case_exec_history_id="20180803114847" WHERE executed_history_id = 20180803114846 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:48:48,339 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:48:48,353 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:48:48,354 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803114846', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:48:48,469 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:48:48,469 testcase.py[line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:48:48,469 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:48:48,470 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:48:48", case_exec_history_id="20180803114848" WHERE executed_history_id = 20180803114846 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:48:48,577 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:48:48,577 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:48:48,578 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:48:48,578 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803114846',)
2018-08-03 11:48:48,683 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:48:48,683 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803114846')
2018-08-03 11:48:48,789 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:48:48,789 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803114846')
2018-08-03 11:48:48,909 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:48:48,909 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803114846')
2018-08-03 11:48:49,020 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:48:49,020 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803114846')
2018-08-03 11:48:49,124 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:48:49,124 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803114846',)
2018-08-03 11:48:49,229 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:48:49,229 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803114846')
2018-08-03 11:48:49,336 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:48:49,336 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:48:49,336 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803114846',)
2018-08-03 11:48:49,458 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:48:49,458 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803114846')
2018-08-03 11:48:49,566 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:48:49,566 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803114847')
2018-08-03 11:48:49,669 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:48:49,670 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803114847')
2018-08-03 11:48:49,774 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:48:49,774 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803114848')
2018-08-03 11:48:49,878 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:48:49,878 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803114846.html
2018-08-03 11:48:49,879 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:48:49,881 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 11:48:51,187 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803114846.html
2018-08-03 11:48:51,187 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 11:48:51,836 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 11:52:25,317 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:52:25,318 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:52:25,548 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:52:25,763 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:52:25,961 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 11:52:25,962 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:52:26,109 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 11:52:26,109 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:52:26,219 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 11:52:26,220 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:52:26,220 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 11:52:26,221 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:52:26,255 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:52:26,270 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:52:26,270 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-03 11:52:26,271 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:52:26,272 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:52:26,272 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:52:26,343 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:52:26,417 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:52:26,435 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:16:01', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:52:26,451 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:52:26,451 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115225', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:52:26,559 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:52:26,560 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:52:26,562 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:52:26,562 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:52:26,563 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115226', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:52:26,681 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:52:26,681 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:52:26,682 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:52:26" WHERE executed_history_id = 20180803115226 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:52:26,792 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:52:26,792 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:52:26", case_exec_history_id="20180803115226" WHERE executed_history_id = 20180803115225 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:52:26,922 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:52:26,936 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:52:26,936 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115225', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:52:27,063 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:52:27,064 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:52:27,065 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:52:27,067 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:52:27,067 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115227', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:52:27,229 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:52:27,229 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:52:27,230 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 11:52:27" WHERE executed_history_id = 20180803115227 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:52:27,430 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:52:27,431 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:52:27", case_exec_history_id="20180803115227" WHERE executed_history_id = 20180803115225 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:52:27,564 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:52:27,578 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:52:27,578 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115225', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:52:27,688 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:52:27,688 testcase.py[line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:52:27,688 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:52:27,689 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:52:27", case_exec_history_id="20180803115227" WHERE executed_history_id = 20180803115225 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:52:27,802 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:52:27,803 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:52:27,805 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:52:27,805 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803115225',)
2018-08-03 11:52:27,906 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:52:27,907 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803115225')
2018-08-03 11:52:28,013 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:52:28,014 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803115225')
2018-08-03 11:52:28,125 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:52:28,125 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803115225')
2018-08-03 11:52:28,229 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:52:28,229 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803115225')
2018-08-03 11:52:28,330 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:52:28,330 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803115225',)
2018-08-03 11:52:28,431 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:52:28,431 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803115225')
2018-08-03 11:52:28,539 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:52:28,539 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:52:28,540 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803115225',)
2018-08-03 11:52:28,651 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:52:28,651 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803115225')
2018-08-03 11:52:28,754 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:52:28,754 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803115226')
2018-08-03 11:52:28,869 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:52:28,869 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803115227')
2018-08-03 11:52:28,982 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:52:28,982 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803115227')
2018-08-03 11:52:29,091 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:52:29,092 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803115225.html
2018-08-03 11:52:29,094 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:52:29,102 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 11:52:30,132 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803115225.html
2018-08-03 11:52:30,132 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 11:52:30,859 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 11:57:55,587 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 11:57:55,587 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 11:57:55,806 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 11:57:56,022 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 11:57:56,220 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 11:57:56,220 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 11:57:56,332 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 11:57:56,332 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 11:57:56,478 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 11:57:56,479 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 11:57:56,479 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 11:57:56,479 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 11:57:56,511 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 11:57:56,526 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 11:57:56,526 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-03 11:57:56,526 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 11:57:56,527 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 11:57:56,527 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 11:57:56,606 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 11:57:56,685 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 11:57:56,704 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:56:26', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 11:57:56,718 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:57:56,718 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115756', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 11:57:56,861 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 11:57:56,861 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 11:57:56,862 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]}
2018-08-03 11:57:56,863 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:57:56,864 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115756', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:57:56,975 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 11:57:56,976 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:57:56,977 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 11:57:56" WHERE executed_history_id = 20180803115756 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:57:57,095 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:57:57,096 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:57:56", case_exec_history_id="20180803115756" WHERE executed_history_id = 20180803115756 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:57:57,234 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 11:57:57,248 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:57:57,248 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115756', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 11:57:57,370 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 11:57:57,371 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 11:57:57,372 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 11:57:57,377 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 11:57:57,378 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115757', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 11:57:57,494 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 11:57:57,495 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 11:57:57,496 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 11:57:57" WHERE executed_history_id = 20180803115757 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 11:57:57,625 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:57:57,625 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 11:57:57", case_exec_history_id="20180803115757" WHERE executed_history_id = 20180803115756 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:57:57,761 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 11:57:57,779 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 11:57:57,779 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803115756', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 11:57:57,897 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 11:57:57,898 testcase.py[line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 11:57:57,899 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 11:57:57,899 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 11:57:57", case_exec_history_id="20180803115757" WHERE executed_history_id = 20180803115756 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 11:57:58,017 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 11:57:58,018 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 11:57:58,029 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 11:57:58,033 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803115756',)
2018-08-03 11:57:58,137 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 11:57:58,137 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803115756')
2018-08-03 11:57:58,247 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 11:57:58,248 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803115756')
2018-08-03 11:57:58,352 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 11:57:58,354 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803115756')
2018-08-03 11:57:58,465 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 11:57:58,466 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803115756')
2018-08-03 11:57:58,571 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 11:57:58,572 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803115756',)
2018-08-03 11:57:58,675 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 11:57:58,675 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803115756')
2018-08-03 11:57:58,796 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 11:57:58,796 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 11:57:58,798 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803115756',)
2018-08-03 11:57:58,904 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 11:57:58,905 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803115756')
2018-08-03 11:57:59,008 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 11:57:59,009 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803115756')
2018-08-03 11:57:59,118 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 11:57:59,118 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803115757')
2018-08-03 11:57:59,226 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 11:57:59,226 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803115757')
2018-08-03 11:57:59,334 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 11:57:59,335 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803115756.html
2018-08-03 11:57:59,336 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 11:57:59,341 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 11:58:00,360 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803115756.html
2018-08-03 11:58:00,360 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 11:58:01,001 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 12:12:54,928 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 12:12:54,928 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 12:12:55,152 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 12:12:55,382 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 12:12:55,582 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 12:12:55,583 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 12:12:55,698 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 12:12:55,699 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 12:12:55,817 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 12:12:55,818 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 12:12:55,819 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 12:12:55,819 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 12:12:55,852 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 12:12:55,868 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 12:12:55,869 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-03 12:12:55,869 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 12:12:55,869 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 12:12:55,869 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 12:12:55,944 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 12:12:56,020 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 12:12:56,041 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 21:11:23', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 12:12:56,065 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:12:56,065 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121255', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 12:12:56,200 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 12:12:56,200 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 12:12:56,200 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success", "消息":"获取token失败,msg不为success"}]}
2018-08-03 12:12:56,200 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 12:12:56,200 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121256', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 12:12:56,355 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 42 (char 41),停止执行用例[id=1079, name=获取token]
2018-08-03 12:12:56,355 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 12:12:56,356 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 42 (char 41)", protocol_method="get", runtime="2018-08-03 12:12:56" WHERE executed_history_id = 20180803121256 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 12:12:56,465 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:12:56,465 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 12:12:56", case_exec_history_id="20180803121256" WHERE executed_history_id = 20180803121255 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:12:56,603 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 12:12:56,619 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:12:56,619 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121255', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 12:12:56,733 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 12:12:56,734 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 12:12:56,735 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 12:12:56,740 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 12:12:56,740 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121256', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 12:12:56,855 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 12:12:56,856 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 12:12:56,857 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 12:12:56" WHERE executed_history_id = 20180803121256 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 12:12:56,970 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:12:56,970 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 12:12:56", case_exec_history_id="20180803121256" WHERE executed_history_id = 20180803121255 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:12:57,113 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 12:12:57,137 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:12:57,138 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121255', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 12:12:57,253 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 12:12:57,254 testcase.py[line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 12:12:57,257 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:12:57,258 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 12:12:57", case_exec_history_id="20180803121257" WHERE executed_history_id = 20180803121255 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:12:57,376 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 12:12:57,376 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 12:12:57,378 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 12:12:57,378 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803121255',)
2018-08-03 12:12:57,513 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 12:12:57,514 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803121255')
2018-08-03 12:12:57,624 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 12:12:57,625 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803121255')
2018-08-03 12:12:57,737 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 12:12:57,737 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803121255')
2018-08-03 12:12:57,860 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 12:12:57,860 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803121255')
2018-08-03 12:12:57,976 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 12:12:57,978 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803121255',)
2018-08-03 12:12:58,081 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 12:12:58,081 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803121255')
2018-08-03 12:12:58,188 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 12:12:58,188 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 12:12:58,189 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803121255',)
2018-08-03 12:12:58,293 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 12:12:58,293 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803121255')
2018-08-03 12:12:58,398 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 12:12:58,398 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803121256')
2018-08-03 12:12:58,501 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 12:12:58,501 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803121256')
2018-08-03 12:12:58,612 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 12:12:58,612 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803121257')
2018-08-03 12:12:58,731 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 12:12:58,731 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803121255.html
2018-08-03 12:12:58,733 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 12:12:58,736 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 12:13:00,031 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803121255.html
2018-08-03 12:13:00,031 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 12:13:00,673 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 12:15:38,057 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 12:15:38,057 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 12:15:38,290 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 12:15:38,517 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 12:15:38,718 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 12:15:38,719 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 12:15:38,829 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 12:15:38,829 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 12:15:38,938 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 12:15:38,938 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 12:15:38,939 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 12:15:38,939 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 12:15:39,004 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 12:15:39,035 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 12:15:39,036 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-03 12:15:39,037 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 12:15:39,038 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 12:15:39,038 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 12:15:39,160 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 12:15:39,294 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 12:15:39,325 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 21:14:08', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:&nbsp;\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 12:15:39,348 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:15:39,349 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121538', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 12:15:39,468 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 12:15:39,469 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 12:15:39,469 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\": \"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 12:15:39,469 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 12:15:39,469 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121539', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\": \\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 12:15:39,587 testcase.py[line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-03 12:15:39,587 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 12:15:39,589 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 12:15:39,589 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 12:15:39,595 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 12:15:39,595 InterfaceUnittestTestCase.py[line: 36] INFO: 正在发起GET请求...
2018-08-03 12:15:39,595 httpprotocol.py[line: 71] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-03 12:15:39,596 httpprotocol.py[line: 72] INFO: 请求头为：{}
2018-08-03 12:15:39,736 InterfaceUnittestTestCase.py[line: 45] INFO: 正在对服务器返回body进行解码
2018-08-03 12:15:39,737 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-03 12:15:39,739 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 04:15:05 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-03 12:15:39,739 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 12:15:39,745 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg": "success"
2018-08-03 12:15:39,764 testcase.py[line: 194] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-03 12:15:39,764 testcase.py[line: 203] INFO: 正在更新步骤执行结果
2018-08-03 12:15:39,764 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg: success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-03 12:15:39",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg': 'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803121539 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划' AND runtime='0000-00-00 00:00:00'
2018-08-03 12:15:39,877 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:15:39,877 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-03 12:15:39", case_exec_history_id="20180803121539" WHERE executed_history_id = 20180803121538 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:15:40,002 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 12:15:40,018 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:15:40,018 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121538', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 12:15:40,135 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 12:15:40,136 testcase.py[line: 81] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 12:15:40,137 testcase.py[line: 83] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 12:15:40,142 testcase.py[line: 109] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 12:15:40,142 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121540', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 12:15:40,264 testcase.py[line: 126] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 12:15:40,265 testcase.py[line: 135] INFO: 正在更新步骤执行结果
2018-08-03 12:15:40,266 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 12:15:40" WHERE executed_history_id = 20180803121540 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 12:15:40,421 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:15:40,421 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 12:15:40", case_exec_history_id="20180803121540" WHERE executed_history_id = 20180803121538 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:15:40,576 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 12:15:40,600 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 12:15:40,600 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803121538', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 12:15:40,747 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 12:15:40,747 testcase.py[line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 12:15:40,748 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 12:15:40,748 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 12:15:40", case_exec_history_id="20180803121540" WHERE executed_history_id = 20180803121538 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 12:15:40,862 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 12:15:40,863 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 12:15:40,865 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 12:15:40,870 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803121538',)
2018-08-03 12:15:40,972 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 12:15:40,972 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803121538')
2018-08-03 12:15:41,076 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 12:15:41,076 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803121538')
2018-08-03 12:15:41,184 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 12:15:41,185 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803121538')
2018-08-03 12:15:41,291 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 12:15:41,291 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803121538')
2018-08-03 12:15:41,398 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 12:15:41,398 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803121538',)
2018-08-03 12:15:41,504 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 12:15:41,504 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803121538')
2018-08-03 12:15:41,613 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 12:15:41,613 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 12:15:41,615 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803121538',)
2018-08-03 12:15:41,733 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 12:15:41,734 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803121538')
2018-08-03 12:15:41,843 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 12:15:41,844 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803121539')
2018-08-03 12:15:41,957 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 12:15:41,957 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803121540')
2018-08-03 12:15:42,060 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 12:15:42,061 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803121540')
2018-08-03 12:15:42,169 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 12:15:42,169 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803121538.html
2018-08-03 12:15:42,170 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 12:15:42,174 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 12:15:43,414 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803121538.html
2018-08-03 12:15:43,415 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 12:15:44,049 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 13:33:45,195 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 13:33:45,195 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 13:33:45,414 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 13:33:45,623 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 13:33:45,837 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 13:33:45,838 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 13:33:45,951 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 13:33:45,951 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 13:33:46,078 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 13:33:46,079 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 13:33:46,079 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 13:33:46,080 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 13:33:46,115 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 13:33:46,138 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 13:33:46,138 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 13:33:46,138 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 13:33:46,138 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 13:33:46,138 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 13:33:46,211 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 13:33:46,290 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 13:33:46,309 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 21:14:08', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:&nbsp;\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 13:33:46,323 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 13:33:46,323 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803133345', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 13:33:46,435 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 13:33:46,436 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 13:33:46,440 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\": \"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 13:33:46,445 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 13:33:46,446 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803133346', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\": \\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 13:33:46,563 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 13:33:46,563 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 13:33:46,564 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 13:33:46,565 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 13:33:46,570 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 13:33:46,570 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 13:33:46,571 httpprotocol.py[line: 71] INFO: 发起的请求为：http://www.dev.tobosu.com:/mapp/token/get_token
2018-08-03 13:33:46,571 httpprotocol.py[line: 72] INFO: 请求头为：{}
2018-08-03 13:33:46,759 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 13:33:46,760 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 13:33:46,762 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 05:33:11 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-03 13:33:46,763 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-03 13:33:46,769 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg": "success"
2018-08-03 13:33:46,780 testcase.py[line: 193] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-03 13:33:46,780 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2018-08-03 13:33:46,781 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg: success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-03 13:33:46",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg': 'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803133346 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划' AND runtime='0000-00-00 00:00:00'
2018-08-03 13:33:46,900 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 13:33:46,901 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-03 13:33:46", case_exec_history_id="20180803133346" WHERE executed_history_id = 20180803133345 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 13:33:47,048 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 13:33:47,071 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 13:33:47,072 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803133345', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 13:33:47,192 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 13:33:47,192 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 13:33:47,194 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 13:33:47,199 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 13:33:47,200 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803133347', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 13:33:47,307 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 13:33:47,308 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 13:33:47,309 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 13:33:47" WHERE executed_history_id = 20180803133347 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 13:33:47,428 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 13:33:47,428 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 13:33:47", case_exec_history_id="20180803133347" WHERE executed_history_id = 20180803133345 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 13:33:47,557 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 13:33:47,572 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 13:33:47,572 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803133345', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 13:33:47,681 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 13:33:47,681 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 13:33:47,683 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 13:33:47,683 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 13:33:47", case_exec_history_id="20180803133347" WHERE executed_history_id = 20180803133345 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 13:33:47,803 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 13:33:47,803 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 13:33:47,806 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 13:33:47,806 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803133345',)
2018-08-03 13:33:47,916 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 13:33:47,916 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803133345')
2018-08-03 13:33:48,025 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 13:33:48,026 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803133345')
2018-08-03 13:33:48,136 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 13:33:48,136 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803133345')
2018-08-03 13:33:48,242 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 13:33:48,242 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803133345')
2018-08-03 13:33:48,362 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 13:33:48,362 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803133345',)
2018-08-03 13:33:48,470 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 13:33:48,470 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803133345')
2018-08-03 13:33:48,580 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 13:33:48,580 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 13:33:48,581 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803133345',)
2018-08-03 13:33:48,699 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 13:33:48,700 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803133345')
2018-08-03 13:33:48,808 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 13:33:48,808 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803133346')
2018-08-03 13:33:48,913 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 13:33:48,913 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803133347')
2018-08-03 13:33:49,022 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 13:33:49,022 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803133347')
2018-08-03 13:33:49,128 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 13:33:49,129 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803133345.html
2018-08-03 13:33:49,130 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 13:33:49,140 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 13:33:50,522 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803133345.html
2018-08-03 13:33:50,523 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 13:33:51,329 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 13:37:04,991 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 13:37:04,991 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 13:37:05,222 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 13:37:05,438 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 13:37:05,657 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 13:37:05,657 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 13:37:05,858 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 13:37:05,858 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 13:37:05,992 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 13:37:05,992 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 13:37:05,993 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 13:37:05,993 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 13:37:06,024 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 13:37:06,038 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 13:37:06,038 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com",}
2018-08-03 13:37:06,038 global_function.py[line: 102] ERROR: 测试项目[project：接口自动化测试]协议，host，端口信息配置错误,暂时无法执行：Expecting property name enclosed in double quotes: line 1 column 48 (char 47)
2018-08-03 13:37:06,039 main.py[line: 197] CRITICAL: 套件所在项目配置存在问题，跳过执行该套件
2018-08-03 13:37:06,039 main.py[line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 13:37:06,040 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 13:37:06,040 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803133705',)
2018-08-03 13:37:06,155 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 13:37:06,156 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803133705')
2018-08-03 13:37:06,267 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 13:37:06,267 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803133705')
2018-08-03 13:37:06,369 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 13:37:06,370 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803133705')
2018-08-03 13:37:06,478 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 13:37:06,478 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803133705')
2018-08-03 13:37:06,591 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 13:37:06,591 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803133705',)
2018-08-03 13:37:06,722 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 13:37:06,722 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803133705',)
2018-08-03 13:37:06,823 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 13:37:06,823 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803133705.html
2018-08-03 13:37:06,823 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 13:37:06,826 main.py[line: 233] INFO: 生成测试报告成功
2018-08-03 13:37:08,268 main.py[line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803133705.html
2018-08-03 13:37:08,268 main.py[line: 243] INFO: 正在发送测试报告邮件...
2018-08-03 13:37:09,048 main.py[line: 247] INFO: 发送邮件成功
2018-08-03 14:31:09,797 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 14:31:09,797 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 14:31:10,014 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 14:31:10,224 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 14:31:10,434 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 14:31:10,434 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 14:31:10,546 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 14:31:10,547 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 14:31:10,662 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 14:31:10,665 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 14:31:10,666 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 14:31:10,667 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 14:31:10,720 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 14:31:10,753 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 14:31:10,754 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 14:31:10,754 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 14:31:10,754 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 14:31:10,754 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 14:31:10,882 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 14:31:11,009 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 14:31:11,040 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 21:14:08', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:&nbsp;\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 14:31:11,065 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:31:11,065 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143110', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 14:31:11,206 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 14:31:11,207 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:31:11,207 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\": \"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 14:31:11,207 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:31:11,207 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143111', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\": \\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:31:11,330 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 14:31:11,330 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 14:31:11,332 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:31:11,332 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:31:11,339 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:31:11,340 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 14:31:11,340 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 14:31:11,340 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 14:31:11,420 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 14:31:11,422 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 14:31:11,422 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 06:30:36 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=uop9jb9k6hi6akmr1h3bjkumk7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 14:31:11,427 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 14:31:11,427 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg": "success"
2018-08-03 14:31:11,441 testcase.py[line: 193] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-03 14:31:11,441 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2018-08-03 14:31:11,441 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg: success not found in {status:200,msg:success,data:MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=} : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-03 14:31:11",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg': 'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803143111 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划' AND runtime='0000-00-00 00:00:00'
2018-08-03 14:31:11,554 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:31:11,554 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-03 14:31:11", case_exec_history_id="20180803143111" WHERE executed_history_id = 20180803143110 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:31:11,701 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 14:31:11,722 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:31:11,722 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143110', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 14:31:11,841 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 14:31:11,841 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 14:31:11,843 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 14:31:11,848 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:31:11,849 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143111', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:31:11,973 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 14:31:11,973 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 14:31:11,975 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 14:31:11" WHERE executed_history_id = 20180803143111 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 14:31:12,093 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:31:12,093 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 14:31:11", case_exec_history_id="20180803143111" WHERE executed_history_id = 20180803143110 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:31:12,227 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 14:31:12,243 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:31:12,243 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143110', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 14:31:12,362 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 14:31:12,363 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 14:31:12,365 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:31:12,366 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:31:12", case_exec_history_id="20180803143112" WHERE executed_history_id = 20180803143110 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:31:12,487 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 14:31:12,488 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 14:31:12,490 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 14:31:12,495 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803143110',)
2018-08-03 14:31:12,602 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 14:31:12,603 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803143110')
2018-08-03 14:31:12,714 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 14:31:12,715 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803143110')
2018-08-03 14:31:12,828 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 14:31:12,828 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803143110')
2018-08-03 14:31:12,932 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 14:31:12,933 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803143110')
2018-08-03 14:31:13,040 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 14:31:13,040 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143110',)
2018-08-03 14:31:13,150 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 14:31:13,150 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143110')
2018-08-03 14:31:13,261 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 14:31:13,262 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 14:31:13,263 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143110',)
2018-08-03 14:31:13,370 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 14:31:13,371 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143110')
2018-08-03 14:31:13,474 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 14:31:13,474 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803143111')
2018-08-03 14:31:13,581 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 14:31:13,582 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803143111')
2018-08-03 14:31:13,691 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 14:31:13,691 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803143112')
2018-08-03 14:31:13,800 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 14:31:13,801 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803143110.html
2018-08-03 14:31:13,802 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 14:31:13,805 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 14:31:15,875 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803143110.html
2018-08-03 14:31:15,875 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 14:31:17,511 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 14:34:04,541 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 14:34:04,541 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 14:34:04,761 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 14:34:04,970 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 14:34:05,172 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 14:34:05,172 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 14:34:05,288 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 14:34:05,288 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 14:34:05,429 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 14:34:05,430 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 14:34:05,430 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 14:34:05,430 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 14:34:05,463 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 14:34:05,479 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 14:34:05,479 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 14:34:05,479 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 14:34:05,479 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 14:34:05,480 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 14:34:05,553 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 14:34:05,626 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 14:34:05,645 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 14:34:05,659 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:34:05,660 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143404', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 14:34:05,799 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 14:34:05,799 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:34:05,800 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 14:34:05,800 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:34:05,800 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143405', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:34:05,936 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 14:34:05,936 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 14:34:05,938 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:34:05,939 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:34:05,944 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:34:05,944 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 14:34:05,945 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 14:34:05,945 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 14:34:06,033 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 14:34:06,034 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 14:34:06,035 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 06:33:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=9k6kh45tus4d8ojco3mkl0joq3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 14:34:06,036 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 14:34:06,041 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 14:34:06,041 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 14:34:06,053 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 14:34:06,053 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 14:34:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803143405 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 14:34:06,203 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 14:34:06,203 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:34:06,205 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:34:05", case_exec_history_id="20180803143405" WHERE executed_history_id = 20180803143404 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:34:06,333 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 20:23:00', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;msg\\&#39;:&nbsp;\\&#39;success\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 14:34:06,348 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:34:06,349 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143404', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 14:34:06,458 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 14:34:06,458 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token",}
2018-08-03 14:34:06,461 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\'msg\': \'success\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 14:34:06,471 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:34:06,474 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143406', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token",}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\\'msg\\\': \\\'success\\\'", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:34:06,602 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting property name enclosed in double quotes: line 1 column 43 (char 42),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 14:34:06,602 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 14:34:06,604 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting property name enclosed in double quotes: line 1 column 43 (char 42)", protocol_method="未获取到", runtime="2018-08-03 14:34:06" WHERE executed_history_id = 20180803143406 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 14:34:06,803 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:34:06,803 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 14:34:06", case_exec_history_id="20180803143406" WHERE executed_history_id = 20180803143404 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:34:06,936 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 14:34:06,950 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:34:06,951 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143404', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 14:34:07,063 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 14:34:07,064 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 14:34:07,067 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:34:07,072 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:34:07", case_exec_history_id="20180803143407" WHERE executed_history_id = 20180803143404 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:34:07,203 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 14:34:07,203 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 14:34:07,205 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 14:34:07,205 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803143404',)
2018-08-03 14:34:07,333 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 14:34:07,333 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803143404')
2018-08-03 14:34:07,436 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 14:34:07,436 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803143404')
2018-08-03 14:34:07,548 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 14:34:07,548 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803143404')
2018-08-03 14:34:07,663 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 14:34:07,663 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803143404')
2018-08-03 14:34:07,780 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 14:34:07,781 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143404',)
2018-08-03 14:34:07,883 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 14:34:07,884 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143404')
2018-08-03 14:34:08,000 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 14:34:08,000 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 14:34:08,001 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143404',)
2018-08-03 14:34:08,111 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 14:34:08,112 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143404')
2018-08-03 14:34:08,221 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 14:34:08,221 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803143405')
2018-08-03 14:34:08,332 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 14:34:08,332 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803143406')
2018-08-03 14:34:08,442 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 14:34:08,443 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803143407')
2018-08-03 14:34:08,552 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 14:34:08,552 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803143404.html
2018-08-03 14:34:08,553 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 14:34:08,557 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 14:34:09,924 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803143404.html
2018-08-03 14:34:09,926 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 14:34:10,746 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 14:36:06,657 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 14:36:06,657 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 14:36:06,872 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 14:36:07,078 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 14:36:07,281 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 14:36:07,282 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 14:36:07,404 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 14:36:07,404 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 14:36:07,522 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 14:36:07,522 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 14:36:07,523 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 14:36:07,523 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 14:36:07,554 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 14:36:07,569 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 14:36:07,570 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 14:36:07,570 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 14:36:07,570 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 14:36:07,570 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 14:36:07,640 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 14:36:07,713 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 14:36:07,732 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 14:36:07,746 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:36:07,746 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143607', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 14:36:07,871 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 14:36:07,871 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:36:07,871 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 14:36:07,871 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:36:07,871 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143607', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:36:08,006 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 14:36:08,007 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 14:36:08,011 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:36:08,016 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:36:08,016 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:36:08,017 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 14:36:08,018 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 14:36:08,018 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 14:36:08,113 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 14:36:08,113 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 14:36:08,115 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 06:35:32 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=7i1rj3cmopqkabb14chj8aok15; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 14:36:08,120 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 14:36:08,121 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 14:36:08,121 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 14:36:08,129 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 14:36:08,129 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 14:36:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803143607 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 14:36:08,238 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 14:36:08,239 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:36:08,241 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:36:07", case_exec_history_id="20180803143607" WHERE executed_history_id = 20180803143607 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:36:08,381 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:34:33', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&#39;id\\&#39;:&nbsp;\\&#39;278703\\&#39;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 14:36:08,396 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:36:08,398 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143607', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 14:36:08,529 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 14:36:08,529 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:36:08,531 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\'data\': \'(.+?)\'"}}
2018-08-03 14:36:08,536 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:36:08,537 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143608', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:36:08,658 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting ',' delimiter: line 1 column 95 (char 94),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 14:36:08,658 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 14:36:08,659 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 95 (char 94)", protocol_method="get", runtime="2018-08-03 14:36:08" WHERE executed_history_id = 20180803143608 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 14:36:08,777 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:36:08,777 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 14:36:08", case_exec_history_id="20180803143608" WHERE executed_history_id = 20180803143607 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:36:08,925 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 14:36:08,948 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:36:08,949 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803143607', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 14:36:09,059 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 14:36:09,060 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 14:36:09,061 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:36:09,062 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:36:09", case_exec_history_id="20180803143609" WHERE executed_history_id = 20180803143607 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:36:09,216 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 14:36:09,216 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 14:36:09,218 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 14:36:09,218 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803143607',)
2018-08-03 14:36:09,330 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 14:36:09,330 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803143607')
2018-08-03 14:36:09,448 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 14:36:09,449 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803143607')
2018-08-03 14:36:09,555 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 14:36:09,555 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803143607')
2018-08-03 14:36:09,659 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 14:36:09,660 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803143607')
2018-08-03 14:36:09,771 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 14:36:09,772 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143607',)
2018-08-03 14:36:09,885 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 14:36:09,886 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143607')
2018-08-03 14:36:09,995 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 14:36:09,997 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 14:36:09,998 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803143607',)
2018-08-03 14:36:10,102 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 14:36:10,103 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803143607')
2018-08-03 14:36:10,216 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 14:36:10,216 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803143607')
2018-08-03 14:36:10,323 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 14:36:10,323 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803143608')
2018-08-03 14:36:10,428 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 14:36:10,428 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803143609')
2018-08-03 14:36:10,540 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 14:36:10,540 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803143607.html
2018-08-03 14:36:10,541 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 14:36:10,545 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 14:36:11,564 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803143607.html
2018-08-03 14:36:11,564 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 14:36:12,215 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 14:40:01,472 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 14:40:01,472 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 14:40:01,681 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 14:40:01,899 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 14:40:02,102 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 14:40:02,103 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 14:40:02,239 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 14:40:02,241 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 14:40:02,374 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 14:40:02,375 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 14:40:02,375 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 14:40:02,375 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 14:40:02,407 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 14:40:02,422 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 14:40:02,422 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 14:40:02,422 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 14:40:02,422 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 14:40:02,422 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 14:40:02,494 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 14:40:02,566 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 14:40:02,585 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 14:40:02,600 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:40:02,600 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803144001', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 14:40:02,708 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 14:40:02,708 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:40:02,709 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 14:40:02,709 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:40:02,709 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803144002', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:40:02,832 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 14:40:02,832 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 14:40:02,834 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:40:02,834 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:40:02,839 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:40:02,840 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 14:40:02,840 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 14:40:02,840 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 14:40:02,919 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 14:40:02,919 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 14:40:02,920 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 06:39:27 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=k0k03f6ns14k1rlql8j7sev472; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 14:40:02,921 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 14:40:02,926 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 14:40:02,927 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 14:40:02,940 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 14:40:02,940 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 14:40:02",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803144002 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 14:40:03,053 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 14:40:03,053 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:40:03,056 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:40:02", case_exec_history_id="20180803144002" WHERE executed_history_id = 20180803144001 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:40:03,203 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:38:35', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;: \\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 14:40:03,227 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:40:03,228 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803144001', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 14:40:03,339 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 14:40:03,339 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:40:03,341 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\"data\": \"(.+?)\""}}
2018-08-03 14:40:03,348 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:40:03,349 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803144003', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\"data\\": \\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:40:03,458 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting ',' delimiter: line 1 column 95 (char 94),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 14:40:03,459 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 14:40:03,460 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 95 (char 94)", protocol_method="get", runtime="2018-08-03 14:40:03" WHERE executed_history_id = 20180803144003 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 14:40:03,579 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:40:03,580 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 14:40:03", case_exec_history_id="20180803144003" WHERE executed_history_id = 20180803144001 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:40:03,727 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 14:40:03,746 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:40:03,747 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803144001', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 14:40:03,867 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 14:40:03,867 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 14:40:03,869 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:40:03,869 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:40:03", case_exec_history_id="20180803144003" WHERE executed_history_id = 20180803144001 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:40:03,991 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 14:40:03,991 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 14:40:03,993 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 14:40:03,994 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803144001',)
2018-08-03 14:40:04,134 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 14:40:04,134 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803144001')
2018-08-03 14:40:04,240 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 14:40:04,240 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803144001')
2018-08-03 14:40:04,349 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 14:40:04,349 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803144001')
2018-08-03 14:40:04,453 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 14:40:04,453 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803144001')
2018-08-03 14:40:04,563 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 14:40:04,563 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803144001',)
2018-08-03 14:40:04,676 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 14:40:04,677 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803144001')
2018-08-03 14:40:04,789 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 14:40:04,789 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 14:40:04,790 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803144001',)
2018-08-03 14:40:04,905 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 14:40:04,905 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803144001')
2018-08-03 14:40:05,010 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 14:40:05,011 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803144002')
2018-08-03 14:40:05,119 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 14:40:05,120 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803144003')
2018-08-03 14:40:05,228 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 14:40:05,229 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803144003')
2018-08-03 14:40:05,342 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 14:40:05,342 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803144001.html
2018-08-03 14:40:05,343 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 14:40:05,347 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 14:40:06,407 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803144001.html
2018-08-03 14:40:06,407 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 14:40:07,156 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 14:56:29,706 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 14:56:29,706 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 14:56:29,936 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 14:56:30,168 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 14:56:30,372 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 14:56:30,372 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 14:56:30,489 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 14:56:30,489 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 14:56:30,598 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 14:56:30,599 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 14:56:30,599 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 14:56:30,599 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 14:56:30,631 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 14:56:30,647 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 14:56:30,647 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 14:56:30,647 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 14:56:30,648 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 14:56:30,648 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 14:56:30,722 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 14:56:30,808 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 14:56:30,839 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 14:56:30,863 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:56:30,864 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803145630', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 14:56:30,976 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 14:56:30,977 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:56:30,977 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 14:56:30,977 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:56:30,978 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803145630', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:56:31,104 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 14:56:31,105 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 14:56:31,107 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:56:31,107 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:56:31,112 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 14:56:31,113 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 14:56:31,113 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 14:56:31,113 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 14:56:31,260 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 14:56:31,261 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 14:56:31,262 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 06:55:56 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=dig1hcathr008uu1b9htdgf431; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 14:56:31,268 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 14:56:31,268 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 14:56:31,268 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 14:56:31,271 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 14:56:31,278 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 14:56:31",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803145630 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 14:56:31,409 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 14:56:31,409 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:56:31,411 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:56:30", case_exec_history_id="20180803145630" WHERE executed_history_id = 20180803145630 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:56:31,591 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:55:01', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;: \\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 14:56:31,605 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:56:31,606 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803145630', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 14:56:31,714 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 14:56:31,715 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 14:56:31,718 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\"data\": \"(.+?)\""}}
2018-08-03 14:56:31,726 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 14:56:31,726 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803145631', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\"data\\": \\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 14:56:31,858 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting ',' delimiter: line 1 column 95 (char 94),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 14:56:31,858 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 14:56:31,860 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 95 (char 94)", protocol_method="get", runtime="2018-08-03 14:56:31" WHERE executed_history_id = 20180803145631 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 14:56:31,982 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:56:31,983 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 14:56:31", case_exec_history_id="20180803145631" WHERE executed_history_id = 20180803145630 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:56:32,192 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 14:56:32,216 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 14:56:32,216 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803145630', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 14:56:32,385 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 14:56:32,386 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 14:56:32,388 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 14:56:32,389 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 14:56:32", case_exec_history_id="20180803145632" WHERE executed_history_id = 20180803145630 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 14:56:32,503 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 14:56:32,504 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 14:56:32,507 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 14:56:32,507 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803145630',)
2018-08-03 14:56:32,638 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 14:56:32,638 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803145630')
2018-08-03 14:56:32,748 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 14:56:32,749 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803145630')
2018-08-03 14:56:32,864 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 14:56:32,865 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803145630')
2018-08-03 14:56:32,969 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 14:56:32,969 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803145630')
2018-08-03 14:56:33,081 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 14:56:33,082 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803145630',)
2018-08-03 14:56:33,188 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 14:56:33,188 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803145630')
2018-08-03 14:56:33,298 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 14:56:33,299 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 14:56:33,300 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803145630',)
2018-08-03 14:56:33,408 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 14:56:33,408 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803145630')
2018-08-03 14:56:33,514 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 14:56:33,514 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803145630')
2018-08-03 14:56:33,621 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 14:56:33,622 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803145631')
2018-08-03 14:56:33,737 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 14:56:33,737 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803145632')
2018-08-03 14:56:33,844 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 14:56:33,844 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803145630.html
2018-08-03 14:56:33,846 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 14:56:33,854 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 14:56:34,830 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803145630.html
2018-08-03 14:56:34,830 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 14:56:35,439 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 15:09:51,795 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 15:09:51,795 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 15:09:52,018 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 15:09:52,230 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 15:09:52,433 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 15:09:52,433 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 15:09:52,547 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 15:09:52,547 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 15:09:52,658 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 15:09:52,659 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 15:09:52,660 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 15:09:52,661 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 15:09:52,692 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 15:09:52,708 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 15:09:52,709 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 15:09:52,709 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 15:09:52,709 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 15:09:52,709 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 15:09:52,782 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 15:09:52,857 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 15:09:52,875 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 15:09:52,890 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:09:52,890 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803150952', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 15:09:53,004 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 15:09:53,004 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:09:53,006 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 15:09:53,012 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:09:53,013 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803150953', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:09:53,129 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 15:09:53,129 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 15:09:53,131 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:09:53,131 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:09:53,136 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:09:53,137 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 15:09:53,137 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 15:09:53,137 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 15:09:53,252 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 15:09:53,253 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 15:09:53,255 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 07:09:18 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=eb4v80nbeqg07odklmdsgat3o5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 15:09:53,261 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 15:09:53,262 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 15:09:53,266 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 15:09:53,274 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 15:09:53,276 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 15:09:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803150953 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 15:09:53,391 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 15:09:53,391 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:09:53,393 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:09:53", case_exec_history_id="20180803150953" WHERE executed_history_id = 20180803150952 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:09:53,527 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 00:08:25', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 15:09:53,541 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:09:53,542 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803150952', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 15:09:53,661 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 15:09:53,662 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:09:53,673 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\"data\":\"(.+?)\""}}
2018-08-03 15:09:53,684 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:09:53,685 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803150953', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]"输出":{"token":"\\"data\\":\\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:09:53,802 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Expecting ',' delimiter: line 1 column 95 (char 94),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 15:09:53,803 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 15:09:53,804 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 95 (char 94)", protocol_method="get", runtime="2018-08-03 15:09:53" WHERE executed_history_id = 20180803150953 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 15:09:53,919 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:09:53,920 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 15:09:53", case_exec_history_id="20180803150953" WHERE executed_history_id = 20180803150952 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:09:54,057 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 15:09:54,072 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:09:54,073 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803150952', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 15:09:54,185 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 15:09:54,185 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 15:09:54,186 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:09:54,187 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:09:54", case_exec_history_id="20180803150954" WHERE executed_history_id = 20180803150952 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:09:54,304 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 15:09:54,304 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 15:09:54,306 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 15:09:54,308 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803150952',)
2018-08-03 15:09:54,418 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 15:09:54,418 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803150952')
2018-08-03 15:09:54,524 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 15:09:54,525 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803150952')
2018-08-03 15:09:54,640 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 15:09:54,641 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803150952')
2018-08-03 15:09:54,747 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 15:09:54,748 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803150952')
2018-08-03 15:09:54,851 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 15:09:54,852 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803150952',)
2018-08-03 15:09:54,958 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 15:09:54,958 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803150952')
2018-08-03 15:09:55,075 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 15:09:55,076 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 15:09:55,078 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803150952',)
2018-08-03 15:09:55,191 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 15:09:55,191 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803150952')
2018-08-03 15:09:55,301 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 15:09:55,301 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803150953')
2018-08-03 15:09:55,408 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 15:09:55,409 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803150953')
2018-08-03 15:09:55,520 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 15:09:55,520 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803150954')
2018-08-03 15:09:55,639 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 15:09:55,640 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803150952.html
2018-08-03 15:09:55,641 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 15:09:55,644 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 15:09:56,755 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803150952.html
2018-08-03 15:09:56,755 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 15:09:57,644 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 15:12:38,837 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 15:12:38,837 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 15:12:39,071 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 15:12:39,282 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 15:12:39,497 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 15:12:39,498 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 15:12:39,620 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 15:12:39,620 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 15:12:39,725 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 15:12:39,726 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 15:12:39,726 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 15:12:39,726 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 15:12:39,761 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 15:12:39,778 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 15:12:39,778 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 15:12:39,779 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 15:12:39,779 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 15:12:39,779 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 15:12:39,847 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 15:12:39,922 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 15:12:39,948 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 15:12:39,963 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:12:39,964 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151239', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 15:12:40,074 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 15:12:40,074 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:12:40,075 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 15:12:40,075 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:12:40,075 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151240', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:12:40,188 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 15:12:40,188 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 15:12:40,190 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,195 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,195 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,196 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 15:12:40,196 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 15:12:40,197 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 15:12:40,284 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 15:12:40,285 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 15:12:40,286 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 07:12:05 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=pidjsqljanf0m7do2id7l11kl7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 15:12:40,291 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 15:12:40,292 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 15:12:40,292 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 15:12:40,302 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 15:12:40,302 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 15:12:40",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803151240 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 15:12:40,411 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 15:12:40,412 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:12:40,413 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:12:40", case_exec_history_id="20180803151240" WHERE executed_history_id = 20180803151239 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:12:40,547 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 00:11:04', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}]</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 15:12:40,562 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:12:40,563 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151239', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 15:12:40,672 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 15:12:40,673 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:12:40,674 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"token":"\"data\":\"(.+?)\""}}
2018-08-03 15:12:40,680 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:12:40,683 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151240', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"token":"\\"data\\":\\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:12:40,795 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 15:12:40,795 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 15:12:40,798 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,801 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,801 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:12:40,802 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 15:12:40,802 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 15:12:40,803 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 15:12:40,878 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 15:12:40,878 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 15:12:40,879 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 07:12:05 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 15:12:40,884 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 15:12:40,885 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 15:12:40,897 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 15:12:40,897 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 15:12:40",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'token': ''data':'(.+?)''}}" WHERE executed_history_id = 20180803151240 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 15:12:41,054 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000","password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 15:12:41,054 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}]"输出":{"token":"\"data\":\"(.+?)\""}}
2018-08-03 15:12:41,056 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:12:41,062 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151240', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000","password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}]"输出":{"token":"\\"data\\":\\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:12:41,209 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 153 (char 152),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 15:12:41,209 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 15:12:41,210 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 153 (char 152)", protocol_method="未获取到", runtime="2018-08-03 15:12:41" WHERE executed_history_id = 20180803151240 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 15:12:41,348 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:12:41,348 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 15:12:40", case_exec_history_id="20180803151240" WHERE executed_history_id = 20180803151239 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:12:41,554 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 15:12:41,568 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:12:41,569 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803151239', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 15:12:41,679 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 15:12:41,679 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 15:12:41,681 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:12:41,684 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:12:41", case_exec_history_id="20180803151241" WHERE executed_history_id = 20180803151239 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:12:41,798 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 15:12:41,798 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 15:12:41,800 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 15:12:41,800 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803151239',)
2018-08-03 15:12:41,911 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 15:12:41,911 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803151239')
2018-08-03 15:12:42,017 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 15:12:42,018 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803151239')
2018-08-03 15:12:42,121 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 15:12:42,122 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803151239')
2018-08-03 15:12:42,227 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 15:12:42,228 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803151239')
2018-08-03 15:12:42,334 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 15:12:42,335 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803151239',)
2018-08-03 15:12:42,442 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 15:12:42,442 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803151239')
2018-08-03 15:12:42,551 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 15:12:42,552 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 15:12:42,553 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803151239',)
2018-08-03 15:12:42,669 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 15:12:42,670 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803151239')
2018-08-03 15:12:42,777 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 15:12:42,778 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803151240')
2018-08-03 15:12:42,883 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 15:12:42,883 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803151240')
2018-08-03 15:12:43,000 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 15:12:43,000 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803151241')
2018-08-03 15:12:43,104 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 15:12:43,104 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803151239.html
2018-08-03 15:12:43,106 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 15:12:43,110 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 15:12:44,465 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803151239.html
2018-08-03 15:12:44,465 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 15:12:45,224 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 15:51:37,329 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 15:51:37,330 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 15:51:37,554 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 15:51:37,777 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 15:51:37,991 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 15:51:37,991 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 15:51:38,108 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 15:51:38,108 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 15:51:38,221 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 15:51:38,222 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 15:51:38,223 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 15:51:38,223 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 15:51:38,261 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 15:51:38,276 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 15:51:38,277 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 15:51:38,277 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 15:51:38,277 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 15:51:38,278 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 15:51:38,347 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 15:51:38,423 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 15:51:38,454 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 15:51:38,478 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:51:38,478 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155137', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 15:51:38,585 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 15:51:38,585 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:51:38,585 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 15:51:38,585 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:51:38,586 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155138', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:51:38,699 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 15:51:38,700 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 15:51:38,702 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:38,702 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:38,702 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:38,703 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 15:51:38,709 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 15:51:38,709 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 15:51:38,858 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 15:51:38,859 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 15:51:38,860 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 07:51:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=p1m0fmeo6gm8mj9cav0dobs6k2; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 15:51:38,861 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 15:51:38,867 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 15:51:38,869 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 15:51:38,877 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 15:51:38,877 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 15:51:38",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803155138 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 15:51:38,993 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 15:51:38,993 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:51:38,995 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:51:38", case_exec_history_id="20180803155138" WHERE executed_history_id = 20180803155137 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:51:39,143 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 00:12:06', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;,&quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:\\&quot;(.+?)\\&quot;&quot;}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 15:51:39,168 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:51:39,168 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155137', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 15:51:39,283 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 15:51:39,283 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 15:51:39,285 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"token":"\"data\":\"(.+?)\""}}
2018-08-03 15:51:39,290 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:51:39,291 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155139', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"token":"\\"data\\":\\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:51:39,418 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 15:51:39,419 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 15:51:39,421 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:39,422 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:39,428 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 15:51:39,428 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 15:51:39,428 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 15:51:39,429 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 15:51:39,517 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 15:51:39,517 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 15:51:39,521 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 07:51:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 15:51:39,528 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 15:51:39,533 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 15:51:39,540 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 15:51:39,540 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 15:51:39",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'token': ''data':'(.+?)''}}" WHERE executed_history_id = 20180803155139 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 15:51:39,654 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000","password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 15:51:39,654 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"token":"\"data\":\"(.+?)\""}}
2018-08-03 15:51:39,656 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 15:51:39,662 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155139', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000","password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"token":"\\"data\\":\\"(.+?)\\""}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 15:51:39,774 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 153 (char 152),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 15:51:39,775 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 15:51:39,777 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 153 (char 152)", protocol_method="未获取到", runtime="2018-08-03 15:51:39" WHERE executed_history_id = 20180803155139 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 15:51:39,893 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:51:39,893 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 15:51:39", case_exec_history_id="20180803155139" WHERE executed_history_id = 20180803155137 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:51:40,024 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 15:51:40,038 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 15:51:40,039 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803155137', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 15:51:40,149 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 15:51:40,151 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 15:51:40,153 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 15:51:40,154 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 15:51:40", case_exec_history_id="20180803155140" WHERE executed_history_id = 20180803155137 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 15:51:40,266 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 15:51:40,266 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 15:51:40,269 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 15:51:40,269 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803155137',)
2018-08-03 15:51:40,380 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 15:51:40,380 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803155137')
2018-08-03 15:51:40,499 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 15:51:40,499 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803155137')
2018-08-03 15:51:40,605 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 15:51:40,606 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803155137')
2018-08-03 15:51:40,723 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 15:51:40,723 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803155137')
2018-08-03 15:51:40,866 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 15:51:40,866 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803155137',)
2018-08-03 15:51:41,001 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 15:51:41,001 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803155137')
2018-08-03 15:51:41,142 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 15:51:41,144 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 15:51:41,146 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803155137',)
2018-08-03 15:51:41,262 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 15:51:41,263 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803155137')
2018-08-03 15:51:41,372 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 15:51:41,372 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803155138')
2018-08-03 15:51:41,486 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 15:51:41,487 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803155139')
2018-08-03 15:51:41,601 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 15:51:41,601 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803155140')
2018-08-03 15:51:41,710 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 15:51:41,711 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803155137.html
2018-08-03 15:51:41,714 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 15:51:41,721 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 15:51:43,000 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803155137.html
2018-08-03 15:51:43,000 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 15:51:43,641 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 16:24:38,375 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 16:24:38,376 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 16:24:41,915 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 16:24:42,136 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 16:24:42,351 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 16:24:42,351 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 16:24:42,474 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 16:24:42,475 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 16:24:42,872 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 16:24:42,873 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 16:24:42,873 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 16:24:42,873 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 16:24:42,908 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 16:24:42,924 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 16:24:42,924 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 16:24:42,925 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 16:24:42,925 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 16:24:42,925 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 16:24:43,000 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 16:24:43,077 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 16:24:43,097 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 16:24:43,111 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 16:24:43,111 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162442', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 16:24:43,441 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 16:24:43,441 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 16:24:43,442 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 16:24:43,442 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 16:24:43,442 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162443', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 16:24:43,583 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 16:24:43,583 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 16:24:43,585 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:43,585 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:43,592 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:43,592 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 16:24:43,593 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 16:24:43,594 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 16:24:43,830 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 16:24:43,831 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 16:24:43,832 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 08:24:08 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=8vkugjho6lrbvrb1qug1snq936; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 16:24:43,833 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 16:24:43,838 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 16:24:43,839 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 16:24:43,851 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 16:24:43,851 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 16:24:43",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803162443 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 16:24:43,970 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 16:24:43,971 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 16:24:43,972 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 16:24:43", case_exec_history_id="20180803162443" WHERE executed_history_id = 20180803162442 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 16:24:44,105 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 01:20:49', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;re&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;:(.+?)&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;re&quot;:&quot;token&quot;:&quot;\\&quot;data\\&quot;:(.+?)&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 16:24:44,121 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 16:24:44,121 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162442', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 16:24:44,239 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 16:24:44,239 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 16:24:44,241 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\"data\":(.+?)"}}}
2018-08-03 16:24:44,243 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 16:24:44,248 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162444', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\\"data\\":(.+?)"}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 16:24:44,360 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 16:24:44,360 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 16:24:44,362 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:44,367 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:44,369 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 16:24:44,373 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 16:24:44,378 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 16:24:44,378 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 16:24:44,465 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 16:24:44,466 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 16:24:44,468 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 08:24:09 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 16:24:44,469 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 16:24:44,474 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 16:24:44,474 unittesttestcase.py[line: 397] INFO: 使用正则表达式提取
2018-08-03 16:24:44,475 unittesttestcase.py[line: 403] INFO: 获取到的变量的值为：['"']
2018-08-03 16:24:44,475 unittesttestcase.py[line: 413] INFO: 使用“正则表达式提取”提取的自定义变量-值(key-value对)为:token_1-"
2018-08-03 16:24:44,486 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 16:24:44,486 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 16:24:44",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'re': {'token': ''data':(.+?)'}}}" WHERE executed_history_id = 20180803162444 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 16:24:44,627 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 16:24:44,627 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"re":"token":"\"data\":(.+?)"}}}
2018-08-03 16:24:44,635 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 16:24:44,635 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162444', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"re":"token":"\\"data\\":(.+?)"}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 16:24:44,763 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 16:24:44,763 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 16:24:44,766 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 16:24:44" WHERE executed_history_id = 20180803162444 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 16:24:44,892 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 16:24:44,892 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 16:24:44", case_exec_history_id="20180803162444" WHERE executed_history_id = 20180803162442 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 16:24:45,032 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 16:24:45,048 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 16:24:45,048 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803162442', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 16:24:45,167 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 16:24:45,168 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 16:24:45,170 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 16:24:45,171 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 16:24:45", case_exec_history_id="20180803162445" WHERE executed_history_id = 20180803162442 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 16:24:45,306 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 16:24:45,307 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 16:24:45,310 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 16:24:45,310 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803162442',)
2018-08-03 16:24:45,429 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 16:24:45,431 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803162442')
2018-08-03 16:24:45,554 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 16:24:45,554 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803162442')
2018-08-03 16:24:45,695 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 16:24:45,695 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803162442')
2018-08-03 16:24:45,840 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 16:24:45,841 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803162442')
2018-08-03 16:24:46,000 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 16:24:46,001 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803162442',)
2018-08-03 16:24:46,115 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 16:24:46,115 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803162442')
2018-08-03 16:24:46,262 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 16:24:46,263 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 16:24:46,266 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803162442',)
2018-08-03 16:24:46,414 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 16:24:46,417 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803162442')
2018-08-03 16:24:46,527 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 16:24:46,528 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803162443')
2018-08-03 16:24:47,198 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 16:24:47,199 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803162444')
2018-08-03 16:24:47,331 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 16:24:47,331 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803162445')
2018-08-03 16:24:47,454 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 16:24:47,455 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803162442.html
2018-08-03 16:24:47,456 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 16:24:47,459 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 16:24:49,086 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803162442.html
2018-08-03 16:24:49,087 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 16:24:49,892 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:05:03,935 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:05:03,935 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:05:04,164 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:05:04,376 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 17:05:04,579 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:05:04,579 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:05:04,685 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:05:04,685 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:05:04,794 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:05:04,795 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:05:04,795 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 17:05:04,795 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:05:04,827 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:05:04,847 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:05:04,847 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:05:04,847 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:05:04,847 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:05:04,848 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 17:05:04,920 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:05:04,994 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:05:05,012 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:05:05,027 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:05:05,027 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170504', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:05:05,137 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:05:05,137 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:05:05,138 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:05:05,138 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:05:05,138 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170505', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:05:05,248 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:05:05,248 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:05:05,250 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:05:05,250 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:05:05,255 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:05:05,255 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:05:05,256 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:05:05,256 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:05:05,367 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:05:05,368 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:05:05,369 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:04:29 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=j213n0phftfucmdca0tp1hs704; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:05:05,371 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:05:05,372 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:05:05,375 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:05:05,377 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:05:05,378 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:05:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803170505 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:05:05,496 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:05:05,497 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:05:05,499 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:05:05", case_exec_history_id="20180803170505" WHERE executed_history_id = 20180803170504 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:05:05,642 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:03:34', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;re&quot;:{&quot;token&quot;:&quot;\\&#39;data\\&#39;: \\&#39;(.+?)\\&#39;&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;re&quot;:&quot;token&quot;:&quot;\\&quot;data\\&quot;:(.+?)&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:05:05,666 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:05:05,667 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170504', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:05:05,784 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:05:05,784 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:05:05,786 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\'data\': \'(.+?)\'"}}}
2018-08-03 17:05:05,786 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:05:05,786 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170505', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\\\'data\\\': \\\'(.+?)\\\'"}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:05:05,914 testcase.py[line: 125] ERROR: 步骤[1]信息填写错误: Invalid \escape: line 1 column 117 (char 116),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:05:05,915 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:05:05,916 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Invalid \escape: line 1 column 117 (char 116)", protocol_method="get", runtime="2018-08-03 17:05:05" WHERE executed_history_id = 20180803170505 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:05:06,032 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:05:06,032 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:05:05", case_exec_history_id="20180803170505" WHERE executed_history_id = 20180803170504 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:05:06,164 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:05:06,178 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:05:06,178 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170504', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:05:06,305 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:05:06,305 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:05:06,306 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:05:06,306 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:05:06", case_exec_history_id="20180803170506" WHERE executed_history_id = 20180803170504 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:05:06,414 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:05:06,415 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:05:06,416 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:05:06,418 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803170504',)
2018-08-03 17:05:06,538 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:05:06,538 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803170504')
2018-08-03 17:05:06,645 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:05:06,645 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803170504')
2018-08-03 17:05:06,746 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:05:06,747 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803170504')
2018-08-03 17:05:06,857 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:05:06,857 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803170504')
2018-08-03 17:05:06,961 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:05:06,961 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803170504',)
2018-08-03 17:05:07,066 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:05:07,067 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803170504')
2018-08-03 17:05:07,176 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:05:07,177 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:05:07,178 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803170504',)
2018-08-03 17:05:07,290 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:05:07,290 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803170504')
2018-08-03 17:05:07,398 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:05:07,398 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803170505')
2018-08-03 17:05:07,506 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:05:07,506 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803170505')
2018-08-03 17:05:07,613 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:05:07,613 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803170506')
2018-08-03 17:05:07,716 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:05:07,717 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803170504.html
2018-08-03 17:05:07,718 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 17:05:07,720 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 17:05:09,006 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803170504.html
2018-08-03 17:05:09,006 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:05:09,779 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:06:17,069 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:06:17,069 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:06:17,288 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:06:17,496 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 17:06:17,707 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:06:17,707 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:06:17,818 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:06:17,818 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:06:17,931 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:06:17,932 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:06:17,932 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 17:06:17,933 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:06:17,982 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:06:18,008 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:06:18,008 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:06:18,008 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:06:18,008 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:06:18,009 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 17:06:18,129 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:06:18,239 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:06:18,267 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:06:18,287 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:06:18,287 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170617', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:06:18,400 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:06:18,400 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:06:18,400 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:06:18,401 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:06:18,401 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170618', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:06:18,513 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:06:18,514 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:06:18,516 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:18,516 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:18,522 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:18,522 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:06:18,522 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:06:18,522 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:06:18,614 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:06:18,615 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:06:18,616 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:05:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=5mhg9gkjc2bfiv70iu4sbebbu0; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:06:18,616 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:06:18,621 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:06:18,622 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:06:18,623 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:06:18,623 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:06:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803170618 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:06:18,735 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:06:18,736 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:06:18,737 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:06:18", case_exec_history_id="20180803170618" WHERE executed_history_id = 20180803170617 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:06:18,889 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:04:49', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;re&quot;:{&quot;token&quot;:&quot;\\&quot;data\\&quot;: \\&quot;(.+?)\\&quot;&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;re&quot;:&quot;token&quot;:&quot;\\&quot;data\\&quot;:(.+?)&quot;}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:06:18,909 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:06:18,909 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170617', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:06:19,032 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:06:19,032 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:06:19,033 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\"data\": \"(.+?)\""}}}
2018-08-03 17:06:19,039 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:06:19,039 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170619', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"re":{"token":"\\"data\\": \\"(.+?)\\""}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:06:19,151 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:06:19,151 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:06:19,152 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:19,155 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:19,159 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:06:19,160 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:06:19,160 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:06:19,160 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:06:19,237 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:06:19,238 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:06:19,239 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:05:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:06:19,239 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:06:19,244 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:06:19,245 unittesttestcase.py[line: 397] INFO: 使用正则表达式提取
2018-08-03 17:06:19,257 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:06:19,257 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:06:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'re': {'token': ''data': '(.+?)''}}}" WHERE executed_history_id = 20180803170619 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:06:19,369 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:06:19,370 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"re":"token":"\"data\":(.+?)"}}}
2018-08-03 17:06:19,374 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:06:19,379 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170619', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"re":"token":"\\"data\\":(.+?)"}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:06:19,515 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:06:19,515 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:06:19,518 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:06:19" WHERE executed_history_id = 20180803170619 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:06:19,632 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:06:19,632 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:06:19", case_exec_history_id="20180803170619" WHERE executed_history_id = 20180803170617 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:06:19,761 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:06:19,776 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:06:19,776 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803170617', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:06:19,887 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:06:19,887 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:06:19,889 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:06:19,889 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:06:19", case_exec_history_id="20180803170619" WHERE executed_history_id = 20180803170617 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:06:20,003 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:06:20,003 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:06:20,006 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:06:20,006 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803170617',)
2018-08-03 17:06:20,117 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:06:20,117 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803170617')
2018-08-03 17:06:20,224 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:06:20,225 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803170617')
2018-08-03 17:06:20,337 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:06:20,337 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803170617')
2018-08-03 17:06:20,439 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:06:20,439 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803170617')
2018-08-03 17:06:20,550 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:06:20,551 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803170617',)
2018-08-03 17:06:20,658 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:06:20,658 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803170617')
2018-08-03 17:06:20,778 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:06:20,778 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:06:20,780 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803170617',)
2018-08-03 17:06:20,884 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:06:20,884 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803170617')
2018-08-03 17:06:20,993 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:06:20,993 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803170618')
2018-08-03 17:06:21,102 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:06:21,102 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803170619')
2018-08-03 17:06:21,206 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:06:21,206 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803170619')
2018-08-03 17:06:21,312 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:06:21,313 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803170617.html
2018-08-03 17:06:21,314 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 17:06:21,317 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 17:06:22,323 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803170617.html
2018-08-03 17:06:22,323 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:06:23,003 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:10:16,532 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:10:16,532 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:10:16,764 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:10:16,996 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 17:10:17,199 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:10:17,200 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:10:17,326 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:10:17,326 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:10:17,434 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:10:17,435 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:10:17,435 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 17:10:17,436 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:10:17,467 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:10:17,481 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:10:17,481 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:10:17,481 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:10:17,482 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:10:17,482 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 17:10:17,551 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:10:17,622 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:10:17,640 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:10:17,654 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:10:17,654 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171016', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:10:17,795 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:10:17,796 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:10:17,796 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:10:17,796 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:10:17,796 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171017', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:10:17,909 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:10:17,909 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:10:17,910 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:17,911 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:17,911 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:17,911 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:10:17,912 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:10:17,912 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:10:18,017 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:10:18,018 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:10:18,019 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:09:42 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=bps1h0c9tpl7eerdukmomu7m25; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:10:18,019 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:10:18,019 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:10:18,019 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:10:18,021 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:10:18,021 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:10:17",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803171017 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:10:18,141 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:10:18,141 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:10:18,142 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:10:17", case_exec_history_id="20180803171017" WHERE executed_history_id = 20180803171016 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:10:18,305 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:10:18,320 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:10:18,320 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171016', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:10:18,442 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:10:18,443 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:10:18,444 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:10:18,444 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:10:18,445 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171018', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:10:18,582 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:10:18,583 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:10:18,584 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:18,584 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:18,584 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:10:18,585 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:10:18,585 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:10:18,585 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:10:18,666 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:10:18,667 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:10:18,668 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:09:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:10:18,668 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:10:18,669 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:10:18,669 unittesttestcase.py[line: 387] INFO: 使用键值提取
2018-08-03 17:10:18,669 unittesttestcase.py[line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 17:10:18,669 unittesttestcase.py[line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:10:18,669 unittesttestcase.py[line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:10:18,669 unittesttestcase.py[line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:10:18,670 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:10:18,671 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:10:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803171018 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:10:18,831 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:10:18,832 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:10:18,834 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:10:18,834 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171018', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:10:18,989 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:10:18,990 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:10:18,991 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:10:18" WHERE executed_history_id = 20180803171018 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:10:19,162 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:10:19,163 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:10:18", case_exec_history_id="20180803171018" WHERE executed_history_id = 20180803171016 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:10:19,319 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:10:19,341 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:10:19,341 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803171016', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:10:19,450 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:10:19,450 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:10:19,450 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:10:19,451 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:10:19", case_exec_history_id="20180803171019" WHERE executed_history_id = 20180803171016 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:10:19,561 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:10:19,561 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:10:19,563 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:10:19,563 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803171016',)
2018-08-03 17:10:19,671 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:10:19,672 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803171016')
2018-08-03 17:10:19,778 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:10:19,779 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803171016')
2018-08-03 17:10:19,890 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:10:19,890 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803171016')
2018-08-03 17:10:20,017 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:10:20,017 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803171016')
2018-08-03 17:10:20,302 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:10:20,302 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803171016',)
2018-08-03 17:10:20,570 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:10:20,570 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803171016')
2018-08-03 17:10:20,717 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:10:20,718 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:10:20,718 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803171016',)
2018-08-03 17:10:20,932 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:10:20,932 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803171016')
2018-08-03 17:10:21,287 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:10:21,287 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803171017')
2018-08-03 17:10:21,630 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:10:21,630 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803171018')
2018-08-03 17:10:21,886 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:10:21,888 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803171019')
2018-08-03 17:10:22,062 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:10:22,063 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803171016.html
2018-08-03 17:10:22,065 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 17:10:22,068 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 17:10:23,375 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803171016.html
2018-08-03 17:10:23,376 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:10:24,022 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:20:27,171 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:20:27,171 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:20:27,387 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:20:27,610 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 17:20:27,818 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:20:27,818 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:20:27,933 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:20:27,933 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:20:28,056 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:20:28,057 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:20:28,057 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 17:20:28,057 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:20:28,092 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:20:28,109 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:20:28,110 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:20:28,110 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:20:28,110 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:20:28,110 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 17:20:28,182 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:20:28,257 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:20:28,276 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:20:28,290 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:20:28,290 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172027', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:20:28,453 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:20:28,453 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:20:28,453 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:20:28,454 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:20:28,454 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172028', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:20:28,565 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:20:28,567 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:20:28,570 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:28,574 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:28,576 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:28,576 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:20:28,576 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:20:28,577 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:20:28,691 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:20:28,692 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:20:28,693 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:19:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=jm18o38ooto1flreodgipmolc4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:20:28,693 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:20:28,694 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:20:28,694 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:20:28,696 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:20:28,696 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:20:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803172028 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:20:28,837 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:20:28,838 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:20:28,839 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:20:28", case_exec_history_id="20180803172028" WHERE executed_history_id = 20180803172027 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:20:29,032 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:20:29,047 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:20:29,047 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172027', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:20:29,172 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:20:29,172 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:20:29,173 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:20:29,174 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:20:29,174 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172029', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:20:29,290 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:20:29,290 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:20:29,291 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:29,291 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:29,292 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:20:29,294 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:20:29,294 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:20:29,294 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:20:29,369 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:20:29,370 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:20:29,372 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:19:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:20:29,372 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:20:29,372 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:20:29,372 unittesttestcase.py[line: 387] INFO: 使用键值提取
2018-08-03 17:20:29,373 unittesttestcase.py[line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 17:20:29,373 unittesttestcase.py[line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:20:29,373 unittesttestcase.py[line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:20:29,373 unittesttestcase.py[line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:20:29,374 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:20:29,375 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:20:29",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803172029 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:20:29,490 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:20:29,490 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:20:29,491 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:20:29,491 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172029', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:20:29,601 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:20:29,601 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:20:29,602 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:20:29" WHERE executed_history_id = 20180803172029 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:20:29,716 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:20:29,716 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:20:29", case_exec_history_id="20180803172029" WHERE executed_history_id = 20180803172027 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:20:29,857 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:20:29,872 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:20:29,872 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803172027', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:20:29,987 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:20:29,987 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:20:29,988 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:20:29,988 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:20:29", case_exec_history_id="20180803172029" WHERE executed_history_id = 20180803172027 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:20:30,102 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:20:30,102 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:20:30,103 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:20:30,105 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803172027',)
2018-08-03 17:20:30,218 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:20:30,218 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803172027')
2018-08-03 17:20:30,338 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:20:30,339 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803172027')
2018-08-03 17:20:30,444 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:20:30,444 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803172027')
2018-08-03 17:20:30,562 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:20:30,562 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803172027')
2018-08-03 17:20:30,668 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:20:30,669 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803172027',)
2018-08-03 17:20:30,775 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:20:30,776 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803172027')
2018-08-03 17:20:30,880 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:20:30,881 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:20:30,882 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803172027',)
2018-08-03 17:20:30,985 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:20:30,986 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803172027')
2018-08-03 17:20:31,100 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:20:31,100 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803172028')
2018-08-03 17:20:31,209 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:20:31,210 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803172029')
2018-08-03 17:20:31,319 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:20:31,319 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803172029')
2018-08-03 17:20:31,426 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:20:31,427 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803172027.html
2018-08-03 17:20:31,427 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 17:20:31,430 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 17:20:32,803 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803172027.html
2018-08-03 17:20:32,804 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:20:33,586 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:37:27,267 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:37:27,267 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:37:27,492 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:37:27,715 global_var.py[line: 33] INFO: 正在获取testlink
2018-08-03 17:37:27,918 main.py[line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:37:27,918 mydb.py[line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:37:28,030 main.py[line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:37:28,030 mydb.py[line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:37:28,144 main.py[line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:37:28,145 main.py[line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:37:28,146 main.py[line: 172] INFO: 按套件运行测试
2018-08-03 17:37:28,146 main.py[line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:37:28,182 main.py[line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:37:28,199 global_function.py[line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:37:28,199 global_function.py[line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:37:28,199 global_function.py[line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:37:28,200 testsuite.py[line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:37:28,200 testsuite.py[line: 27] INFO: 正在获取子套件……
2018-08-03 17:37:28,270 testsuite.py[line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:37:28,342 testsuite.py[line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:37:28,360 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:37:28,374 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:37:28,374 mydb.py[line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173727', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:37:28,487 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:37:28,488 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:37:28,489 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:37:28,489 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:37:28,489 mydb.py[line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173728', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:37:28,600 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:37:28,600 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:37:28,601 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:28,602 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:28,602 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:28,602 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:37:28,602 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:37:28,603 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:37:28,690 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:37:28,691 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:37:28,692 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:36:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=f2lpkiavf7f7kos6e065hilu15; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:37:28,692 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:37:28,692 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:37:28,692 unittesttestcase.py[line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:37:28,693 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:37:28,694 mydb.py[line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:37:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803173728 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:37:28,803 testcase.py[line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:37:28,803 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:37:28,804 mydb.py[line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:37:28", case_exec_history_id="20180803173728" WHERE executed_history_id = 20180803173727 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:37:28,967 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:37:28,982 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:37:28,982 mydb.py[line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173727', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:37:29,095 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:37:29,096 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:37:29,097 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:37:29,097 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:37:29,097 mydb.py[line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173729', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:37:29,219 testcase.py[line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:37:29,220 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:37:29,221 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:29,221 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:29,221 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:37:29,221 InterfaceUnittestTestCase.py[line: 37] INFO: 正在发起GET请求...
2018-08-03 17:37:29,221 httpprotocol.py[line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:37:29,222 httpprotocol.py[line: 77] INFO: 请求头为：{}
2018-08-03 17:37:29,297 InterfaceUnittestTestCase.py[line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:37:29,297 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:37:29,298 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:36:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:37:29,298 InterfaceUnittestTestCase.py[line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:37:29,298 unittesttestcase.py[line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:37:29,298 unittesttestcase.py[line: 387] INFO: 使用键值提取
2018-08-03 17:37:29,299 unittesttestcase.py[line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 17:37:29,299 unittesttestcase.py[line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:37:29,299 unittesttestcase.py[line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:37:29,299 unittesttestcase.py[line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:37:29,300 testcase.py[line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:37:29,300 mydb.py[line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:37:29",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803173729 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:37:29,415 testcase.py[line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:37:29,415 testcase.py[line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:37:29,417 testcase.py[line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:37:29,417 mydb.py[line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173729', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:37:29,530 testcase.py[line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:37:29,531 testcase.py[line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:37:29,532 mydb.py[line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:37:29" WHERE executed_history_id = 20180803173729 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:37:29,642 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:37:29,643 mydb.py[line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:37:29", case_exec_history_id="20180803173729" WHERE executed_history_id = 20180803173727 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:37:29,774 testsuite.py[line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:37:29,789 testsuite.py[line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:37:29,789 mydb.py[line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173727', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:37:29,899 testsuite.py[line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:37:29,900 testcase.py[line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:37:29,902 testsuite.py[line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:37:29,902 mydb.py[line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:37:29", case_exec_history_id="20180803173729" WHERE executed_history_id = 20180803173727 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:37:30,015 testsuite.py[line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:37:30,015 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:37:30,017 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:37:30,017 mydb.py[line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803173727',)
2018-08-03 17:37:30,133 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:37:30,133 mydb.py[line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803173727')
2018-08-03 17:37:30,243 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:37:30,243 mydb.py[line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803173727')
2018-08-03 17:37:30,351 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:37:30,351 mydb.py[line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803173727')
2018-08-03 17:37:30,454 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:37:30,454 mydb.py[line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803173727')
2018-08-03 17:37:30,558 htmlreporter.py[line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:37:30,558 mydb.py[line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803173727',)
2018-08-03 17:37:30,703 htmlreporter.py[line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:37:30,703 mydb.py[line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803173727')
2018-08-03 17:37:30,813 htmlreporter.py[line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:37:30,814 htmlreporter.py[line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:37:30,815 mydb.py[line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803173727',)
2018-08-03 17:37:30,930 htmlreporter.py[line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:37:30,930 mydb.py[line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803173727')
2018-08-03 17:37:31,067 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:37:31,067 mydb.py[line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803173728')
2018-08-03 17:37:31,181 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:37:31,181 mydb.py[line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803173729')
2018-08-03 17:37:31,287 htmlreporter.py[line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:37:31,287 mydb.py[line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803173729')
2018-08-03 17:37:31,399 htmlreporter.py[line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:37:31,400 htmlreporter.py[line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803173727.html
2018-08-03 17:37:31,401 htmlreporter.py[line: 215] INFO: 正在生成测试报告
2018-08-03 17:37:31,403 main.py[line: 234] INFO: 生成测试报告成功
2018-08-03 17:37:32,642 main.py[line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803173727.html
2018-08-03 17:37:32,642 main.py[line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:37:33,220 main.py[line: 248] INFO: 发送邮件成功
2018-08-03 17:38:36,977 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:38:36,977 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:38:37,194 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:38:37,405 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-03 17:38:37,602 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:38:37,603 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:38:37,717 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:38:37,717 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:38:37,831 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:38:37,832 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:38:37,832 main.py [line: 172] INFO: 按套件运行测试
2018-08-03 17:38:37,833 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:38:37,865 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:38:37,880 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:38:37,880 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:38:37,881 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:38:37,881 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:38:37,881 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-03 17:38:37,958 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:38:38,030 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:38:38,048 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:38:38,063 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:38:38,064 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173837', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:38:38,211 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:38:38,212 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:38:38,213 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:38:38,213 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:38:38,213 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173838', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:38:38,323 testcase.py [line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:38:38,324 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:38:38,326 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,326 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,326 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,327 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 17:38:38,327 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:38:38,327 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 17:38:38,404 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:38:38,404 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:38:38,405 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:38:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=fbdl8msg5jktelobce64l9gpg6; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:38:38,406 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:38:38,406 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:38:38,406 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:38:38,406 testcase.py [line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:38:38,406 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:38:38",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803173838 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:38:38,515 testcase.py [line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:38:38,516 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:38:38,517 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:38:38", case_exec_history_id="20180803173838" WHERE executed_history_id = 20180803173837 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:38:38,660 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:38:38,677 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:38:38,677 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173837', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:38:38,794 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:38:38,794 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:38:38,796 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:38:38,796 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:38:38,796 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173838', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:38:38,914 testcase.py [line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:38:38,915 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:38:38,916 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,916 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,917 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:38:38,917 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 17:38:38,917 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:38:38,918 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 17:38:38,994 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:38:38,995 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:38:38,996 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:38:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:38:38,997 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:38:38,997 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:38:38,998 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-03 17:38:38,998 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 17:38:38,998 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:38:38,998 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:38:38,999 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:38:39,000 testcase.py [line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:38:39,000 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:38:38",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803173838 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:38:39,112 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:38:39,113 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:38:39,114 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:38:39,114 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173838', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:38:39,223 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:38:39,224 testcase.py [line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:38:39,225 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:38:39" WHERE executed_history_id = 20180803173838 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:38:39,336 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:38:39,337 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:38:38", case_exec_history_id="20180803173838" WHERE executed_history_id = 20180803173837 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:38:39,465 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:38:39,479 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:38:39,480 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803173837', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:38:39,610 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:38:39,610 testcase.py [line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:38:39,611 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:38:39,612 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:38:39", case_exec_history_id="20180803173839" WHERE executed_history_id = 20180803173837 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:38:39,755 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:38:39,756 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:38:39,758 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:38:39,758 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803173837',)
2018-08-03 17:38:39,870 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:38:39,870 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803173837')
2018-08-03 17:38:39,986 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:38:39,986 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803173837')
2018-08-03 17:38:40,089 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:38:40,089 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803173837')
2018-08-03 17:38:40,198 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:38:40,198 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803173837')
2018-08-03 17:38:40,304 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:38:40,305 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803173837',)
2018-08-03 17:38:40,408 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:38:40,409 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803173837')
2018-08-03 17:38:40,539 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:38:40,539 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:38:40,541 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803173837',)
2018-08-03 17:38:40,667 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:38:40,668 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803173837')
2018-08-03 17:38:40,777 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:38:40,778 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803173838')
2018-08-03 17:38:40,893 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:38:40,893 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803173838')
2018-08-03 17:38:40,998 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:38:40,999 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803173839')
2018-08-03 17:38:41,111 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:38:41,111 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803173837.html
2018-08-03 17:38:41,112 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-03 17:38:41,116 main.py [line: 234] INFO: 生成测试报告成功
2018-08-03 17:38:42,118 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803173837.html
2018-08-03 17:38:42,118 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:38:42,742 main.py [line: 248] INFO: 发送邮件成功
2018-08-03 17:41:20,163 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-03 17:41:20,163 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 17:41:20,396 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 17:41:20,620 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-03 17:41:20,823 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 17:41:20,823 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 17:41:20,969 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 17:41:20,969 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 17:41:21,097 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-03 17:41:21,097 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 17:41:21,098 main.py [line: 172] INFO: 按套件运行测试
2018-08-03 17:41:21,099 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 17:41:21,150 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 17:41:21,175 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 17:41:21,175 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 17:41:21,176 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-03 17:41:21,176 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 17:41:21,177 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-03 17:41:21,255 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 17:41:21,326 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 17:41:21,344 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 17:41:21,358 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:41:21,358 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174120', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 17:41:21,476 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 17:41:21,477 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:41:21,479 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 17:41:21,480 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:41:21,480 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174121', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:41:21,598 testcase.py [line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:41:21,598 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:41:21,600 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:21,600 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:21,600 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:21,600 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 17:41:21,601 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:41:21,601 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 17:41:21,685 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:41:21,686 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:41:21,687 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:40:45 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=653dgv0n73tjo5i4ubvhpi40f4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:41:21,687 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:41:21,688 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:41:21,688 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 17:41:21,688 testcase.py [line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:41:21,688 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:41:21",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803174121 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:41:21,800 testcase.py [line: 231] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 17:41:21,800 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:41:21,801 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:41:21", case_exec_history_id="20180803174121" WHERE executed_history_id = 20180803174120 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:41:21,936 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 17:41:21,952 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:41:21,953 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174120', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 17:41:22,213 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 17:41:22,214 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 17:41:22,216 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:41:22,217 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:41:22,217 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174122', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:41:22,364 testcase.py [line: 139] INFO: 开始执行步骤操作[第1步]
2018-08-03 17:41:22,364 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 17:41:22,365 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:22,365 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:22,365 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 17:41:22,365 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 17:41:22,366 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 17:41:22,366 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 17:41:22,446 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 17:41:22,446 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 17:41:22,447 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 09:40:46 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 17:41:22,447 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 17:41:22,447 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 17:41:22,448 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-03 17:41:22,448 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 17:41:22,448 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:41:22,448 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:41:22,448 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 17:41:22,449 testcase.py [line: 228] INFO: 正在更新步骤执行结果
2018-08-03 17:41:22,449 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 17:41:22",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803174122 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 17:41:22,567 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 17:41:22,567 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 17:41:22,568 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 17:41:22,568 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174122', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 17:41:22,678 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 17:41:22,679 testcase.py [line: 134] INFO: 正在更新步骤执行结果
2018-08-03 17:41:22,679 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 17:41:22" WHERE executed_history_id = 20180803174122 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 17:41:22,792 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:41:22,792 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 17:41:22", case_exec_history_id="20180803174122" WHERE executed_history_id = 20180803174120 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:41:22,928 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 17:41:22,942 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 17:41:22,943 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803174120', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 17:41:23,056 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 17:41:23,056 testcase.py [line: 231] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 17:41:23,057 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 17:41:23,057 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 17:41:23", case_exec_history_id="20180803174123" WHERE executed_history_id = 20180803174120 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 17:41:23,169 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 17:41:23,169 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 17:41:23,171 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-03 17:41:23,171 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803174120',)
2018-08-03 17:41:23,273 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 17:41:23,274 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803174120')
2018-08-03 17:41:23,391 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 17:41:23,392 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803174120')
2018-08-03 17:41:23,494 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 17:41:23,494 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803174120')
2018-08-03 17:41:23,603 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-03 17:41:23,604 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803174120')
2018-08-03 17:41:23,707 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-03 17:41:23,708 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803174120',)
2018-08-03 17:41:23,809 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 17:41:23,810 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803174120')
2018-08-03 17:41:23,921 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 17:41:23,922 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-03 17:41:23,922 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803174120',)
2018-08-03 17:41:24,033 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 17:41:24,034 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803174120')
2018-08-03 17:41:24,142 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 17:41:24,142 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803174121')
2018-08-03 17:41:24,251 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 17:41:24,252 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803174122')
2018-08-03 17:41:24,360 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 17:41:24,361 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803174123')
2018-08-03 17:41:24,473 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 17:41:24,474 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803174120.html
2018-08-03 17:41:24,474 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-03 17:41:24,477 main.py [line: 234] INFO: 生成测试报告成功
2018-08-03 17:41:25,872 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803174120.html
2018-08-03 17:41:25,872 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 17:41:26,665 main.py [line: 248] INFO: 发送邮件成功
2018-08-03 18:25:17,719 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-03 18:25:17,720 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 18:25:17,942 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 18:25:18,156 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-03 18:25:18,362 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 18:25:18,362 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 18:25:18,481 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 18:25:18,481 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 18:25:18,595 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-03 18:25:18,596 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 18:25:18,596 main.py [line: 172] INFO: 按套件运行测试
2018-08-03 18:25:18,597 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 18:25:18,631 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 18:25:18,646 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 18:25:18,646 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 18:25:18,646 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-03 18:25:18,647 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 18:25:18,647 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-03 18:25:18,727 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 18:25:18,800 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 18:25:18,830 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 18:25:18,853 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:25:18,853 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182518', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 18:25:19,035 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 18:25:19,036 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:25:19,036 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 18:25:19,036 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:25:19,036 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182519', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:25:19,173 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:25:19,175 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:25:19,182 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,182 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,182 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,183 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:25:19,185 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:25:19,190 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:25:19,334 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:25:19,335 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:25:19,336 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:24:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=75fdelh30o0ldvgohs11por775; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:25:19,337 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:25:19,341 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:25:19,342 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 18:25:19,344 testcase.py [line: 229] INFO: 正在更新步骤执行结果
2018-08-03 18:25:19,344 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:25:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803182519 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:25:19,456 testcase.py [line: 232] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 18:25:19,456 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:25:19,458 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:25:19", case_exec_history_id="20180803182519" WHERE executed_history_id = 20180803182518 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:25:19,601 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 18:25:19,627 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:25:19,627 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182518', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 18:25:19,745 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 18:25:19,745 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:25:19,748 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:25:19,755 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:25:19,755 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182519', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:25:19,870 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:25:19,872 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:25:19,874 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,879 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,879 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:25:19,880 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:25:19,882 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:25:19,883 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:25:19,965 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:25:19,966 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:25:19,968 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:24:44 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:25:19,969 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:25:19,974 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:25:19,975 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-03 18:25:19,975 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 18:25:19,976 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:25:19,976 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:25:19,977 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:25:19,988 testcase.py [line: 229] INFO: 正在更新步骤执行结果
2018-08-03 18:25:19,988 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:25:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803182519 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:25:20,105 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 18:25:20,106 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:25:20,120 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:25:20,134 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182519', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:25:20,250 testcase.py [line: 126] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 18:25:20,252 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-03 18:25:20,253 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 18:25:20" WHERE executed_history_id = 20180803182519 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 18:25:20,371 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:25:20,371 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 18:25:19", case_exec_history_id="20180803182519" WHERE executed_history_id = 20180803182518 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:25:20,510 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 18:25:20,531 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:25:20,531 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182518', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 18:25:20,640 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 18:25:20,640 testcase.py [line: 232] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 18:25:20,642 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:25:20,647 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:25:20", case_exec_history_id="20180803182520" WHERE executed_history_id = 20180803182518 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:25:20,757 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 18:25:20,757 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 18:25:20,759 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-03 18:25:20,759 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803182518',)
2018-08-03 18:25:20,864 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 18:25:20,865 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803182518')
2018-08-03 18:25:20,973 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 18:25:20,973 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803182518')
2018-08-03 18:25:21,087 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 18:25:21,087 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803182518')
2018-08-03 18:25:21,199 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-03 18:25:21,199 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803182518')
2018-08-03 18:25:21,307 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-03 18:25:21,307 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803182518',)
2018-08-03 18:25:21,415 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 18:25:21,415 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803182518')
2018-08-03 18:25:21,526 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 18:25:21,527 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-03 18:25:21,528 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803182518',)
2018-08-03 18:25:21,639 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 18:25:21,639 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803182518')
2018-08-03 18:25:21,748 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 18:25:21,748 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803182519')
2018-08-03 18:25:21,858 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 18:25:21,858 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803182519')
2018-08-03 18:25:21,966 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 18:25:21,966 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803182520')
2018-08-03 18:25:22,082 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 18:25:22,082 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803182518.html
2018-08-03 18:25:22,084 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-03 18:25:22,087 main.py [line: 234] INFO: 生成测试报告成功
2018-08-03 18:25:23,334 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803182518.html
2018-08-03 18:25:23,335 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 18:25:23,961 main.py [line: 248] INFO: 发送邮件成功
2018-08-03 18:26:45,845 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-03 18:26:45,845 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 18:26:46,085 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 18:26:46,297 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-03 18:26:46,509 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 18:26:46,509 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 18:26:46,621 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 18:26:46,621 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 18:26:46,737 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-03 18:26:46,739 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 18:26:46,740 main.py [line: 172] INFO: 按套件运行测试
2018-08-03 18:26:46,741 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 18:26:46,780 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 18:26:46,796 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 18:26:46,798 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 18:26:46,798 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-03 18:26:46,798 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 18:26:46,798 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-03 18:26:46,869 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 18:26:46,955 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 18:26:46,973 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 18:26:46,987 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:26:46,987 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182646', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 18:26:47,104 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 18:26:47,104 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:26:47,107 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 18:26:47,116 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:26:47,117 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182647', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:26:47,243 testcase.py [line: 145] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:26:47,243 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:26:47,244 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:47,245 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:47,248 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:47,253 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:26:47,253 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:26:47,253 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:26:47,332 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:26:47,333 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:26:47,334 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:26:11 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=rhucdg5cdifmc65ao040ka5f35; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:26:47,335 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:26:47,340 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:26:47,340 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 18:26:47,342 testcase.py [line: 234] INFO: 正在更新步骤执行结果
2018-08-03 18:26:47,342 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:26:47",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803182647 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:26:47,469 testcase.py [line: 237] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 18:26:47,469 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:26:47,471 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:26:47", case_exec_history_id="20180803182647" WHERE executed_history_id = 20180803182646 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:26:47,623 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 18:26:47,658 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:26:47,659 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182646', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 18:26:47,787 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 18:26:47,787 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:26:47,789 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:26:47,797 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:26:47,798 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182647', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:26:48,000 testcase.py [line: 145] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:26:48,001 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:26:48,001 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:48,001 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:48,002 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:26:48,002 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:26:48,002 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:26:48,002 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:26:48,081 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:26:48,081 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:26:48,083 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:26:12 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:26:48,084 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:26:48,089 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:26:48,091 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-03 18:26:48,092 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 18:26:48,094 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:26:48,099 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:26:48,099 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:26:48,110 testcase.py [line: 234] INFO: 正在更新步骤执行结果
2018-08-03 18:26:48,111 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:26:48",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803182647 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:26:48,223 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 18:26:48,224 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:26:48,226 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:26:48,231 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182647', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:26:48,341 testcase.py [line: 131] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 18:26:48,342 testcase.py [line: 140] INFO: 正在更新步骤执行结果
2018-08-03 18:26:48,343 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 18:26:48" WHERE executed_history_id = 20180803182647 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 18:26:48,458 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:26:48,459 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 18:26:47", case_exec_history_id="20180803182647" WHERE executed_history_id = 20180803182646 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:26:48,597 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 18:26:48,619 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:26:48,619 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803182646', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 18:26:48,731 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 18:26:48,732 testcase.py [line: 237] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 18:26:48,733 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:26:48,734 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:26:48", case_exec_history_id="20180803182648" WHERE executed_history_id = 20180803182646 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:26:48,850 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 18:26:48,850 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 18:26:48,853 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-03 18:26:48,853 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803182646',)
2018-08-03 18:26:48,965 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 18:26:48,967 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803182646')
2018-08-03 18:26:49,076 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 18:26:49,076 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803182646')
2018-08-03 18:26:49,182 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 18:26:49,184 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803182646')
2018-08-03 18:26:49,291 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-03 18:26:49,291 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803182646')
2018-08-03 18:26:49,398 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-03 18:26:49,398 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803182646',)
2018-08-03 18:26:49,504 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 18:26:49,505 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803182646')
2018-08-03 18:26:49,616 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 18:26:49,616 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-03 18:26:49,618 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803182646',)
2018-08-03 18:26:49,732 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 18:26:49,732 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803182646')
2018-08-03 18:26:49,838 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 18:26:49,838 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803182647')
2018-08-03 18:26:49,945 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 18:26:49,946 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803182647')
2018-08-03 18:26:50,059 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 18:26:50,059 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803182648')
2018-08-03 18:26:50,170 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 18:26:50,170 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803182646.html
2018-08-03 18:26:50,172 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-03 18:26:50,176 main.py [line: 234] INFO: 生成测试报告成功
2018-08-03 18:26:51,524 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803182646.html
2018-08-03 18:26:51,524 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 18:26:52,299 main.py [line: 248] INFO: 发送邮件成功
2018-08-03 18:36:54,291 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-03 18:36:54,291 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-03 18:36:54,515 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-03 18:36:54,729 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-03 18:36:54,939 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-03 18:36:54,940 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-03 18:36:55,091 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-03 18:36:55,091 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-03 18:36:55,200 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-03 18:36:55,201 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-03 18:36:55,201 main.py [line: 172] INFO: 按套件运行测试
2018-08-03 18:36:55,201 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-03 18:36:55,260 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-03 18:36:55,286 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-03 18:36:55,286 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-03 18:36:55,286 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-03 18:36:55,287 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-03 18:36:55,287 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-03 18:36:55,418 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-03 18:36:55,550 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-03 18:36:55,580 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-03 18:36:55,602 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:36:55,602 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183654', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-03 18:36:55,738 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-03 18:36:55,738 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:36:55,739 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-03 18:36:55,739 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:36:55,739 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183655', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:36:55,862 testcase.py [line: 146] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:36:55,863 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:36:55,863 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:55,864 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:55,864 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:55,864 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:36:55,865 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:36:55,871 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:36:55,984 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:36:55,985 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:36:55,988 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:36:20 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=r243neco6clmmostv6v8fb2724; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:36:55,988 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:36:55,994 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:36:55,998 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-03 18:36:56,006 testcase.py [line: 235] INFO: 正在更新步骤执行结果
2018-08-03 18:36:56,006 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:36:55",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180803183655 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:36:56,118 testcase.py [line: 238] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-03 18:36:56,119 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:36:56,121 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:36:55", case_exec_history_id="20180803183655" WHERE executed_history_id = 20180803183654 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:36:56,259 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 02:08:46', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-03 18:36:56,280 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:36:56,280 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183654', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-03 18:36:56,389 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-03 18:36:56,390 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-03 18:36:56,392 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:36:56,397 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:36:56,398 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183656', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:36:56,518 testcase.py [line: 146] INFO: 开始执行步骤操作[第1步]
2018-08-03 18:36:56,518 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-03 18:36:56,518 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:56,519 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:56,519 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-03 18:36:56,520 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-03 18:36:56,521 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-03 18:36:56,527 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-03 18:36:56,607 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-03 18:36:56,608 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-03 18:36:56,609 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Fri, 03 Aug 2018 10:36:20 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-03 18:36:56,610 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE="}
2018-08-03 18:36:56,615 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-03 18:36:56,616 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-03 18:36:56,616 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-03 18:36:56,617 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:36:56,617 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:36:56,618 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-MWYwMTYyZTgyOGJhNWUyOWY4MTcyZWU1Yjk2OTljZmE=
2018-08-03 18:36:56,626 testcase.py [line: 235] INFO: 正在更新步骤执行结果
2018-08-03 18:36:56,627 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-03 18:36:56",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180803183656 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-03 18:36:56,737 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-03 18:36:56,737 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-03 18:36:56,740 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-03 18:36:56,746 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183656', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-03 18:36:56,857 testcase.py [line: 132] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-03 18:36:56,862 testcase.py [line: 141] INFO: 正在更新步骤执行结果
2018-08-03 18:36:56,863 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-03 18:36:56" WHERE executed_history_id = 20180803183656 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-03 18:36:56,973 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:36:56,973 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-03 18:36:56", case_exec_history_id="20180803183656" WHERE executed_history_id = 20180803183654 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:36:57,111 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-03 18:36:57,126 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-03 18:36:57,126 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180803183654', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-03 18:36:57,269 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-03 18:36:57,269 testcase.py [line: 238] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-03 18:36:57,271 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-03 18:36:57,276 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-03 18:36:57", case_exec_history_id="20180803183657" WHERE executed_history_id = 20180803183654 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-03 18:36:57,410 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-03 18:36:57,410 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-03 18:36:57,412 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-03 18:36:57,417 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180803183654',)
2018-08-03 18:36:57,527 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-03 18:36:57,528 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180803183654')
2018-08-03 18:36:57,635 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-03 18:36:57,636 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180803183654')
2018-08-03 18:36:57,753 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-03 18:36:57,754 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180803183654')
2018-08-03 18:36:57,895 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-03 18:36:57,896 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180803183654')
2018-08-03 18:36:58,008 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-03 18:36:58,008 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803183654',)
2018-08-03 18:36:58,149 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-03 18:36:58,149 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803183654')
2018-08-03 18:36:58,288 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-03 18:36:58,288 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-03 18:36:58,290 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180803183654',)
2018-08-03 18:36:58,417 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-03 18:36:58,417 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180803183654')
2018-08-03 18:36:58,525 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-03 18:36:58,526 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180803183655')
2018-08-03 18:36:58,644 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-03 18:36:58,644 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180803183656')
2018-08-03 18:36:58,757 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-03 18:36:58,757 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180803183657')
2018-08-03 18:36:58,864 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-03 18:36:58,864 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180803183654.html
2018-08-03 18:36:58,866 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-03 18:36:58,869 main.py [line: 234] INFO: 生成测试报告成功
2018-08-03 18:37:00,119 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180803183654.html
2018-08-03 18:37:00,119 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-03 18:37:00,716 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 08:56:52,403 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 08:56:52,403 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 08:56:52,619 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 08:56:52,826 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 08:56:53,046 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 08:56:53,046 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 08:56:53,173 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 08:56:53,173 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 08:56:53,283 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 08:56:53,284 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 08:56:53,284 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 08:56:53,284 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 08:56:53,323 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 08:56:53,339 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 08:56:53,339 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 08:56:53,339 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 08:56:53,340 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 08:56:53,340 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 08:56:53,410 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 08:56:53,483 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 08:56:53,501 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 08:56:53,516 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 08:56:53,517 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085652', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 08:56:53,630 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 08:56:53,631 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 08:56:53,631 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 08:56:53,632 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 08:56:53,632 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085653', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 08:56:53,752 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 08:56:53,753 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 08:56:53,753 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:53,754 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:53,761 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:53,762 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 08:56:53,762 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 08:56:53,762 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-04 08:56:53,975 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 08:56:53,976 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 08:56:53,977 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 00:56:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=odudc0l5qtkrs2pp8lgeg9ur70; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 08:56:53,978 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 08:56:53,983 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 08:56:53,984 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 08:56:53,996 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 08:56:53,996 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 08:56:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804085653 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 08:56:54,106 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 08:56:54,106 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 08:56:54,107 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 08:56:53", case_exec_history_id="20180804085653" WHERE executed_history_id = 20180804085652 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 08:56:54,237 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 03:41:23', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 08:56:54,251 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 08:56:54,251 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085652', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 08:56:54,363 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 08:56:54,363 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 08:56:54,365 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 08:56:54,371 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 08:56:54,371 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085654', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 08:56:54,492 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 08:56:54,492 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 08:56:54,493 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:54,493 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:54,494 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 08:56:54,497 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 08:56:54,501 httpprotocol.py [line: 76] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 08:56:54,501 httpprotocol.py [line: 77] INFO: 请求头为：{}
2018-08-04 08:56:54,608 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 08:56:54,609 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 08:56:54,610 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 00:56:16 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 08:56:54,611 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 08:56:54,616 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 08:56:54,617 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 08:56:54,617 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 08:56:54,618 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 08:56:54,618 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 08:56:54,618 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 08:56:54,629 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 08:56:54,629 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 08:56:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804085654 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 08:56:54,741 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 08:56:54,741 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 08:56:54,744 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 08:56:54,749 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085654', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 08:56:54,906 testcase.py [line: 132] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 08:56:54,907 testcase.py [line: 142] INFO: 正在更新步骤执行结果
2018-08-04 08:56:54,912 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 08:56:54" WHERE executed_history_id = 20180804085654 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-04 08:56:55,021 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 08:56:55,022 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 08:56:54", case_exec_history_id="20180804085654" WHERE executed_history_id = 20180804085652 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 08:56:55,151 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 08:56:55,166 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 08:56:55,167 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804085652', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 08:56:55,278 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 08:56:55,279 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 08:56:55,280 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 08:56:55,280 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 08:56:55", case_exec_history_id="20180804085655" WHERE executed_history_id = 20180804085652 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 08:56:55,398 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 08:56:55,399 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 08:56:55,401 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 08:56:55,407 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804085652',)
2018-08-04 08:56:55,510 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 08:56:55,510 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804085652')
2018-08-04 08:56:55,614 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 08:56:55,614 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804085652')
2018-08-04 08:56:55,721 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 08:56:55,721 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804085652')
2018-08-04 08:56:55,825 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 08:56:55,825 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804085652')
2018-08-04 08:56:55,927 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 08:56:55,928 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804085652',)
2018-08-04 08:56:56,059 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 08:56:56,060 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804085652')
2018-08-04 08:56:56,171 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 08:56:56,172 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 08:56:56,174 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804085652',)
2018-08-04 08:56:56,284 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 08:56:56,284 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804085652')
2018-08-04 08:56:56,387 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 08:56:56,388 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804085653')
2018-08-04 08:56:56,498 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 08:56:56,499 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804085654')
2018-08-04 08:56:56,613 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 08:56:56,613 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804085655')
2018-08-04 08:56:56,718 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 08:56:56,719 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804085652.html
2018-08-04 08:56:56,720 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 08:56:56,727 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 08:56:58,018 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804085652.html
2018-08-04 08:56:58,018 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 08:56:58,763 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 09:12:33,483 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:12:33,483 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:12:33,714 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:12:33,914 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:12:34,125 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:12:34,126 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:12:34,236 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:12:34,236 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:12:34,361 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:12:34,362 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:12:34,363 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:12:34,363 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:12:34,403 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:12:34,426 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:12:34,427 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:12:34,427 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:12:34,427 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:12:34,427 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:12:34,527 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:12:34,612 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:12:34,635 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:12:34,651 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:12:34,651 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091233', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:12:34,778 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:12:34,779 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:12:34,779 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:12:34,779 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:12:34,780 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091234', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:12:35,011 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:12:35,011 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:12:35,012 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,012 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,013 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,013 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 09:12:35,015 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:/mapp/token/get_token
2018-08-04 09:12:35,020 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:12:35,223 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 09:12:35,223 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:12:35,225 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:11:56 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-04 09:12:35,226 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-04 09:12:35,231 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:12:35,251 testcase.py [line: 202] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-04 09:12:35,252 testcase.py [line: 212] INFO: 正在更新步骤执行结果
2018-08-04 09:12:35,252 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-04 09:12:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804091234 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划' AND runtime='0000-00-00 00:00:00'
2018-08-04 09:12:35,465 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:12:35,465 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-04 09:12:34", case_exec_history_id="20180804091234" WHERE executed_history_id = 20180804091233 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:12:35,681 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 03:41:23', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:12:35,706 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:12:35,706 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091233', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:12:35,835 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:12:35,836 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:12:35,838 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:12:35,845 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:12:35,848 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091235', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:12:35,974 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:12:35,976 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:12:35,976 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,981 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,982 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:12:35,982 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 09:12:35,982 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:/mapp/token/get_token
2018-08-04 09:12:35,983 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:12:36,054 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 09:12:36,054 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:12:36,055 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:11:57 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-04 09:12:36,056 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-04 09:12:36,061 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:12:36,072 testcase.py [line: 202] INFO: 步骤[1]执行失败,停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 09:12:36,073 testcase.py [line: 212] INFO: 正在更新步骤执行结果
2018-08-04 09:12:36,073 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-04 09:12:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804091235 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划' AND runtime='0000-00-00 00:00:00'
2018-08-04 09:12:36,186 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:12:36,186 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-04 09:12:35", case_exec_history_id="20180804091235" WHERE executed_history_id = 20180804091233 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:12:36,312 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:12:36,327 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:12:36,327 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091233', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:12:36,459 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:12:36,460 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:12:36,461 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:12:36,462 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:12:36", case_exec_history_id="20180804091236" WHERE executed_history_id = 20180804091233 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:12:36,575 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:12:36,575 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:12:36,578 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:12:36,583 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804091233',)
2018-08-04 09:12:36,685 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:12:36,686 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804091233')
2018-08-04 09:12:36,797 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:12:36,797 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804091233')
2018-08-04 09:12:36,900 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:12:36,903 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804091233')
2018-08-04 09:12:37,008 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:12:37,008 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804091233')
2018-08-04 09:12:37,111 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:12:37,112 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804091233',)
2018-08-04 09:12:37,217 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:12:37,218 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804091233')
2018-08-04 09:12:37,326 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:12:37,326 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:12:37,327 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804091233',)
2018-08-04 09:12:37,435 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:12:37,435 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804091233')
2018-08-04 09:12:37,539 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:12:37,539 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804091234')
2018-08-04 09:12:37,644 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:12:37,644 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804091235')
2018-08-04 09:12:37,748 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:12:37,748 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804091236')
2018-08-04 09:12:37,857 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:12:37,857 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804091233.html
2018-08-04 09:12:37,859 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:12:37,866 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:12:39,367 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804091233.html
2018-08-04 09:12:39,367 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:12:41,130 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 09:18:01,706 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:18:01,706 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:18:01,932 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:18:02,136 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:18:02,346 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:18:02,346 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:18:02,451 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:18:02,451 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:18:02,556 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:18:02,557 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:18:02,558 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:18:02,558 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:18:02,591 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:18:02,607 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:18:02,607 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:18:02,607 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:18:02,607 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:18:02,607 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:18:02,686 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:18:02,765 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:18:02,783 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:18:02,797 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:18:02,797 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091802', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:18:02,931 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:18:02,931 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:18:02,932 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:18:02,932 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:18:02,932 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091802', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:18:03,049 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:18:03,050 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:18:03,050 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,050 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,052 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,059 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 09:18:03,059 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:18:03,059 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:18:03,161 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 09:18:03,162 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:18:03,165 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:17:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=vhrab5em404s544iuund7oi171; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:18:03,165 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:18:03,166 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:18:03,167 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 09:18:03,180 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:18:03,181 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:18:03",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804091802 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:18:03,287 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 09:18:03,287 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:18:03,289 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:18:02", case_exec_history_id="20180804091802" WHERE executed_history_id = 20180804091802 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:18:03,433 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 03:41:23', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:18:03,457 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:18:03,458 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091802', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:18:03,568 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:18:03,568 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:18:03,570 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:18:03,575 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:18:03,575 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091803', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:18:03,697 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:18:03,698 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:18:03,698 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,698 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,699 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:18:03,699 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 09:18:03,700 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:18:03,703 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:18:03,788 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 09:18:03,788 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:18:03,790 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:17:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:18:03,792 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:18:03,796 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:18:03,796 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:18:03,797 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:18:03,797 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:18:03,798 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:18:03,798 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:18:03,809 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:18:03,810 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:18:03",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804091803 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:18:03,927 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 09:18:03,928 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:18:03,932 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:18:03,937 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091803', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:18:04,047 testcase.py [line: 132] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 09:18:04,047 testcase.py [line: 142] INFO: 正在更新步骤执行结果
2018-08-04 09:18:04,053 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 09:18:04" WHERE executed_history_id = 20180804091803 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-04 09:18:04,165 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:18:04,165 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 09:18:03", case_exec_history_id="20180804091803" WHERE executed_history_id = 20180804091802 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:18:04,308 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:18:04,323 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:18:04,323 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804091802', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:18:04,433 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:18:04,434 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:18:04,435 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:18:04,436 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:18:04", case_exec_history_id="20180804091804" WHERE executed_history_id = 20180804091802 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:18:04,546 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:18:04,547 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:18:04,549 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:18:04,549 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804091802',)
2018-08-04 09:18:04,655 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:18:04,656 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804091802')
2018-08-04 09:18:04,756 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:18:04,756 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804091802')
2018-08-04 09:18:04,856 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:18:04,856 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804091802')
2018-08-04 09:18:04,958 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:18:04,959 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804091802')
2018-08-04 09:18:05,062 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:18:05,062 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804091802',)
2018-08-04 09:18:05,169 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:18:05,169 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804091802')
2018-08-04 09:18:05,281 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:18:05,282 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:18:05,283 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804091802',)
2018-08-04 09:18:05,393 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:18:05,394 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804091802')
2018-08-04 09:18:05,496 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:18:05,496 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804091802')
2018-08-04 09:18:05,601 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:18:05,602 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804091803')
2018-08-04 09:18:05,706 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:18:05,706 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804091804')
2018-08-04 09:18:05,810 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:18:05,810 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804091802.html
2018-08-04 09:18:05,812 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:18:05,815 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:18:07,069 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804091802.html
2018-08-04 09:18:07,069 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:18:07,702 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 09:47:46,010 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:47:46,010 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:47:46,223 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:47:46,434 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:47:46,637 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:47:46,637 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:47:46,748 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:47:46,748 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:47:46,872 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:47:46,873 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:47:46,874 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:47:46,874 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:47:46,905 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:47:46,920 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:47:46,921 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:47:46,921 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:47:46,921 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:47:46,921 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:47:46,994 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:47:47,069 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:47:47,088 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:47:47,110 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:47:47,110 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094746', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:47:47,215 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:47:47,215 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:47:47,216 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:47:47,216 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:47:47,216 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094747', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:47:47,335 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:47:47,335 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:47:47,336 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:47,337 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:47,341 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:47,346 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:47:47,346 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:47:47,346 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:47:47,455 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:47:47,456 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:47:47,458 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:47:08 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ihgbk8qlbejfc4blqm4m9bibb4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:47:47,458 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:47:47,465 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:47:47,466 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 09:47:47,476 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:47:47,476 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:47:47",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804094747 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:47:47,589 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 09:47:47,589 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:47:47,591 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:47:47", case_exec_history_id="20180804094747" WHERE executed_history_id = 20180804094746 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:47:47,735 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:46:16', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:47:47,756 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:47:47,756 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094746', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:47:47,869 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:47:47,870 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:47:47,872 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:47:47,875 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:47:47,880 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094747', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:47:48,000 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:47:48,002 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:47:48,009 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:48,009 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:48,010 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:47:48,010 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:47:48,012 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:47:48,014 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:47:48,092 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:47:48,092 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:47:48,094 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:47:09 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:47:48,095 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:47:48,101 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:47:48,101 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:47:48,102 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:47:48,102 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:47:48,102 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:47:48,103 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:47:48,113 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:47:48,113 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:47:48",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804094747 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:47:48,221 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 09:47:48,222 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:47:48,225 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:47:48,230 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094747', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:47:48,359 testcase.py [line: 132] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 153 (char 152),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 09:47:48,359 testcase.py [line: 142] INFO: 正在更新步骤执行结果
2018-08-04 09:47:48,360 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 153 (char 152)", protocol_method="未获取到", runtime="2018-08-04 09:47:48" WHERE executed_history_id = 20180804094747 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-04 09:47:48,467 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:47:48,467 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 09:47:47", case_exec_history_id="20180804094747" WHERE executed_history_id = 20180804094746 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:47:48,604 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:47:48,618 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:47:48,618 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804094746', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:47:48,734 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:47:48,734 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:47:48,735 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:47:48,741 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:47:48", case_exec_history_id="20180804094748" WHERE executed_history_id = 20180804094746 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:47:48,852 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:47:48,853 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:47:48,855 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:47:48,856 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804094746',)
2018-08-04 09:47:48,957 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:47:48,957 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804094746')
2018-08-04 09:47:49,059 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:47:49,059 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804094746')
2018-08-04 09:47:49,168 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:47:49,169 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804094746')
2018-08-04 09:47:49,272 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:47:49,273 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804094746')
2018-08-04 09:47:49,377 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:47:49,378 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804094746',)
2018-08-04 09:47:49,483 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:47:49,484 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804094746')
2018-08-04 09:47:49,598 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:47:49,600 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:47:49,605 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804094746',)
2018-08-04 09:47:49,734 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:47:49,734 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804094746')
2018-08-04 09:47:49,845 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:47:49,846 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804094747')
2018-08-04 09:47:49,951 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:47:49,952 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804094747')
2018-08-04 09:47:50,055 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:47:50,055 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804094748')
2018-08-04 09:47:50,165 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:47:50,166 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804094746.html
2018-08-04 09:47:50,168 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:47:50,177 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:47:51,429 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804094746.html
2018-08-04 09:47:51,430 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:47:52,666 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 09:50:02,322 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:50:02,322 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:50:02,532 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:50:02,740 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:50:02,943 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:50:02,943 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:50:03,048 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:50:03,048 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:50:03,156 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:50:03,157 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:50:03,157 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:50:03,157 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:50:03,189 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:50:03,204 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:50:03,204 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:50:03,204 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:50:03,204 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:50:03,205 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:50:03,275 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:50:03,357 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:50:03,376 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:50:03,391 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:50:03,392 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095002', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:50:03,497 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:50:03,498 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:50:03,498 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:50:03,498 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:50:03,498 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095003', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:50:03,616 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:50:03,616 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:50:03,617 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:03,617 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:03,617 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:03,624 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:50:03,625 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:50:03,625 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:50:03,704 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:50:03,705 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:50:03,706 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:49:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=4kt4tj0orqep1i9ln5lujd1nv5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:50:03,707 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:50:03,712 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:50:03,712 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 09:50:03,722 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:50:03,723 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:50:03",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804095003 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:03,837 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 09:50:03,837 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:50:03,839 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:50:03", case_exec_history_id="20180804095003" WHERE executed_history_id = 20180804095002 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:03,966 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:48:32', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1270', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '3', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:50:03,982 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:50:03,982 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095002', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:50:04,088 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:50:04,088 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:50:04,090 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:50:04,095 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:50:04,096 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095004', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:50:04,222 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:50:04,225 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:50:04,231 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,232 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,233 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,235 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:50:04,242 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:50:04,242 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:50:04,319 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:50:04,319 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:50:04,321 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:49:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:50:04,325 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:50:04,326 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:50:04,328 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:50:04,328 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:50:04,328 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,328 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,330 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,337 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:50:04,338 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:50:04",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095004 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:04,447 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:50:04,447 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:50:04,452 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:50:04,457 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095004', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1270, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:50:04,584 testcase.py [line: 147] INFO: 开始执行步骤操作[第2步]
2018-08-04 09:50:04,584 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:50:04,592 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,593 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,593 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:50:04,596 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:50:04,596 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:50:04,596 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:50:04,671 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:50:04,671 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:50:04,672 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:49:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:50:04,673 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:50:04,678 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:50:04,678 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:50:04,679 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:50:04,679 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,679 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,680 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:50:04,691 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:50:04,693 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:50:04",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095004 AND testcase_id = 1083 AND step_id = 1270 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:04,813 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 09:50:04,813 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:50:04,816 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:50:04,823 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095004', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 3, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:50:04,979 testcase.py [line: 132] ERROR: 步骤[3]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 09:50:04,983 testcase.py [line: 142] INFO: 正在更新步骤执行结果
2018-08-04 09:50:04,989 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 09:50:04" WHERE executed_history_id = 20180804095004 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-04 09:50:05,097 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:50:05,097 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 09:50:04", case_exec_history_id="20180804095004" WHERE executed_history_id = 20180804095002 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:05,232 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:50:05,247 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:50:05,247 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095002', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:50:05,374 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:50:05,375 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:50:05,377 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:50:05,377 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:50:05", case_exec_history_id="20180804095005" WHERE executed_history_id = 20180804095002 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:50:05,488 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:50:05,488 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:50:05,495 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:50:05,495 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804095002',)
2018-08-04 09:50:05,602 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:50:05,603 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804095002')
2018-08-04 09:50:05,968 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:50:05,969 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804095002')
2018-08-04 09:50:06,073 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:50:06,073 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804095002')
2018-08-04 09:50:06,184 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:50:06,184 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804095002')
2018-08-04 09:50:06,292 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:50:06,293 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095002',)
2018-08-04 09:50:06,399 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:50:06,399 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095002')
2018-08-04 09:50:06,505 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:50:06,506 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:50:06,508 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095002',)
2018-08-04 09:50:06,613 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:50:06,613 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095002')
2018-08-04 09:50:06,726 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:50:06,726 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804095003')
2018-08-04 09:50:06,833 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:50:06,833 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804095004')
2018-08-04 09:50:06,941 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:50:06,941 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804095005')
2018-08-04 09:50:07,048 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:50:07,048 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804095002.html
2018-08-04 09:50:07,049 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:50:07,053 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:50:08,591 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804095002.html
2018-08-04 09:50:08,591 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:50:09,729 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 09:51:03,163 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:51:03,164 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:51:03,377 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:51:03,609 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:51:03,816 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:51:03,816 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:51:03,936 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:51:03,936 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:51:04,044 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:51:04,045 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:51:04,045 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:51:04,045 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:51:04,083 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:51:04,102 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:51:04,102 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:51:04,103 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:51:04,103 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:51:04,104 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:51:04,182 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:51:04,271 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:51:04,289 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:51:04,308 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:51:04,308 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095103', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:51:04,417 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:51:04,418 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:51:04,418 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:51:04,418 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:51:04,418 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095104', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:51:04,551 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:51:04,551 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:51:04,552 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:04,552 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:04,552 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:04,557 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:51:04,562 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:51:04,563 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:51:04,643 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:51:04,644 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:51:04,647 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:50:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=0rcfhvl2tk75nos247fpfr0rl0; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:51:04,648 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:51:04,653 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:51:04,654 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 09:51:04,662 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:51:04,662 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:51:04",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804095104 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:04,780 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 09:51:04,780 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:51:04,782 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:51:04", case_exec_history_id="20180804095104" WHERE executed_history_id = 20180804095103 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:04,912 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:49:20', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1270', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '3', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:51:04,928 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:51:04,928 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095103', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:51:05,052 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:51:05,052 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:51:05,054 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:51:05,061 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:51:05,062 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095105', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:51:05,184 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:51:05,185 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:51:05,185 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,185 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,188 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,195 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:51:05,195 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:51:05,197 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:51:05,273 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:51:05,273 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:51:05,274 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:50:26 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:51:05,275 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:51:05,280 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:51:05,280 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:51:05,281 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:51:05,281 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,281 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,281 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,296 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:51:05,301 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:51:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095105 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:05,421 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:51:05,421 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:51:05,423 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:51:05,429 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095105', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1270, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:51:05,555 testcase.py [line: 147] INFO: 开始执行步骤操作[第2步]
2018-08-04 09:51:05,555 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:51:05,556 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,556 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,556 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:51:05,562 InterfaceUnittestTestCase.py [line: 33] INFO: 正在发起POST请求...
2018-08-04 09:51:05,563 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:51:05,563 httpprotocol.py [line: 112] INFO: 参数为：b''
2018-08-04 09:51:05,563 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 09:51:05,643 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:51:05,643 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:51:05,644 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:50:26 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:51:05,645 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:51:05,650 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:51:05,650 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:51:05,651 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:51:05,652 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,652 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,656 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:51:05,662 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:51:05,662 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 09:51:05",step_action="{'方法': 'post', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095105 AND testcase_id = 1083 AND step_id = 1270 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:05,846 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 09:51:05,847 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:51:05,849 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:51:05,855 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095105', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 3, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:51:05,967 testcase.py [line: 132] ERROR: 步骤[3]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 09:51:05,969 testcase.py [line: 142] INFO: 正在更新步骤执行结果
2018-08-04 09:51:05,975 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 09:51:05" WHERE executed_history_id = 20180804095105 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'
2018-08-04 09:51:06,083 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:51:06,083 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 09:51:05", case_exec_history_id="20180804095105" WHERE executed_history_id = 20180804095103 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:06,214 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:51:06,229 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:51:06,229 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095103', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:51:06,343 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:51:06,343 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:51:06,346 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:51:06,349 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:51:06", case_exec_history_id="20180804095106" WHERE executed_history_id = 20180804095103 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:51:06,462 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:51:06,463 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:51:06,465 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:51:06,465 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804095103',)
2018-08-04 09:51:06,574 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:51:06,575 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804095103')
2018-08-04 09:51:06,684 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:51:06,684 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804095103')
2018-08-04 09:51:06,794 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:51:06,794 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804095103')
2018-08-04 09:51:06,906 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:51:06,909 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804095103')
2018-08-04 09:51:07,026 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:51:07,027 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095103',)
2018-08-04 09:51:07,141 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:51:07,142 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095103')
2018-08-04 09:51:07,257 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:51:07,258 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:51:07,261 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095103',)
2018-08-04 09:51:07,372 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:51:07,373 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095103')
2018-08-04 09:51:07,484 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:51:07,484 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804095104')
2018-08-04 09:51:07,597 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:51:07,598 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804095105')
2018-08-04 09:51:07,731 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:51:07,731 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804095106')
2018-08-04 09:51:07,838 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:51:07,838 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804095103.html
2018-08-04 09:51:07,840 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:51:07,845 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:51:09,100 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804095103.html
2018-08-04 09:51:09,101 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:51:09,726 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 09:53:11,206 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 09:53:11,206 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 09:53:11,413 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 09:53:11,628 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 09:53:11,828 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 09:53:11,828 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 09:53:11,936 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 09:53:11,936 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 09:53:12,038 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 09:53:12,039 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 09:53:12,040 main.py [line: 172] INFO: 按套件运行测试
2018-08-04 09:53:12,040 main.py [line: 174] INFO: 已获取配置的套件id列表：[1078]
2018-08-04 09:53:12,071 main.py [line: 190] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-04 09:53:12,087 global_function.py [line: 88] INFO: 正在读取测项目[project：接口自动化测试]的协议，host，端口配置...
2018-08-04 09:53:12,087 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 09:53:12,087 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 09:53:12,088 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-04 09:53:12,088 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-04 09:53:12,159 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-04 09:53:12,233 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-04 09:53:12,250 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 09:53:12,264 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:53:12,265 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095311', '1079', '获取token', '用户操作-获取token', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 09:53:12,371 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 09:53:12,372 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:53:12,372 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 09:53:12,372 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:53:12,372 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095312', '1079', '获取token', '无计划', '接口自动化测试', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:53:12,491 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:53:12,492 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:53:12,492 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:12,492 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:12,494 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:12,501 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:53:12,501 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:53:12,502 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:53:12,581 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:53:12,582 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:53:12,583 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:52:33 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=fcffgq9m70pr5vl1e1i1gbgia6; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:53:12,584 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:53:12,589 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:53:12,592 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 09:53:12,601 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:53:12,601 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:53:12",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804095312 AND testcase_id = 1079 AND step_id = 1089 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:12,736 testcase.py [line: 242] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 09:53:12,736 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:53:12,738 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:53:12", case_exec_history_id="20180804095312" WHERE executed_history_id = 20180804095311 and testcase_id = 1079 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:12,865 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 09:53:12,880 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:53:12,880 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095311', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 09:53:12,987 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 09:53:12,988 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 09:53:12,990 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:53:12,996 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:53:12,997 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095312', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:53:13,136 testcase.py [line: 147] INFO: 开始执行步骤操作[第1步]
2018-08-04 09:53:13,136 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:53:13,141 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:13,141 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:13,142 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:13,142 InterfaceUnittestTestCase.py [line: 38] INFO: 正在发起GET请求...
2018-08-04 09:53:13,142 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 09:53:13,143 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 09:53:13,220 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:53:13,221 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:53:13,222 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:52:34 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:53:13,223 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 09:53:13,228 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 09:53:13,228 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:53:13,230 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:53:13,231 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:53:13,234 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:53:13,239 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 09:53:13,241 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:53:13,242 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 09:53:13",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095312 AND testcase_id = 1083 AND step_id = 1090 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:13,356 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 09:53:13,356 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 09:53:13,359 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 09:53:13,364 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095312', '1083', '账号密码登录成功', '无计划', '接口自动化测试', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 09:53:13,489 testcase.py [line: 147] INFO: 开始执行步骤操作[第2步]
2018-08-04 09:53:13,490 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 09:53:13,490 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 09:53:13,490 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 09:53:13,491 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:13,498 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 09:53:13,498 InterfaceUnittestTestCase.py [line: 33] INFO: 正在发起POST请求...
2018-08-04 09:53:13,499 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 09:53:13,499 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 09:53:13,499 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 09:53:13,655 InterfaceUnittestTestCase.py [line: 47] INFO: 正在对服务器返回body进行解码
2018-08-04 09:53:13,656 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 09:53:13,661 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 01:52:34 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 09:53:13,665 InterfaceUnittestTestCase.py [line: 67] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 09:53:13,670 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 09:53:13,677 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 09:53:13,677 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 09:53:13,678 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 09:53:13,678 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 09:53:13,679 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 09:53:13,689 testcase.py [line: 239] INFO: 正在更新步骤执行结果
2018-08-04 09:53:13,689 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 09:53:13",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804095312 AND testcase_id = 1083 AND step_id = 1091 AND project='接口自动化测试' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:13,797 testcase.py [line: 242] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 09:53:13,797 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:53:13,799 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:53:12", case_exec_history_id="20180804095312" WHERE executed_history_id = 20180804095311 and testcase_id = 1083 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:13,925 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 09:53:13,940 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-04 09:53:13,940 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804095311', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', '接口自动化测试', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 09:53:14,053 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 09:53:14,053 testcase.py [line: 242] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 09:53:14,054 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-04 09:53:14,054 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 09:53:14", case_exec_history_id="20180804095314" WHERE executed_history_id = 20180804095311 and testcase_id = 1085 AND project='接口自动化测试' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-04 09:53:14,180 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-04 09:53:14,180 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 09:53:14,182 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 09:53:14,182 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804095311',)
2018-08-04 09:53:14,288 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 09:53:14,288 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804095311')
2018-08-04 09:53:14,394 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 09:53:14,395 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804095311')
2018-08-04 09:53:14,498 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 09:53:14,498 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804095311')
2018-08-04 09:53:14,600 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 09:53:14,601 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804095311')
2018-08-04 09:53:14,705 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 09:53:14,705 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095311',)
2018-08-04 09:53:14,804 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]的测试用例执行结果
2018-08-04 09:53:14,805 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095311')
2018-08-04 09:53:14,913 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：接口自动化测试, testplan：无计划]的测试用例运行结果到测试报告
2018-08-04 09:53:14,915 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 09:53:14,918 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804095311',)
2018-08-04 09:53:15,020 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：接口自动化测试, testplan：无计划]已运行的测试用例
2018-08-04 09:53:15,021 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('接口自动化测试', '无计划', '20180804095311')
2018-08-04 09:53:15,125 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 09:53:15,125 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1079, '20180804095312')
2018-08-04 09:53:15,230 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 09:53:15,231 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1083, '20180804095312')
2018-08-04 09:53:15,342 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 09:53:15,342 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('接口自动化测试', '无计划', 1085, '20180804095314')
2018-08-04 09:53:15,473 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 09:53:15,474 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804095311.html
2018-08-04 09:53:15,475 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 09:53:15,479 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 09:53:16,758 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804095311.html
2018-08-04 09:53:16,758 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 09:53:17,386 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 10:04:17,200 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:04:17,200 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:04:17,415 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:04:17,637 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:04:17,855 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:04:17,856 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:04:17,962 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:04:17,962 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:04:18,082 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:04:18,083 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:04:18,083 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 10:04:18,083 main.py [line: 114] INFO: 运行指定项目
2018-08-04 10:04:18,104 main.py [line: 120] ERROR: 测试项目[project：接口自动计划测试]获取失败，暂时无法执行：7011: Test Project (name:接口自动计划测试) does not exist.
getTestProjectByName({'devKey': '1b90957f2a38f5c1d7127d620d3804fc', 'testprojectname': '接口自动计划测试'})
2018-08-04 10:04:18,105 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:04:18,106 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 10:04:18,106 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804100417',)
2018-08-04 10:04:18,205 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 10:04:18,205 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804100417')
2018-08-04 10:04:18,322 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 10:04:18,322 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804100417')
2018-08-04 10:04:18,422 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 10:04:18,422 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804100417')
2018-08-04 10:04:18,532 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 10:04:18,532 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804100417')
2018-08-04 10:04:18,634 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 10:04:18,634 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804100417',)
2018-08-04 10:04:18,738 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 10:04:18,739 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804100417',)
2018-08-04 10:04:18,843 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 10:04:18,843 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804100417.html
2018-08-04 10:04:18,844 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 10:04:18,845 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 10:04:20,080 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804100417.html
2018-08-04 10:04:20,080 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 10:04:20,745 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 10:16:04,539 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:16:04,541 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:16:04,754 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:16:04,965 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:16:05,170 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:16:05,170 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:16:05,278 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:16:05,278 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:16:05,385 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:16:05,386 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:16:05,387 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 10:16:05,391 main.py [line: 114] INFO: 运行指定项目
2018-08-04 10:16:05,416 main.py [line: 120] ERROR: 测试项目[project：接口自动计划测试]获取失败，暂时无法执行：7011: Test Project (name:接口自动计划测试) does not exist.
getTestProjectByName({'devKey': '1b90957f2a38f5c1d7127d620d3804fc', 'testprojectname': '接口自动计划测试'})
2018-08-04 10:16:05,419 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:16:05,427 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 10:16:05,428 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804101604',)
2018-08-04 10:16:05,528 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 10:16:05,529 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804101604')
2018-08-04 10:16:05,630 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 10:16:05,631 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804101604')
2018-08-04 10:16:05,732 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 10:16:05,733 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804101604')
2018-08-04 10:16:05,832 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 10:16:05,833 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804101604')
2018-08-04 10:16:05,932 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 10:16:05,933 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804101604',)
2018-08-04 10:16:06,037 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 10:16:06,037 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804101604',)
2018-08-04 10:16:06,137 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 10:16:06,138 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804101604.html
2018-08-04 10:16:06,139 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 10:16:06,145 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 10:16:07,619 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804101604.html
2018-08-04 10:16:07,620 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 10:16:08,694 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 10:19:04,331 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:19:04,331 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:19:04,542 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:19:04,748 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:19:04,949 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:19:04,949 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:19:05,053 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:19:05,053 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:19:05,162 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:19:05,162 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:19:05,163 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 10:19:05,163 main.py [line: 114] INFO: 运行指定项目
2018-08-04 10:19:05,184 main.py [line: 120] ERROR: 测试项目[project：接口自动计划测试]获取失败，暂时无法执行：7011: Test Project (name:接口自动计划测试) does not exist.
getTestProjectByName({'devKey': '1b90957f2a38f5c1d7127d620d3804fc', 'testprojectname': '接口自动计划测试'})
2018-08-04 10:19:05,184 main.py [line: 209] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:19:05,185 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 10:19:05,186 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804101904',)
2018-08-04 10:19:05,286 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 10:19:05,286 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804101904')
2018-08-04 10:19:05,384 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 10:19:05,384 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804101904')
2018-08-04 10:19:05,488 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 10:19:05,488 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804101904')
2018-08-04 10:19:05,598 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 10:19:05,598 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804101904')
2018-08-04 10:19:05,709 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 10:19:05,710 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804101904',)
2018-08-04 10:19:05,808 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 10:19:05,808 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804101904',)
2018-08-04 10:19:05,909 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 10:19:05,910 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804101904.html
2018-08-04 10:19:05,910 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 10:19:05,913 main.py [line: 233] INFO: 生成测试报告成功
2018-08-04 10:19:07,136 main.py [line: 240] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804101904.html
2018-08-04 10:19:07,136 main.py [line: 243] INFO: 正在发送测试报告邮件...
2018-08-04 10:19:07,713 main.py [line: 247] INFO: 发送邮件成功
2018-08-04 10:32:41,519 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:32:41,519 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:32:41,737 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:32:41,945 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:32:42,157 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:32:42,157 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:32:42,269 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:32:42,269 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:32:42,375 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:32:42,375 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:32:42,376 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 10:32:42,376 main.py [line: 114] INFO: 运行指定项目
2018-08-04 10:32:42,409 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:32:42,409 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:32:42,409 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:32:42,409 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-04 10:32:42,409 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-04 10:32:42,423 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['【测试环境】用户操作']]
2018-08-04 10:32:42,438 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：【测试环境】用户操作]
2018-08-04 10:32:42,438 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=【测试环境】用户操作]的测试用例
2018-08-04 10:32:42,459 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=【测试环境】用户操作]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 10:32:42,477 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 10:32:42,492 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:32:42,493 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103241', 1079, '获取token', '用户操作-获取token', '【测试环境】用户操作', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 10:32:42,599 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 10:32:42,600 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:32:42,600 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 10:32:42,600 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:32:42,601 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103242', 1079, '获取token', '【测试环境】用户操作', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:32:42,711 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:32:42,711 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:32:42,713 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:42,714 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:42,719 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:42,719 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:32:42,719 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:32:42,720 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:32:42,852 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:32:42,853 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:32:42,854 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:32:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=587ikmkqkbu8j21qibtv51jh25; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:32:42,855 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:32:42,857 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:32:42,862 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 10:32:42,871 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:32:42,875 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:32:42",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804103242 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='【测试环境】用户操作'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:43,018 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 10:32:43,018 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:32:43,020 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:32:42", case_exec_history_id="20180804103242" WHERE executed_history_id = 20180804103241 AND testcase_id = 1079 AND project='APItest' AND testplan='【测试环境】用户操作' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:43,169 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 10:32:43,207 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:32:43,222 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:32:43,222 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103241', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '【测试环境】用户操作', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:32:43,344 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:32:43,345 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:32:43,346 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:32:43,352 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:32:43,353 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103243', 1083, '账号密码登录成功', '【测试环境】用户操作', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:32:43,474 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:32:43,475 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:32:43,478 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:43,478 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:43,479 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:43,480 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:32:43,485 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:32:43,485 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:32:43,557 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:32:43,557 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:32:43,559 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:32:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:32:43,561 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:32:43,566 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:32:43,566 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:32:43,567 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:32:43,575 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:32:43,576 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:32:43,577 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:32:43,580 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:32:43,581 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:32:43",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804103243 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='【测试环境】用户操作'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:43,696 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 10:32:43,697 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:32:43,700 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:32:43,705 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103243', 1083, '账号密码登录成功', '【测试环境】用户操作', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:32:43,818 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-04 10:32:43,818 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:32:43,820 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 10:32:43,824 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 10:32:43,824 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:43,825 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:32:43,826 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-04 10:32:43,826 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 10:32:43,826 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 10:32:43,827 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 10:32:43,957 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:32:43,957 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:32:43,959 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:32:05 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:32:43,960 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 10:32:43,965 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 10:32:43,965 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:32:43,966 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:32:43,966 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 10:32:43,966 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 10:32:43,966 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 10:32:43,977 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:32:43,978 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 10:32:43",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804103243 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='【测试环境】用户操作'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:44,085 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 10:32:44,086 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:32:44,087 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:32:43", case_exec_history_id="20180804103243" WHERE executed_history_id = 20180804103241 AND testcase_id = 1083 AND project='APItest' AND testplan='【测试环境】用户操作' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:44,214 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 10:32:44,249 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 10:32:44,263 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:32:44,264 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103241', 1085, '登录失败', '用户操作-登录-账号密码登录', '【测试环境】用户操作', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 10:32:44,380 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 10:32:44,380 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 10:32:44,382 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:32:44,383 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:32:44", case_exec_history_id="20180804103244" WHERE executed_history_id = 20180804103241 AND testcase_id = 1085 AND project='APItest' AND testplan='【测试环境】用户操作' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:32:44,506 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 10:32:44,524 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=【测试环境】用户操作]已执行完
2018-08-04 10:32:44,524 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:32:44,527 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 10:32:44,527 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804103241',)
2018-08-04 10:32:44,636 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 10:32:44,636 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804103241')
2018-08-04 10:32:44,745 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 10:32:44,745 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804103241')
2018-08-04 10:32:44,854 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 10:32:44,855 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804103241')
2018-08-04 10:32:44,957 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 10:32:44,957 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804103241')
2018-08-04 10:32:45,062 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 10:32:45,063 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804103241',)
2018-08-04 10:32:45,164 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：APItest, testplan：【测试环境】用户操作]的测试用例执行结果
2018-08-04 10:32:45,164 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', '【测试环境】用户操作', '20180804103241')
2018-08-04 10:32:45,268 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：APItest, testplan：【测试环境】用户操作]的测试用例运行结果到测试报告
2018-08-04 10:32:45,269 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 10:32:45,274 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804103241',)
2018-08-04 10:32:45,382 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：APItest, testplan：【测试环境】用户操作]已运行的测试用例
2018-08-04 10:32:45,382 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', '【测试环境】用户操作', '20180804103241')
2018-08-04 10:32:45,484 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 10:32:45,485 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '【测试环境】用户操作', 1079, '20180804103242')
2018-08-04 10:32:45,592 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 10:32:45,592 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '【测试环境】用户操作', 1083, '20180804103243')
2018-08-04 10:32:45,698 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 10:32:45,698 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '【测试环境】用户操作', 1085, '20180804103244')
2018-08-04 10:32:45,802 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 10:32:45,802 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804103241.html
2018-08-04 10:32:45,804 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 10:32:45,808 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 10:32:47,116 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804103241.html
2018-08-04 10:32:47,116 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 10:32:48,222 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 10:38:22,324 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:38:22,324 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:38:22,529 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:38:22,732 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:38:22,939 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:38:22,939 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:38:23,043 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:38:23,043 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:38:23,154 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:38:23,154 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:38:23,155 main.py [line: 142] INFO: 按计划运行测试
2018-08-04 10:38:23,155 main.py [line: 146] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-04 10:38:23,192 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:38:23,192 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:38:23,192 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:38:23,192 main.py [line: 170] INFO: 正在执行测试计划[project：APItest，testplan：user_operation]
2018-08-04 10:38:23,192 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-04 10:38:23,221 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 10:38:23,249 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 10:38:23,267 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:38:23,267 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103822', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 10:38:23,417 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 10:38:23,417 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:38:23,417 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 10:38:23,418 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:38:23,418 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103823', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:38:23,529 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:38:23,529 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:38:23,531 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:23,536 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:23,537 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:23,539 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:38:23,542 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:38:23,543 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:38:23,646 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:38:23,646 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:38:23,648 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:37:44 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=0s1rgo4ufl6rspk48hebkblgl1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:38:23,649 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:38:23,654 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:38:23,654 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 10:38:23,658 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:38:23,662 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:38:23",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804103823 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:23,766 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 10:38:23,766 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:38:23,768 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:38:23", case_exec_history_id="20180804103823" WHERE executed_history_id = 20180804103822 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:23,886 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 10:38:23,931 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:38:23,947 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:38:23,947 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103822', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:38:24,050 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:38:24,051 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:38:24,054 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:38:24,060 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:38:24,060 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103824', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:38:24,170 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:38:24,171 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:38:24,173 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:24,173 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:24,179 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:24,179 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:38:24,180 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:38:24,180 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:38:24,271 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:38:24,271 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:38:24,275 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:37:45 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:38:24,282 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:38:24,287 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:38:24,289 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:38:24,294 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:38:24,294 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:38:24,295 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:38:24,295 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:38:24,303 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:38:24,304 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:38:24",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804103824 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:24,413 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 10:38:24,415 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:38:24,431 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:38:24,437 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103824', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:38:24,541 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-04 10:38:24,541 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:38:24,543 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 10:38:24,545 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 10:38:24,550 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:24,551 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:38:24,551 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-04 10:38:24,552 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 10:38:24,555 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 10:38:24,560 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 10:38:24,695 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:38:24,696 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:38:24,698 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:37:45 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:38:24,698 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 10:38:24,701 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 10:38:24,706 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:38:24,709 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:38:24,713 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 10:38:24,713 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 10:38:24,715 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 10:38:24,725 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:38:24,726 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 10:38:24",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804103824 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:24,837 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 10:38:24,837 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:38:24,839 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:38:24", case_exec_history_id="20180804103824" WHERE executed_history_id = 20180804103822 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:24,973 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 10:38:25,036 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 10:38:25,060 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 10:38:25,061 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804103822', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 10:38:25,169 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 10:38:25,170 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 10:38:25,171 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 10:38:25,172 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:38:25", case_exec_history_id="20180804103825" WHERE executed_history_id = 20180804103822 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 10:38:25,304 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 10:38:25,338 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-04 10:38:25,338 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:38:25,341 htmlreporter.py [line: 37] INFO: 正在查询测试用例总数
2018-08-04 10:38:25,343 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804103822',)
2018-08-04 10:38:25,449 htmlreporter.py [line: 43] INFO: 正在查询执行通过的用例数
2018-08-04 10:38:25,449 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804103822')
2018-08-04 10:38:25,552 htmlreporter.py [line: 49] INFO: 正在查询执行失败的用例数
2018-08-04 10:38:25,553 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804103822')
2018-08-04 10:38:25,655 htmlreporter.py [line: 55] INFO: 正在查询执行出错的用例数
2018-08-04 10:38:25,656 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804103822')
2018-08-04 10:38:25,761 htmlreporter.py [line: 61] INFO: 正在查询未执行的用例数
2018-08-04 10:38:25,761 mydb.py [line: 89] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804103822')
2018-08-04 10:38:25,865 htmlreporter.py [line: 88] INFO: 正在查询已运的测试计划
2018-08-04 10:38:25,865 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804103822',)
2018-08-04 10:38:25,974 htmlreporter.py [line: 116] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-04 10:38:25,974 mydb.py [line: 107] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804103822')
2018-08-04 10:38:26,080 htmlreporter.py [line: 126] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-04 10:38:26,080 htmlreporter.py [line: 142] INFO: 正在查询已运的测试计划
2018-08-04 10:38:26,081 mydb.py [line: 107] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804103822',)
2018-08-04 10:38:26,181 htmlreporter.py [line: 155] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-04 10:38:26,182 mydb.py [line: 107] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804103822')
2018-08-04 10:38:26,286 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 10:38:26,287 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180804103823')
2018-08-04 10:38:26,407 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 10:38:26,408 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180804103824')
2018-08-04 10:38:26,512 htmlreporter.py [line: 189] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 10:38:26,512 mydb.py [line: 107] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180804103825')
2018-08-04 10:38:26,619 htmlreporter.py [line: 212] INFO: 正在设置测试报告结果文件名
2018-08-04 10:38:26,619 htmlreporter.py [line: 222] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804103822.html
2018-08-04 10:38:26,621 htmlreporter.py [line: 215] INFO: 正在生成测试报告
2018-08-04 10:38:26,624 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 10:38:28,239 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804103822.html
2018-08-04 10:38:28,239 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 10:38:29,084 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 10:40:59,432 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:40:59,433 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:40:59,645 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:40:59,853 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:41:00,062 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:41:00,063 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:41:00,174 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:41:00,174 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:41:00,288 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:41:00,289 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:41:00,289 main.py [line: 203] INFO: 运行指定用例……
2018-08-04 10:41:00,289 main.py [line: 205] INFO: 待运行用例id列表：[1079, 1083, 1085]
2018-08-04 10:41:00,327 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 10:41:00,375 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:00,375 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:00,375 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:00,375 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:00,375 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104059', 1079, '获取token', '用户操作-获取token', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 10:41:00,484 global_function.py [line: 56] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 10:41:00,485 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:41:00,485 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 10:41:00,485 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:00,485 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104100', 1079, '获取token', '无计划', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:00,610 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:41:00,611 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:00,611 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:00,612 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:00,612 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:00,613 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:41:00,613 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:41:00,613 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:41:00,688 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:00,689 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:00,690 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:40:21 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ajtvvoln5854itv3mvq6lk2qc7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:00,691 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:41:00,696 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:41:00,696 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 10:41:00,699 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:00,701 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:41:00",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804104100 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:00,811 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 10:41:00,811 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:00,813 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:00", case_exec_history_id="20180804104100" WHERE executed_history_id = 20180804104059 and testcase_id = 1079 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:00,927 global_function.py [line: 72] INFO: 指定用例[获取token]已执行完
2018-08-04 10:41:00,927 main.py [line: 208] INFO: 用例[1079]运行结果：('Pass', '')
2018-08-04 10:41:00,964 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:41:01,012 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:01,013 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:01,015 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:01,019 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:01,019 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104059', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:41:01,128 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:41:01,128 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:41:01,130 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:41:01,135 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:01,136 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104101', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:01,257 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:41:01,258 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:01,262 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:01,263 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:01,268 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:01,269 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:41:01,269 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:41:01,270 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:41:01,345 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:01,345 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:01,347 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:40:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:01,347 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:41:01,353 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:41:01,353 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:41:01,356 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:41:01,359 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:01,363 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:01,363 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:01,366 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:01,366 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:41:01",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104101 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:01,476 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 10:41:01,476 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:41:01,478 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:01,483 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104101', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:01,597 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-04 10:41:01,597 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:01,600 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 10:41:01,600 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 10:41:01,605 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:01,606 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:01,606 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-04 10:41:01,606 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 10:41:01,607 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 10:41:01,607 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 10:41:01,749 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:01,749 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:01,750 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:40:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:01,751 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 10:41:01,757 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 10:41:01,757 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:41:01,757 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:41:01,757 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 10:41:01,758 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 10:41:01,758 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 10:41:01,768 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:01,769 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 10:41:01",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104101 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:01,892 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 10:41:01,892 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:01,894 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:01", case_exec_history_id="20180804104101" WHERE executed_history_id = 20180804104059 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:02,022 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-04 10:41:02,022 main.py [line: 208] INFO: 用例[1083]运行结果：('Pass', '')
2018-08-04 10:41:02,055 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 10:41:02,107 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:02,108 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:02,110 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:02,110 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:02,116 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104059', 1085, '登录失败', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 10:41:02,257 global_function.py [line: 56] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 10:41:02,258 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 10:41:02,260 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:02,260 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:02", case_exec_history_id="20180804104102" WHERE executed_history_id = 20180804104059 and testcase_id = 1085 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:02,385 global_function.py [line: 72] INFO: 指定用例[登录失败]已执行完
2018-08-04 10:41:02,386 main.py [line: 208] INFO: 用例[1085]运行结果：('Pass', '')
2018-08-04 10:41:02,388 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:41:40,381 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:41:40,381 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:41:40,595 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:41:40,797 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:41:41,000 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:41:41,000 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:41:41,102 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:41:41,103 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:41:41,214 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:41:41,215 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:41:41,216 main.py [line: 203] INFO: 运行指定用例……
2018-08-04 10:41:41,216 main.py [line: 205] INFO: 待运行用例id列表：[1079, 1083, 1085]
2018-08-04 10:41:41,237 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 10:41:41,265 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:41,266 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:41,266 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:41,266 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:41,266 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104140', 1079, '获取token', '用户操作-获取token', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 10:41:41,392 global_function.py [line: 56] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 10:41:41,392 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:41:41,392 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 10:41:41,392 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:41,393 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104141', 1079, '获取token', '无计划', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:41,511 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:41:41,511 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:41,511 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:41,512 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:41,512 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:41,514 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:41:41,515 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:41:41,515 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:41:41,591 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:41,592 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:41,593 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:41:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=8q4o0m2r27kk2p5icmk6lqvi82; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:41,599 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:41:41,599 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:41:41,599 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 10:41:41,602 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:41,606 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:41:41",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804104141 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:41,720 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 10:41:41,720 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:41,722 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:41", case_exec_history_id="20180804104141" WHERE executed_history_id = 20180804104140 and testcase_id = 1079 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:41,839 global_function.py [line: 72] INFO: 指定用例[获取token]已执行完
2018-08-04 10:41:41,839 main.py [line: 208] INFO: 用例[1079]运行结果：('Pass', '')
2018-08-04 10:41:41,860 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:41:41,889 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:41,889 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:41,891 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:41,892 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:41,897 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104140', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:41:42,005 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:41:42,005 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:41:42,007 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:41:42,013 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:42,013 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104142', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:42,122 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:41:42,122 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:42,124 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:42,124 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:42,130 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:42,130 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:41:42,130 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:41:42,131 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:41:42,205 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:42,205 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:42,207 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:41:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:42,208 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:41:42,214 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:41:42,215 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:41:42,215 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:41:42,215 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:42,216 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:42,225 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:41:42,234 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:42,234 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:41:42",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104142 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:42,344 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 10:41:42,345 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:41:42,354 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:41:42,356 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104142', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:41:42,465 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-04 10:41:42,465 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:41:42,466 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 10:41:42,467 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 10:41:42,472 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:42,472 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:41:42,473 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-04 10:41:42,473 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 10:41:42,474 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 10:41:42,474 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 10:41:42,601 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:41:42,601 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:41:42,603 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:41:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:41:42,604 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 10:41:42,608 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 10:41:42,608 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:41:42,608 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:41:42,609 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 10:41:42,609 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 10:41:42,609 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 10:41:42,617 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:41:42,619 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 10:41:42",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104142 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:41:42,738 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 10:41:42,738 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:42,740 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:42", case_exec_history_id="20180804104142" WHERE executed_history_id = 20180804104140 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:42,852 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-04 10:41:42,852 main.py [line: 208] INFO: 用例[1083]运行结果：('Pass', '')
2018-08-04 10:41:42,873 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 10:41:42,904 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:41:42,905 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:41:42,907 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:41:42,910 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:41:42,916 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104140', 1085, '登录失败', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 10:41:43,067 global_function.py [line: 56] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 10:41:43,067 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 10:41:43,068 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:41:43,069 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:41:43", case_exec_history_id="20180804104143" WHERE executed_history_id = 20180804104140 and testcase_id = 1085 AND project='APItest' AND testplan='无计划'
2018-08-04 10:41:43,191 global_function.py [line: 72] INFO: 指定用例[登录失败]已执行完
2018-08-04 10:41:43,191 main.py [line: 208] INFO: 用例[1085]运行结果：('Pass', '')
2018-08-04 10:41:43,192 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:45:01,165 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:45:01,166 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:45:01,378 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:45:01,595 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:45:01,799 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:45:01,799 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:45:01,942 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:45:01,942 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:45:02,097 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:45:02,098 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:45:02,098 main.py [line: 203] INFO: 运行指定用例……
2018-08-04 10:45:02,099 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-04 10:45:02,143 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 18:51:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:45:02,198 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:45:02,199 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:45:02,199 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:45:02,199 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:45:02,200 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104501', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:45:02,312 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:45:02,313 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:45:02,316 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:45:02,317 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:45:02,318 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104502', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:45:02,436 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:45:02,436 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:45:02,438 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:02,441 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:02,447 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:02,449 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:45:02,450 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:45:02,457 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:45:02,575 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:45:02,576 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:45:02,577 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:44:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=973l3k026eked5nn5n3i6etg45; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:45:02,581 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:45:02,586 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:45:02,589 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:45:02,590 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:45:02,595 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:02,596 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:02,596 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:02,607 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:45:02,607 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:45:02",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104502 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:45:02,730 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-04 10:45:02,730 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:45:02,738 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:45:02,738 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104502', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:45:02,853 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-04 10:45:02,856 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:45:02,858 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-04 10:45:02,859 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-04 10:45:02,865 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:02,865 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:02,866 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-04 10:45:02,868 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-04 10:45:02,875 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-04 10:45:02,876 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-04 10:45:03,001 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:45:03,001 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:45:03,004 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:44:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:45:03,008 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-04 10:45:03,008 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-04 10:45:03,008 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:45:03,009 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:45:03,009 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-04 10:45:03,009 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-04 10:45:03,011 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-04 10:45:03,023 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:45:03,024 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-04 10:45:02",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104502 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:45:03,129 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-04 10:45:03,130 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:45:03,131 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 10:45:02", case_exec_history_id="20180804104502" WHERE executed_history_id = 20180804104501 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-04 10:45:03,235 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-04 10:45:03,236 main.py [line: 208] INFO: 用例[1083]运行结果：('Pass', '')
2018-08-04 10:45:03,239 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 10:45:57,207 global_var.py [line: 22] INFO: 当前运行环境：测试环境
2018-08-04 10:45:57,207 global_var.py [line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 10:45:57,417 global_var.py [line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 10:45:57,627 global_var.py [line: 33] INFO: 正在获取testlink
2018-08-04 10:45:57,828 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 10:45:57,828 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 10:45:57,931 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 10:45:57,931 mydb.py [line: 45] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 10:45:58,049 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 10:45:58,050 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 10:45:58,050 main.py [line: 203] INFO: 运行指定用例……
2018-08-04 10:45:58,051 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-04 10:45:58,075 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:44:26', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 10:45:58,111 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 10:45:58,111 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 10:45:58,111 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 10:45:58,112 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-04 10:45:58,112 mydb.py [line: 59] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104557', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 10:45:58,238 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 10:45:58,239 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 10:45:58,239 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:45:58,239 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:45:58,239 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104558', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:45:58,345 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 10:45:58,346 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 10:45:58,348 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:58,353 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:58,355 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 10:45:58,358 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 10:45:58,360 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 10:45:58,360 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 10:45:58,451 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 10:45:58,452 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 10:45:58,454 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 02:45:19 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=hvf2lr169oavqe9bup4e1gopa2; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 10:45:58,457 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 10:45:58,458 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 10:45:58,458 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 10:45:58,459 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 10:45:58,459 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:58,460 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:58,460 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 10:45:58,468 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 10:45:58,470 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 10:45:58",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804104558 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-04 10:45:58,576 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 10:45:58,577 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 10:45:58,584 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 10:45:58,584 mydb.py [line: 59] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804104558', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 10:45:58,695 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 10:45:58,696 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 10:45:58,698 mydb.py [line: 74] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 10:45:58" WHERE executed_history_id = 20180804104558 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-04 10:45:58,809 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-04 10:45:58,809 mydb.py [line: 74] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 10:45:58", case_exec_history_id="20180804104558" WHERE executed_history_id = 20180804104557 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-04 10:45:58,926 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-04 10:45:58,926 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-04 10:45:58,928 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 11:01:18,734 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-04 11:01:18,735 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 11:01:18,951 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 11:01:19,171 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-04 11:01:19,395 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 11:01:19,395 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 11:01:19,502 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 11:01:19,502 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 11:01:19,610 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 11:01:19,611 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 11:01:19,611 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 11:01:19,611 main.py [line: 114] INFO: 运行指定项目
2018-08-04 11:01:19,644 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 11:01:19,645 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 11:01:19,645 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 11:01:19,645 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-04 11:01:19,645 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-04 11:01:19,659 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation']]
2018-08-04 11:01:19,676 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-04 11:01:19,676 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-04 11:01:19,696 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:01:19,716 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:01:19,730 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:01:19,731 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110119', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:01:19,834 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:01:19,834 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:01:19,834 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:01:19,835 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:01:19,835 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110119', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:01:19,941 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:01:19,941 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:01:19,943 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:19,944 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:19,949 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:19,951 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:01:19,955 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:01:19,955 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:01:20,122 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:01:20,123 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:01:20,125 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:00:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ip12dfsjn6ui19d8t5culo2m41; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:01:20,125 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:01:20,131 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:01:20,131 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:01:20,141 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:01:20,142 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:01:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110119 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:01:20,306 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:01:20,306 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:01:20,308 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:01:19", case_exec_history_id="20180804110119" WHERE executed_history_id = 20180804110119 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:01:20,433 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 11:01:20,468 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 11:01:20,484 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:01:20,484 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110119', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 11:01:20,594 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 11:01:20,594 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:01:20,596 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:01:20,602 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:01:20,602 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110120', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:01:20,709 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:01:20,710 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:01:20,711 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:20,713 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:20,716 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:01:20,717 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:01:20,717 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:01:20,717 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:01:20,809 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:01:20,809 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:01:20,811 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:00:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:01:20,813 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:01:20,818 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:01:20,819 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 11:01:20,822 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 11:01:20,828 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:01:20,828 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:01:20,829 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:01:20,833 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:01:20,841 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:01:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804110120 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:01:20,958 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 11:01:20,959 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:01:20,962 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:01:20,966 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110120', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:01:21,075 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 11:01:21,077 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 11:01:21,080 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 11:01:21" WHERE executed_history_id = 20180804110120 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-04 11:01:21,209 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:01:21,209 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 11:01:20", case_exec_history_id="20180804110120" WHERE executed_history_id = 20180804110119 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:01:21,348 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 11:01:21,419 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 11:01:21,443 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:01:21,443 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110119', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 11:01:21,558 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 11:01:21,560 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 11:01:21,562 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:01:21,563 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:01:21", case_exec_history_id="20180804110121" WHERE executed_history_id = 20180804110119 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:01:21,728 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 11:01:21,760 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-04 11:01:21,761 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 11:01:21,774 htmlreporter.py [line: 36] INFO: 正在查询测试用例总数
2018-08-04 11:01:21,776 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804110119',)
2018-08-04 11:01:21,884 htmlreporter.py [line: 42] INFO: 正在查询执行通过的用例数
2018-08-04 11:01:21,887 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804110119')
2018-08-04 11:01:21,993 htmlreporter.py [line: 48] INFO: 正在查询执行失败的用例数
2018-08-04 11:01:21,994 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804110119')
2018-08-04 11:01:22,105 htmlreporter.py [line: 54] INFO: 正在查询执行出错的用例数
2018-08-04 11:01:22,106 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804110119')
2018-08-04 11:01:22,223 htmlreporter.py [line: 60] INFO: 正在查询未执行的用例数
2018-08-04 11:01:22,223 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804110119')
2018-08-04 11:01:22,323 htmlreporter.py [line: 87] INFO: 正在查询已运的测试计划
2018-08-04 11:01:22,324 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110119',)
2018-08-04 11:01:22,441 htmlreporter.py [line: 115] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-04 11:01:22,442 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110119')
2018-08-04 11:01:22,544 htmlreporter.py [line: 125] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-04 11:01:22,544 htmlreporter.py [line: 141] INFO: 正在查询已运的测试计划
2018-08-04 11:01:22,545 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110119',)
2018-08-04 11:01:22,649 htmlreporter.py [line: 154] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-04 11:01:22,649 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110119')
2018-08-04 11:01:22,760 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 11:01:22,761 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180804110119')
2018-08-04 11:01:22,870 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 11:01:22,872 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180804110120')
2018-08-04 11:01:22,980 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 11:01:22,980 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180804110121')
2018-08-04 11:01:23,083 htmlreporter.py [line: 211] INFO: 正在设置测试报告结果文件名
2018-08-04 11:01:23,084 htmlreporter.py [line: 221] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804110119.html
2018-08-04 11:01:23,085 htmlreporter.py [line: 214] INFO: 正在生成测试报告
2018-08-04 11:01:23,088 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 11:01:24,718 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804110119.html
2018-08-04 11:01:24,719 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 11:01:25,714 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 11:05:56,376 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-04 11:05:56,377 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 11:05:56,589 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 11:05:56,798 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-04 11:05:57,001 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 11:05:57,001 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 11:05:57,114 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 11:05:57,115 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 11:05:57,238 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 11:05:57,239 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 11:05:57,239 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 11:05:57,239 main.py [line: 114] INFO: 运行指定项目
2018-08-04 11:05:57,295 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 11:05:57,296 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 11:05:57,296 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 11:05:57,296 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-04 11:05:57,296 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-04 11:05:57,310 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-04 11:05:57,336 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-04 11:05:57,336 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-04 11:05:57,355 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:05:57,376 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:05:57,389 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:05:57,389 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110556', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:05:57,514 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:05:57,514 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:05:57,515 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:05:57,515 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:05:57,515 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110557', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:05:57,644 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:05:57,644 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:05:57,646 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:57,647 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:57,654 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:57,656 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:05:57,660 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:05:57,665 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:05:57,757 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:05:57,758 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:05:57,759 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:05:18 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ll5rqhvjpmservorun158qnok5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:05:57,765 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:05:57,767 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:05:57,767 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:05:57,780 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:05:57,780 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:05:57",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110557 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:05:57,929 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:05:57,929 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:05:57,931 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:05:57", case_exec_history_id="20180804110557" WHERE executed_history_id = 20180804110556 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:05:58,055 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 11:05:58,094 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 11:05:58,111 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:05:58,111 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110556', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 11:05:58,215 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 11:05:58,215 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:05:58,216 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:05:58,223 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:05:58,224 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110558', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:05:58,336 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:05:58,336 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:05:58,337 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:58,338 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:58,338 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:05:58,339 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:05:58,340 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:05:58,340 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:05:58,415 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:05:58,415 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:05:58,419 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:05:19 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:05:58,420 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:05:58,420 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:05:58,420 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 11:05:58,421 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 11:05:58,421 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:05:58,421 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:05:58,421 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:05:58,422 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:05:58,422 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:05:58",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804110558 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:05:58,533 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 11:05:58,533 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:05:58,534 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:05:58,534 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110558', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:05:58,650 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 11:05:58,651 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 11:05:58,652 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 11:05:58" WHERE executed_history_id = 20180804110558 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-04 11:05:58,763 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:05:58,764 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 11:05:58", case_exec_history_id="20180804110558" WHERE executed_history_id = 20180804110556 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:05:58,893 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 11:05:58,929 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 11:05:58,943 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:05:58,944 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110556', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 11:05:59,051 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 11:05:59,051 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 11:05:59,052 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:05:59,053 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:05:59", case_exec_history_id="20180804110559" WHERE executed_history_id = 20180804110556 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:05:59,172 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 11:05:59,189 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-04 11:05:59,204 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-04 11:05:59,204 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-04 11:05:59,224 testplan.py [line: 32] WARNING: 未获取到测试用例
2018-08-04 11:05:59,224 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 11:05:59,226 htmlreporter.py [line: 36] INFO: 正在查询测试用例总数
2018-08-04 11:05:59,226 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804110556',)
2018-08-04 11:05:59,325 htmlreporter.py [line: 42] INFO: 正在查询执行通过的用例数
2018-08-04 11:05:59,326 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804110556')
2018-08-04 11:05:59,428 htmlreporter.py [line: 48] INFO: 正在查询执行失败的用例数
2018-08-04 11:05:59,428 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804110556')
2018-08-04 11:05:59,525 htmlreporter.py [line: 54] INFO: 正在查询执行出错的用例数
2018-08-04 11:05:59,526 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804110556')
2018-08-04 11:05:59,628 htmlreporter.py [line: 60] INFO: 正在查询未执行的用例数
2018-08-04 11:05:59,628 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804110556')
2018-08-04 11:05:59,732 htmlreporter.py [line: 87] INFO: 正在查询已运的测试计划
2018-08-04 11:05:59,732 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110556',)
2018-08-04 11:05:59,835 htmlreporter.py [line: 115] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-04 11:05:59,837 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110556')
2018-08-04 11:05:59,942 htmlreporter.py [line: 125] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-04 11:05:59,943 htmlreporter.py [line: 141] INFO: 正在查询已运的测试计划
2018-08-04 11:05:59,944 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110556',)
2018-08-04 11:06:00,048 htmlreporter.py [line: 154] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-04 11:06:00,048 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110556')
2018-08-04 11:06:00,152 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 11:06:00,153 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180804110557')
2018-08-04 11:06:00,260 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 11:06:00,261 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180804110558')
2018-08-04 11:06:00,369 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 11:06:00,370 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180804110559')
2018-08-04 11:06:00,474 htmlreporter.py [line: 211] INFO: 正在设置测试报告结果文件名
2018-08-04 11:06:00,474 htmlreporter.py [line: 221] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804110556.html
2018-08-04 11:06:00,475 htmlreporter.py [line: 214] INFO: 正在生成测试报告
2018-08-04 11:06:00,477 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 11:06:01,776 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804110556.html
2018-08-04 11:06:01,776 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 11:06:02,455 main.py [line: 248] INFO: 发送邮件成功
2018-08-04 11:07:02,540 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-04 11:07:02,540 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 11:07:02,759 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 11:07:02,973 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-04 11:07:03,173 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 11:07:03,174 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 11:07:03,295 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 11:07:03,296 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 11:07:03,407 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 11:07:03,408 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 11:07:03,408 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 11:07:03,408 main.py [line: 114] INFO: 运行指定项目
2018-08-04 11:07:03,441 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 11:07:03,442 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 11:07:03,442 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 11:07:03,443 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-04 11:07:03,443 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-04 11:07:03,456 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-04 11:07:03,470 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-04 11:07:03,471 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-04 11:07:03,490 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:07:03,509 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:07:03,523 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:07:03,523 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110702', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:07:03,635 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:07:03,635 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:07:03,636 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:07:03,636 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:07:03,636 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110703', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:07:03,761 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:07:03,761 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:07:03,763 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:03,764 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:03,769 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:03,769 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:07:03,770 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:07:03,771 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:07:03,849 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:07:03,850 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:07:03,851 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:06:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=qolerrv3khqmccta0lqekgs123; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:07:03,852 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:07:03,857 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:07:03,857 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:07:03,859 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:07:03,860 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:07:03",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110703 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:03,967 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:07:03,967 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:07:03,969 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:07:03", case_exec_history_id="20180804110703" WHERE executed_history_id = 20180804110702 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:04,094 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 11:07:04,131 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 11:07:04,146 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:07:04,146 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110702', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 11:07:04,257 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 11:07:04,257 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:07:04,259 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:07:04,266 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:07:04,268 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110704', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:07:04,378 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:07:04,378 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:07:04,380 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:04,381 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:04,386 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:04,386 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:07:04,387 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:07:04,387 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:07:04,463 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:07:04,463 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:07:04,465 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:06:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:07:04,470 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:07:04,470 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:07:04,471 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 11:07:04,472 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 11:07:04,472 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:07:04,475 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:07:04,479 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:07:04,493 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:07:04,493 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:07:04",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804110704 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:04,605 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 11:07:04,605 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:07:04,608 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:07:04,613 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110704', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:07:04,756 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 11:07:04,756 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 11:07:04,759 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 11:07:04" WHERE executed_history_id = 20180804110704 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-04 11:07:04,871 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:07:04,872 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 11:07:04", case_exec_history_id="20180804110704" WHERE executed_history_id = 20180804110702 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:05,038 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 11:07:05,100 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 11:07:05,124 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:07:05,125 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110702', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 11:07:05,235 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 11:07:05,235 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 11:07:05,237 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:07:05,238 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:07:05", case_exec_history_id="20180804110705" WHERE executed_history_id = 20180804110702 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:05,370 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 11:07:05,401 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-04 11:07:05,426 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-04 11:07:05,426 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-04 11:07:05,464 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:07:05,506 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:07:05,530 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:07:05,531 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110702', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:07:05,640 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:07:05,640 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:07:05,641 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:07:05,647 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:07:05,647 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110705', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:07:05,757 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:07:05,757 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:07:05,758 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:05,759 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:05,764 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:07:05,765 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:07:05,765 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:07:05,765 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:07:05,846 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:07:05,846 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:07:05,848 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:06:26 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:07:05,850 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:07:05,856 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:07:05,858 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:07:05,866 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:07:05,867 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:07:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110705 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:07:05,978 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:07:05,979 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:07:05,981 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:07:05", case_exec_history_id="20180804110705" WHERE executed_history_id = 20180804110702 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:23,709 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-04 11:09:23,710 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-04 11:09:23,928 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-04 11:09:24,136 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-04 11:09:24,341 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-04 11:09:24,341 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-04 11:09:24,450 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-04 11:09:24,450 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-04 11:09:24,557 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-04 11:09:24,560 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-04 11:09:24,561 main.py [line: 89] INFO: 按项目运行测试
2018-08-04 11:09:24,562 main.py [line: 114] INFO: 运行指定项目
2018-08-04 11:09:24,595 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-04 11:09:24,595 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-04 11:09:24,596 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-04 11:09:24,596 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-04 11:09:24,596 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-04 11:09:24,609 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-04 11:09:24,624 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-04 11:09:24,624 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-04 11:09:24,643 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:09:24,662 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:09:24,676 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:24,676 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:09:24,787 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:09:24,787 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:09:24,787 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:09:24,788 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:24,788 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:24,907 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:09:24,907 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:09:24,909 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:24,910 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:24,917 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:24,921 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:09:24,923 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:09:24,923 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:09:25,011 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:09:25,013 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:09:25,015 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:08:46 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=31o8f2m852tnhjuc5g59gpler3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:09:25,020 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:09:25,021 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:09:25,021 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:09:25,030 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:09:25,031 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:09:24",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110924 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:25,140 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:09:25,140 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:25,142 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:09:24", case_exec_history_id="20180804110924" WHERE executed_history_id = 20180804110924 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:25,274 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 11:09:25,334 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 11:09:25,357 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:25,357 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 11:09:25,464 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 11:09:25,465 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:09:25,466 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:09:25,473 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:25,473 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110925', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:25,592 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:09:25,592 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:09:25,593 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:25,594 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:25,599 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:25,600 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:09:25,600 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:09:25,600 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:09:25,676 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:09:25,677 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:09:25,678 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:08:46 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:09:25,684 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:09:25,687 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:09:25,691 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 11:09:25,697 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 11:09:25,697 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:25,697 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:25,698 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:25,718 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:09:25,718 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:09:25",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804110925 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:25,830 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 11:09:25,830 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:09:25,837 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:25,837 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110925', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:25,949 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 11:09:25,950 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 11:09:25,952 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 11:09:25" WHERE executed_history_id = 20180804110925 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-04 11:09:26,094 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:26,094 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 11:09:25", case_exec_history_id="20180804110925" WHERE executed_history_id = 20180804110924 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:26,264 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 11:09:26,302 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 11:09:26,316 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:26,317 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 11:09:26,452 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 11:09:26,452 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 11:09:26,454 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:26,456 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:09:26", case_exec_history_id="20180804110926" WHERE executed_history_id = 20180804110924 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:26,617 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 11:09:26,643 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-04 11:09:26,666 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-04 11:09:26,666 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-04 11:09:26,692 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-04 11:09:26,711 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-04 11:09:26,726 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:26,726 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-04 11:09:26,900 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-04 11:09:26,901 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:09:26,904 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-04 11:09:26,916 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:26,917 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110926', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:27,096 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:09:27,097 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:09:27,099 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,099 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,106 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,108 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:09:27,110 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:09:27,116 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:09:27,195 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:09:27,195 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:09:27,196 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:08:48 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:09:27,197 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:09:27,202 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:09:27,202 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-04 11:09:27,211 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:09:27,211 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:09:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180804110926 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:27,318 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-04 11:09:27,319 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:27,321 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:09:26", case_exec_history_id="20180804110926" WHERE executed_history_id = 20180804110924 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:27,451 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-04 11:09:27,488 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-04 11:09:27,502 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:27,503 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-04 11:09:27,616 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-04 11:09:27,616 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-04 11:09:27,617 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:09:27,624 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:27,625 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110927', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:27,736 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-04 11:09:27,737 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-04 11:09:27,739 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,739 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,745 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-04 11:09:27,746 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-04 11:09:27,746 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-04 11:09:27,746 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-04 11:09:27,819 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-04 11:09:27,819 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-04 11:09:27,820 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 04 Aug 2018 03:08:48 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-04 11:09:27,821 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM="}
2018-08-04 11:09:27,826 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-04 11:09:27,826 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-04 11:09:27,827 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-04 11:09:27,827 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:27,827 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:27,828 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZTQ5YzkxZTU0NTU5MjI2YzUzYTJhZjMyYjJiMDE2NGM=
2018-08-04 11:09:27,837 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-04 11:09:27,838 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-04 11:09:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180804110927 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:27,944 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-04 11:09:27,945 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-04 11:09:27,948 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-04 11:09:27,953 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110927', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-04 11:09:28,086 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-04 11:09:28,086 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-04 11:09:28,089 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-04 11:09:28" WHERE executed_history_id = 20180804110927 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-04 11:09:28,202 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:28,202 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-04 11:09:27", case_exec_history_id="20180804110927" WHERE executed_history_id = 20180804110924 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:28,324 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-04 11:09:28,360 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-04 11:09:28,375 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-04 11:09:28,375 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180804110924', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-04 11:09:28,479 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-04 11:09:28,479 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-04 11:09:28,481 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-04 11:09:28,482 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-04 11:09:28", case_exec_history_id="20180804110928" WHERE executed_history_id = 20180804110924 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-04 11:09:28,631 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-04 11:09:28,648 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-04 11:09:28,648 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-04 11:09:28,650 htmlreporter.py [line: 36] INFO: 正在查询测试用例总数
2018-08-04 11:09:28,651 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180804110924',)
2018-08-04 11:09:28,748 htmlreporter.py [line: 42] INFO: 正在查询执行通过的用例数
2018-08-04 11:09:28,748 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180804110924')
2018-08-04 11:09:28,848 htmlreporter.py [line: 48] INFO: 正在查询执行失败的用例数
2018-08-04 11:09:28,848 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180804110924')
2018-08-04 11:09:28,949 htmlreporter.py [line: 54] INFO: 正在查询执行出错的用例数
2018-08-04 11:09:28,950 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180804110924')
2018-08-04 11:09:29,049 htmlreporter.py [line: 60] INFO: 正在查询未执行的用例数
2018-08-04 11:09:29,050 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180804110924')
2018-08-04 11:09:29,162 htmlreporter.py [line: 87] INFO: 正在查询已运的测试计划
2018-08-04 11:09:29,162 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110924',)
2018-08-04 11:09:29,263 htmlreporter.py [line: 115] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-04 11:09:29,263 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110924')
2018-08-04 11:09:29,367 htmlreporter.py [line: 125] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-04 11:09:29,367 htmlreporter.py [line: 115] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-04 11:09:29,369 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180804110924')
2018-08-04 11:09:29,470 htmlreporter.py [line: 125] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-04 11:09:29,470 htmlreporter.py [line: 141] INFO: 正在查询已运的测试计划
2018-08-04 11:09:29,472 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180804110924',)
2018-08-04 11:09:29,571 htmlreporter.py [line: 154] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-04 11:09:29,572 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180804110924')
2018-08-04 11:09:29,687 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 11:09:29,687 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180804110924')
2018-08-04 11:09:29,791 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 11:09:29,792 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180804110925')
2018-08-04 11:09:29,897 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 11:09:29,897 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180804110926')
2018-08-04 11:09:30,014 htmlreporter.py [line: 154] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-04 11:09:30,015 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180804110924')
2018-08-04 11:09:30,121 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-04 11:09:30,122 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180804110926')
2018-08-04 11:09:30,225 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-04 11:09:30,226 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180804110927')
2018-08-04 11:09:30,329 htmlreporter.py [line: 188] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-04 11:09:30,329 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180804110928')
2018-08-04 11:09:30,434 htmlreporter.py [line: 211] INFO: 正在设置测试报告结果文件名
2018-08-04 11:09:30,434 htmlreporter.py [line: 221] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180804110924.html
2018-08-04 11:09:30,440 htmlreporter.py [line: 214] INFO: 正在生成测试报告
2018-08-04 11:09:30,443 main.py [line: 234] INFO: 生成测试报告成功
2018-08-04 11:09:31,674 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180804110924.html
2018-08-04 11:09:31,675 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-04 11:09:32,294 main.py [line: 248] INFO: 发送邮件成功
