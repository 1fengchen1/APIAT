2018-08-11 09:00:16,746 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:00:16,754 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:00:17,018 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:00:17,237 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:00:17,551 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:00:17,551 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:00:17,671 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:00:17,671 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:00:17,783 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:00:17,784 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:00:17,784 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 09:00:17,784 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-11 09:00:17,821 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:00:17,849 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:00:17,849 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:00:17,849 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:00:17,849 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-11 09:00:17,849 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090017', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:00:17,977 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:00:17,977 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:00:17,977 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:17,977 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:17,977 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090017', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:18,099 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:00:18,099 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:00:18,099 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:18,099 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:18,099 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:18,099 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:00:18,099 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:00:18,100 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:00:18,305 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:00:18,307 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:00:18,307 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:00:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=22a905n5nn9q487m2s0rjfnu84; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:00:18,307 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:00:18,307 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:00:18,307 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:00:18,307 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:00:18,307 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:18,307 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:18,307 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:18,308 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:00:18,308 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:00:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090017 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:00:18,448 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:00:18,448 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:18,448 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:18,448 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090017', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:18,581 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:00:18,581 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:00:18,581 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:00:18" WHERE executed_history_id = 20180811090017 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:18,695 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-11 09:00:18,695 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:00:17", case_exec_history_id="20180811090017" WHERE executed_history_id = 20180811090017 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:18,810 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-11 09:00:18,810 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-11 09:00:18,810 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:00:40,704 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:00:40,704 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:00:40,933 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:00:41,156 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:00:41,377 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:00:41,377 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:00:41,501 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:00:41,502 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:00:41,615 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:00:41,616 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:00:41,616 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 09:00:41,616 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-11 09:00:41,638 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:00:41,665 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:00:41,665 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:00:41,665 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:00:41,665 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-11 09:00:41,665 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090041', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:00:41,782 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:00:41,782 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:00:41,782 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:41,782 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:41,782 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090041', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:41,896 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:00:41,896 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:00:41,896 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:41,897 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:41,897 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:41,897 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:00:41,897 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:00:41,897 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:00:41,991 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:00:41,991 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:00:41,991 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:00:46 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=firb9f8254o0gpv3fsaaq58ar6; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:00:41,992 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:00:41,992 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:00:41,992 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:00:41,992 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:00:41,992 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:41,992 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:41,992 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:41,992 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:00:41,992 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:00:41",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090041 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:00:42,107 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:00:42,108 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:42,108 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:42,109 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090041', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:42,225 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:00:42,225 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:00:42,225 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:00:42" WHERE executed_history_id = 20180811090041 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:42,341 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-11 09:00:42,341 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:00:41", case_exec_history_id="20180811090041" WHERE executed_history_id = 20180811090041 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:42,456 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-11 09:00:42,456 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-11 09:00:42,456 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:00:43,807 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:00:43,808 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:00:44,037 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:00:44,257 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:00:44,472 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:00:44,473 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:00:44,587 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:00:44,587 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:00:44,701 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:00:44,702 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:00:44,702 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 09:00:44,702 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-11 09:00:44,723 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:00:44,751 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:00:44,751 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:00:44,751 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:00:44,751 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-11 09:00:44,751 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090044', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:00:44,867 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:00:44,867 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:00:44,867 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:44,867 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:44,868 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090044', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:44,983 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:00:44,984 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:00:44,984 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:44,984 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:44,984 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:00:44,984 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:00:44,984 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:00:44,984 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:00:45,079 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:00:45,079 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:00:45,079 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:00:49 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ar9jla679e1vejk7h4gmvdv660; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:00:45,080 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:00:45,080 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:00:45,080 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:00:45,080 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:00:45,080 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:45,080 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:45,080 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:00:45,080 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:00:45,080 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:00:44",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090044 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:00:45,194 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:00:45,194 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:00:45,195 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:00:45,195 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090044', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:00:45,311 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:00:45,311 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:00:45,311 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:00:45" WHERE executed_history_id = 20180811090044 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:45,430 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-11 09:00:45,431 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:00:44", case_exec_history_id="20180811090044" WHERE executed_history_id = 20180811090044 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-11 09:00:45,546 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-11 09:00:45,547 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-11 09:00:45,547 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:03:02,052 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:03:02,052 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:03:02,281 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:03:02,512 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:03:02,779 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:03:02,779 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:03:02,894 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:03:02,894 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:03:03,012 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:03:03,013 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:03:03,013 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 09:03:03,013 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-11 09:03:03,040 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:03:03,069 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:03:03,070 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:03:03,070 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:03:03,070 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-11 09:03:03,071 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090302', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:03:03,187 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:03:03,188 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:03:03,190 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:03:03,190 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:03:03,191 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090303', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:03:03,323 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:03:03,323 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:03:03,324 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:03:03,324 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:03:03,324 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:03:03,325 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:03:03,325 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:03:03,325 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:03:03,413 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:03:03,414 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:03:03,414 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:03:08 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ik2atdna32f195fjnfr45ae926; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:03:03,414 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:03:03,415 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:03:03,415 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:03:03,415 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:03:03,416 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:03:03,416 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:03:03,416 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:03:03,417 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:03:03,417 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:03:03",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090303 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:03:03,535 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:03:03,535 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:03:03,536 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:03:03,536 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090303', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:03:03,650 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:03:03,651 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:03:03,651 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:03:03" WHERE executed_history_id = 20180811090303 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-11 09:03:03,769 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-11 09:03:03,769 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:03:03", case_exec_history_id="20180811090303" WHERE executed_history_id = 20180811090302 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-11 09:03:03,883 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-11 09:03:03,883 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-11 09:03:03,883 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:04:17,528 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:04:17,528 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:04:17,752 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:04:17,972 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:04:18,240 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:04:18,241 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:04:18,357 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:04:18,357 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:04:18,473 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:04:18,474 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:04:18,474 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 09:04:18,474 main.py [line: 114] INFO: 运行指定项目
2018-08-11 09:04:18,512 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:04:18,513 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:04:18,513 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:04:18,513 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 09:04:18,513 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 09:04:18,527 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 09:04:18,545 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 09:04:18,548 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 09:04:18,569 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:04:18,587 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:04:18,600 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:18,601 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:04:18,722 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:04:18,723 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:18,723 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:04:18,723 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:18,724 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090418', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:18,840 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:18,840 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:18,841 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:18,841 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:18,841 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:18,841 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:18,842 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:18,842 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:18,942 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:18,943 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:18,943 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:04:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=osuvaanhts9rcp0jase11bgjt1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:18,944 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:18,944 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:18,944 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:04:18,945 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:18,945 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811090418 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:19,064 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:04:19,064 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:19,064 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:18", case_exec_history_id="20180811090418" WHERE executed_history_id = 20180811090417 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:19,191 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:04:19,225 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:04:19,241 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:19,241 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:04:19,355 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:04:19,355 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:19,356 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:19,356 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:19,356 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090419', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:19,481 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:19,482 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:19,482 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:19,482 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:19,483 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:19,483 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:19,483 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:19,483 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:19,562 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:19,562 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:19,563 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:04:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:19,563 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:19,563 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:19,563 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:04:19,563 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:04:19,564 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:19,564 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:19,564 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:19,565 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:19,565 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090419 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:19,679 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:04:19,681 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:19,684 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:19,685 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090419', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:19,811 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:04:19,811 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:04:19,811 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:04:19" WHERE executed_history_id = 20180811090419 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 09:04:19,928 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:19,928 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:04:19", case_exec_history_id="20180811090419" WHERE executed_history_id = 20180811090417 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:20,054 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:04:20,086 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:04:20,098 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:20,098 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:04:20,218 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:04:20,219 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:04:20,220 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:20,221 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:20", case_exec_history_id="20180811090420" WHERE executed_history_id = 20180811090417 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:20,357 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:04:20,373 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 09:04:20,387 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 09:04:20,388 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 09:04:20,406 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:04:20,423 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:04:20,436 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:20,436 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:04:20,554 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:04:20,554 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:20,555 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:04:20,555 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:20,555 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090420', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:20,681 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:20,681 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:20,681 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:20,682 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:20,682 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:20,682 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:20,682 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:20,683 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:20,762 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:20,763 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:20,764 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:04:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:20,764 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:20,765 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:20,765 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:04:20,766 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:20,766 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811090420 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:20,880 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:04:20,881 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:20,881 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:20", case_exec_history_id="20180811090420" WHERE executed_history_id = 20180811090417 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:21,028 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:04:21,088 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:04:21,112 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:21,113 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:04:21,229 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:04:21,229 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:21,230 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:21,230 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:21,231 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090421', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:21,361 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:21,361 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:21,362 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:21,362 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:21,362 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:21,362 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:21,362 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:21,362 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:21,440 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:21,441 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:21,441 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:04:26 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:21,441 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:21,441 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:21,441 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:04:21,442 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:04:21,442 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:21,442 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:21,442 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:21,443 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:21,443 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:21",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090421 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:21,571 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:04:21,571 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:21,572 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:21,573 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090421', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:21,690 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:04:21,691 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:04:21,691 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:04:21" WHERE executed_history_id = 20180811090421 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 09:04:21,808 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:21,808 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:04:21", case_exec_history_id="20180811090421" WHERE executed_history_id = 20180811090417 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:21,935 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:04:21,967 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:04:21,981 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:21,981 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090417', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:04:22,096 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:04:22,097 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:04:22,097 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:22,098 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:22", case_exec_history_id="20180811090422" WHERE executed_history_id = 20180811090417 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:22,231 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:04:22,246 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 09:04:22,247 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:04:22,248 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 09:04:22,248 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811090417',)
2018-08-11 09:04:22,360 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 09:04:22,361 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811090417')
2018-08-11 09:04:22,472 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 09:04:22,472 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811090417')
2018-08-11 09:04:22,583 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 09:04:22,583 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811090417')
2018-08-11 09:04:22,696 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 09:04:22,696 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811090417')
2018-08-11 09:04:22,808 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 09:04:22,808 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811090417',)
2018-08-11 09:04:22,922 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 09:04:22,923 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811090417')
2018-08-11 09:04:23,035 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 09:04:23,036 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 09:04:23,036 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811090417')
2018-08-11 09:04:23,148 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 09:04:23,149 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 09:04:23,149 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811090417',)
2018-08-11 09:04:23,261 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 09:04:23,261 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811090417')
2018-08-11 09:04:23,376 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:04:23,376 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811090418')
2018-08-11 09:04:23,490 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:04:23,490 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811090419')
2018-08-11 09:04:23,610 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:04:23,611 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811090420')
2018-08-11 09:04:23,723 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 09:04:23,724 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811090417')
2018-08-11 09:04:23,834 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:04:23,834 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811090420')
2018-08-11 09:04:23,944 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:04:23,944 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811090421')
2018-08-11 09:04:24,055 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:04:24,055 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811090422')
2018-08-11 09:04:24,169 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 09:04:24,170 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811090417.html
2018-08-11 09:04:24,170 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 09:04:24,174 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 09:04:25,463 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811090417.html
2018-08-11 09:04:25,463 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 09:04:26,557 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 09:04:54,520 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:04:54,520 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:04:54,751 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:04:54,973 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:04:55,172 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:04:55,173 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:04:55,286 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:04:55,286 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:04:55,398 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:04:55,399 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:04:55,399 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 09:04:55,399 main.py [line: 114] INFO: 运行指定项目
2018-08-11 09:04:55,428 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:04:55,428 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:04:55,428 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:04:55,428 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 09:04:55,428 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 09:04:55,440 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 09:04:55,453 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 09:04:55,453 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 09:04:55,472 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:04:55,489 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:04:55,501 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:55,502 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:04:55,629 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:04:55,629 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:55,629 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:04:55,629 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:55,629 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090455', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:55,745 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:55,745 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:55,745 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:55,745 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:55,745 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:55,746 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:55,746 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:55,746 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:55,827 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:55,828 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:55,828 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:05:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=c8i12q5pn1qns4diqk3jneefm1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:55,828 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:55,828 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:55,828 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:04:55,828 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:55,828 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:55",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811090455 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:55,942 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:04:55,943 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:55,943 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:55", case_exec_history_id="20180811090455" WHERE executed_history_id = 20180811090454 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:56,067 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:04:56,099 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:04:56,113 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:56,113 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:04:56,241 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:04:56,241 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:56,241 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:56,241 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:56,241 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090456', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:56,358 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:56,358 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:56,358 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:56,358 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:56,358 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:56,359 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:56,359 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:56,359 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:56,435 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:56,436 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:56,436 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:05:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:56,436 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:56,436 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:56,436 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:04:56,436 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:04:56,436 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:56,436 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:56,436 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:56,437 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:56,437 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:56",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090456 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:56,552 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:04:56,552 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:56,552 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:56,552 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090456', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:56,676 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:04:56,676 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:04:56,676 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:04:56" WHERE executed_history_id = 20180811090456 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 09:04:56,795 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:56,795 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:04:56", case_exec_history_id="20180811090456" WHERE executed_history_id = 20180811090454 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:56,922 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:04:56,952 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:04:56,966 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:56,967 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:04:57,098 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:04:57,098 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:04:57,098 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:57,098 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:57", case_exec_history_id="20180811090457" WHERE executed_history_id = 20180811090454 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:57,222 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:04:57,237 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 09:04:57,250 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 09:04:57,250 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 09:04:57,267 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:04:57,283 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:04:57,295 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:57,295 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:04:57,411 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:04:57,411 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:57,411 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:04:57,411 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:57,411 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090457', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:57,536 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:57,536 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:57,536 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:57,536 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:57,536 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:57,536 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:57,536 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:57,536 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:57,614 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:57,614 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:57,614 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:05:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:57,614 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:57,614 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:57,614 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:04:57,615 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:57,615 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:57",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811090457 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:57,763 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:04:57,763 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:57,764 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:57", case_exec_history_id="20180811090457" WHERE executed_history_id = 20180811090454 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:57,897 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:04:57,929 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:04:57,941 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:57,941 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:04:58,067 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:04:58,067 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:04:58,067 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:58,067 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:58,067 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090458', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:58,183 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:04:58,183 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:04:58,183 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:58,183 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:58,183 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:04:58,184 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:04:58,184 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:04:58,184 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:04:58,260 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:04:58,261 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:04:58,261 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:05:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:04:58,261 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:04:58,262 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:04:58,262 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:04:58,263 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:04:58,263 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:58,263 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:58,264 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:04:58,265 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:04:58,265 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:04:58",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811090458 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:58,382 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:04:58,383 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:04:58,383 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:04:58,383 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090458', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:04:58,498 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:04:58,498 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:04:58,498 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:04:58" WHERE executed_history_id = 20180811090458 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 09:04:58,614 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:58,615 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:04:58", case_exec_history_id="20180811090458" WHERE executed_history_id = 20180811090454 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:58,767 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:04:58,799 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:04:58,812 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:04:58,812 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811090454', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:04:58,925 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:04:58,925 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:04:58,925 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:04:58,925 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:04:58", case_exec_history_id="20180811090458" WHERE executed_history_id = 20180811090454 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:04:59,057 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:04:59,073 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 09:04:59,074 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:04:59,077 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 09:04:59,077 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811090454',)
2018-08-11 09:04:59,187 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 09:04:59,187 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811090454')
2018-08-11 09:04:59,308 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 09:04:59,308 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811090454')
2018-08-11 09:04:59,422 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 09:04:59,422 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811090454')
2018-08-11 09:04:59,532 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 09:04:59,532 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811090454')
2018-08-11 09:04:59,641 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 09:04:59,641 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811090454',)
2018-08-11 09:04:59,754 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 09:04:59,754 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811090454')
2018-08-11 09:04:59,863 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 09:04:59,863 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 09:04:59,863 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811090454')
2018-08-11 09:04:59,975 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 09:04:59,975 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 09:04:59,975 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811090454',)
2018-08-11 09:05:00,086 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 09:05:00,086 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811090454')
2018-08-11 09:05:00,200 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:05:00,200 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811090455')
2018-08-11 09:05:00,310 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:05:00,311 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811090456')
2018-08-11 09:05:00,422 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:05:00,422 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811090457')
2018-08-11 09:05:00,533 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 09:05:00,533 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811090454')
2018-08-11 09:05:00,647 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:05:00,647 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811090457')
2018-08-11 09:05:00,761 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:05:00,761 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811090458')
2018-08-11 09:05:00,876 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:05:00,877 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811090458')
2018-08-11 09:05:00,991 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 09:05:00,991 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811090454.html
2018-08-11 09:05:00,991 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 09:05:00,994 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 09:05:01,994 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811090454.html
2018-08-11 09:05:01,995 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 09:05:06,911 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 09:34:21,131 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:34:21,132 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:34:21,354 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:34:21,574 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:34:21,775 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:34:21,775 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:34:21,895 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:34:21,895 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:34:22,009 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:34:22,010 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:34:22,010 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 09:34:22,010 main.py [line: 114] INFO: 运行指定项目
2018-08-11 09:34:22,041 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:34:22,042 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:34:22,042 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:34:22,042 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 09:34:22,042 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 09:34:22,055 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 09:34:22,068 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 09:34:22,068 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 09:34:22,088 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:34:22,105 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:34:22,118 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:22,118 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:34:22,240 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:34:22,240 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:34:22,240 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:34:22,240 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:22,240 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093422', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:22,355 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:34:22,355 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:34:22,355 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:22,355 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:22,356 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:22,356 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:34:22,356 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:34:22,356 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:34:22,477 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:34:22,477 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:34:22,478 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:34:27 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=qsttumhuhfs5p118l51jm6e514; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:34:22,478 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:34:22,478 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:34:22,478 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:34:22,478 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:34:22,478 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:34:22",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811093422 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:22,613 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:34:22,614 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:22,614 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:34:22", case_exec_history_id="20180811093422" WHERE executed_history_id = 20180811093421 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:22,742 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:34:22,776 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:34:22,788 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:22,788 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:34:22,905 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:34:22,906 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:34:22,906 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:34:22,906 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:22,906 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093422', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:23,024 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:34:23,024 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:34:23,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:23,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:23,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:23,024 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:34:23,024 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:34:23,025 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:34:23,102 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:34:23,102 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:34:23,102 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:34:27 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:34:23,102 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:34:23,102 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:34:23,102 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:34:23,102 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:34:23,102 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:23,102 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:23,103 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:23,103 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:34:23,103 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:34:23",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811093422 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:23,217 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:34:23,218 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:34:23,218 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:23,218 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093422', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:23,330 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:34:23,330 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:34:23,330 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:34:23" WHERE executed_history_id = 20180811093422 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 09:34:23,441 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:23,442 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:34:22", case_exec_history_id="20180811093422" WHERE executed_history_id = 20180811093421 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:23,576 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:34:23,611 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:34:23,624 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:23,624 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:34:23,737 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:34:23,738 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:34:23,738 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:23,738 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:34:23", case_exec_history_id="20180811093423" WHERE executed_history_id = 20180811093421 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:23,863 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:34:23,879 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 09:34:23,893 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 09:34:23,893 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 09:34:23,912 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:34:23,929 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:34:23,942 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:23,942 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:34:24,056 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:34:24,056 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:34:24,056 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:34:24,056 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:24,056 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093424', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:24,176 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:34:24,176 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:34:24,176 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,177 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,177 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,177 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:34:24,177 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:34:24,177 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:34:24,254 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:34:24,255 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:34:24,255 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:34:28 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:34:24,255 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:34:24,255 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:34:24,255 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:34:24,255 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:34:24,255 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:34:24",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811093424 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:24,384 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:34:24,384 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:24,384 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:34:24", case_exec_history_id="20180811093424" WHERE executed_history_id = 20180811093421 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:24,530 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:34:24,562 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:34:24,575 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:24,576 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:34:24,688 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:34:24,688 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:34:24,688 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:34:24,689 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:24,689 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093424', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:24,806 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:34:24,806 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:34:24,806 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,806 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,806 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:34:24,806 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:34:24,806 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:34:24,806 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:34:24,882 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:34:24,883 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:34:24,883 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:34:29 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:34:24,883 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:34:24,883 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:34:24,883 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:34:24,883 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:34:24,883 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:24,883 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:24,883 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:34:24,884 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:34:24,884 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:34:24",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811093424 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:25,001 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:34:25,001 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:34:25,001 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:34:25,001 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093424', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:34:25,118 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:34:25,118 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:34:25,118 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:34:25" WHERE executed_history_id = 20180811093424 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 09:34:25,232 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:25,232 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:34:24", case_exec_history_id="20180811093424" WHERE executed_history_id = 20180811093421 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:25,359 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:34:25,390 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:34:25,403 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:34:25,403 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811093421', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:34:25,516 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:34:25,516 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:34:25,516 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:34:25,516 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:34:25", case_exec_history_id="20180811093425" WHERE executed_history_id = 20180811093421 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:34:25,645 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:34:25,660 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 09:34:25,660 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:34:25,661 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 09:34:25,661 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811093421',)
2018-08-11 09:34:25,767 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 09:34:25,767 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811093421')
2018-08-11 09:34:25,875 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 09:34:25,876 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811093421')
2018-08-11 09:34:25,987 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 09:34:25,987 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811093421')
2018-08-11 09:34:26,095 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 09:34:26,095 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811093421')
2018-08-11 09:34:26,202 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 09:34:26,202 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811093421',)
2018-08-11 09:34:26,312 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 09:34:26,312 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811093421')
2018-08-11 09:34:26,423 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 09:34:26,423 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 09:34:26,423 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811093421')
2018-08-11 09:34:26,537 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 09:34:26,539 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 09:34:26,539 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811093421',)
2018-08-11 09:34:26,653 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 09:34:26,653 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811093421')
2018-08-11 09:34:26,761 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:34:26,762 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811093422')
2018-08-11 09:34:26,873 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:34:26,873 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811093422')
2018-08-11 09:34:26,985 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:34:26,985 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811093423')
2018-08-11 09:34:27,096 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 09:34:27,096 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811093421')
2018-08-11 09:34:27,208 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:34:27,208 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811093424')
2018-08-11 09:34:27,321 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:34:27,321 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811093424')
2018-08-11 09:34:27,434 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:34:27,434 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811093425')
2018-08-11 09:34:27,544 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 09:34:27,544 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811093421.html
2018-08-11 09:34:27,544 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 09:34:27,547 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 09:34:28,778 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811093421.html
2018-08-11 09:34:28,779 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 09:34:29,579 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 09:42:32,038 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 09:42:32,038 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 09:42:32,259 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 09:42:32,471 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 09:42:32,738 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 09:42:32,738 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 09:42:32,864 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 09:42:32,865 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 09:42:32,979 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 09:42:32,980 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 09:42:32,980 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 09:42:32,981 main.py [line: 114] INFO: 运行指定项目
2018-08-11 09:42:33,015 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 09:42:33,017 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 09:42:33,017 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 09:42:33,017 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 09:42:33,018 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 09:42:33,033 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 09:42:33,049 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 09:42:33,050 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 09:42:33,072 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:42:33,089 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:42:33,105 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:33,105 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:42:33,220 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:42:33,221 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:42:33,221 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:42:33,222 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:33,222 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094233', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:33,342 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:42:33,344 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:42:33,347 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,348 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,348 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,349 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:42:33,349 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:42:33,349 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:42:33,441 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:42:33,442 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:42:33,442 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:42:37 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=2qfgrbfp2qmonse9m5293uk547; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:42:33,443 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:42:33,443 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:42:33,443 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:42:33,445 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:42:33,445 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:42:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811094233 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:33,560 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:42:33,561 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:33,561 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:42:33", case_exec_history_id="20180811094233" WHERE executed_history_id = 20180811094232 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:33,692 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:42:33,726 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:42:33,739 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:33,740 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:42:33,855 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:42:33,856 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:42:33,856 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:42:33,857 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:33,857 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094233', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:33,971 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:42:33,971 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:42:33,972 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,972 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,972 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:33,972 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:42:33,972 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:42:33,973 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:42:34,052 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:42:34,053 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:42:34,053 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:42:38 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:42:34,054 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:42:34,054 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:42:34,054 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:42:34,054 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:42:34,054 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:34,055 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:34,055 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:34,056 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:42:34,056 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:42:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811094233 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:34,173 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:42:34,173 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:42:34,173 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:34,174 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094233', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:34,287 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:42:34,288 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:42:34,288 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:42:34" WHERE executed_history_id = 20180811094233 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 09:42:34,409 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:34,409 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:42:33", case_exec_history_id="20180811094233" WHERE executed_history_id = 20180811094232 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:34,537 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:42:34,570 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:42:34,583 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:34,586 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:42:34,707 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:42:34,707 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:42:34,707 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:34,707 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:42:34", case_exec_history_id="20180811094234" WHERE executed_history_id = 20180811094232 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:34,858 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:42:34,887 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 09:42:34,922 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 09:42:34,923 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 09:42:34,955 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 09:42:35,000 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 09:42:35,025 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:35,026 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 09:42:35,144 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 09:42:35,145 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:42:35,145 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 09:42:35,146 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:35,146 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094235', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:35,277 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:42:35,277 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:42:35,277 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,277 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,278 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,279 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:42:35,280 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:42:35,280 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:42:35,356 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:42:35,357 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:42:35,357 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:42:39 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:42:35,359 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:42:35,359 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:42:35,359 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 09:42:35,360 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:42:35,360 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:42:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811094235 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:35,477 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 09:42:35,478 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:35,478 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:42:35", case_exec_history_id="20180811094235" WHERE executed_history_id = 20180811094232 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:35,605 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 09:42:35,638 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 09:42:35,652 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:35,653 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 09:42:35,768 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 09:42:35,768 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 09:42:35,769 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:42:35,769 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:35,769 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094235', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:35,886 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 09:42:35,886 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 09:42:35,886 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,886 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,887 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 09:42:35,887 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 09:42:35,887 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 09:42:35,887 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 09:42:35,960 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 09:42:35,961 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 09:42:35,961 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 01:42:40 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 09:42:35,961 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 09:42:35,962 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 09:42:35,962 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 09:42:35,962 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 09:42:35,962 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:35,963 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:35,963 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 09:42:35,964 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 09:42:35,964 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 09:42:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811094235 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:36,081 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 09:42:36,082 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 09:42:36,082 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 09:42:36,083 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094235', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 09:42:36,199 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 09:42:36,199 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 09:42:36,200 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 09:42:36" WHERE executed_history_id = 20180811094235 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 09:42:36,358 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:36,358 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 09:42:35", case_exec_history_id="20180811094235" WHERE executed_history_id = 20180811094232 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:36,487 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 09:42:36,519 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 09:42:36,533 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 09:42:36,534 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811094232', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 09:42:36,656 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 09:42:36,656 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 09:42:36,656 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 09:42:36,657 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 09:42:36", case_exec_history_id="20180811094236" WHERE executed_history_id = 20180811094232 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 09:42:36,782 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 09:42:36,798 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 09:42:36,799 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 09:42:36,800 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 09:42:36,801 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811094232',)
2018-08-11 09:42:36,912 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 09:42:36,913 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811094232')
2018-08-11 09:42:37,020 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 09:42:37,020 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811094232')
2018-08-11 09:42:37,132 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 09:42:37,133 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811094232')
2018-08-11 09:42:37,243 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 09:42:37,243 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811094232')
2018-08-11 09:42:37,351 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 09:42:37,352 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811094232',)
2018-08-11 09:42:37,462 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 09:42:37,462 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811094232')
2018-08-11 09:42:37,573 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 09:42:37,573 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 09:42:37,573 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811094232')
2018-08-11 09:42:37,685 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 09:42:37,685 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 09:42:37,686 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811094232',)
2018-08-11 09:42:37,792 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 09:42:37,792 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811094232')
2018-08-11 09:42:37,903 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:42:37,903 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811094233')
2018-08-11 09:42:38,013 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:42:38,014 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811094233')
2018-08-11 09:42:38,135 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:42:38,135 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811094234')
2018-08-11 09:42:38,245 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 09:42:38,246 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811094232')
2018-08-11 09:42:38,357 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 09:42:38,358 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811094235')
2018-08-11 09:42:38,473 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 09:42:38,474 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811094235')
2018-08-11 09:42:38,589 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 09:42:38,589 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811094236')
2018-08-11 09:42:38,701 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 09:42:38,702 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811094232.html
2018-08-11 09:42:38,702 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 09:42:38,707 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 09:42:39,996 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811094232.html
2018-08-11 09:42:39,998 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 09:42:40,691 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 10:03:14,813 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 10:03:14,814 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 10:03:15,038 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 10:03:15,258 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 10:03:15,476 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 10:03:15,476 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 10:03:15,591 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 10:03:15,591 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 10:03:15,704 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 10:03:15,705 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 10:03:15,705 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 10:03:15,705 main.py [line: 114] INFO: 运行指定项目
2018-08-11 10:03:15,745 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 10:03:15,746 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 10:03:15,746 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 10:03:15,746 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 10:03:15,746 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 10:03:15,761 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 10:03:15,774 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 10:03:15,774 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 10:03:15,803 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:03:15,820 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:03:15,838 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:15,838 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:03:15,980 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:03:15,980 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:03:15,980 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:03:15,980 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:15,980 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:16,094 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:03:16,094 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:03:16,094 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,094 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,095 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,095 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:03:16,095 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:03:16,095 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:03:16,236 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:03:16,236 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:03:16,236 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:03:20 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=g7g4p7a6afbcpubtenmk4v8h91; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:03:16,237 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:03:16,237 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:03:16,237 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:03:16,237 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:03:16,237 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:03:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811100315 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:16,356 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:03:16,356 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:16,356 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:03:15", case_exec_history_id="20180811100315" WHERE executed_history_id = 20180811100315 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:16,485 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:03:16,519 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:03:16,533 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:16,533 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:03:16,644 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:03:16,644 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:03:16,644 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:03:16,644 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:16,644 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100316', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:16,761 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:03:16,761 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:03:16,761 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,761 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,762 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:16,762 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:03:16,762 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:03:16,762 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:03:16,838 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:03:16,838 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:03:16,838 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:03:21 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:03:16,839 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:03:16,839 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:03:16,839 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:03:16,839 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:03:16,839 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:16,839 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:16,839 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:16,839 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:03:16,839 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:03:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811100316 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:16,952 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:03:16,952 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:03:16,952 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:16,952 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100316', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:17,064 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:03:17,064 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:03:17,064 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:03:17" WHERE executed_history_id = 20180811100316 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 10:03:17,178 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:17,178 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:03:16", case_exec_history_id="20180811100316" WHERE executed_history_id = 20180811100315 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:17,302 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:03:17,334 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:03:17,346 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:17,346 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:03:17,460 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:03:17,460 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:03:17,460 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:17,460 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:03:17", case_exec_history_id="20180811100317" WHERE executed_history_id = 20180811100315 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:17,588 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:03:17,603 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 10:03:17,617 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 10:03:17,617 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 10:03:17,636 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:03:17,651 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:03:17,663 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:17,663 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:03:17,783 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:03:17,783 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:03:17,783 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:03:17,783 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:17,783 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100317', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:17,902 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:03:17,902 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:03:17,903 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:17,903 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:17,903 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:17,903 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:03:17,903 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:03:17,903 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:03:17,984 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:03:17,984 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:03:17,984 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:03:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:03:17,984 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:03:17,984 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:03:17,984 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:03:17,985 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:03:17,985 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:03:17",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811100317 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:18,114 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:03:18,114 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:18,114 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:03:17", case_exec_history_id="20180811100317" WHERE executed_history_id = 20180811100315 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:18,239 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:03:18,273 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:03:18,286 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:18,286 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:03:18,400 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:03:18,400 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:03:18,400 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:03:18,400 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:18,400 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100318', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:18,515 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:03:18,515 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:03:18,515 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:18,515 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:18,515 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:03:18,515 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:03:18,515 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:03:18,516 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:03:18,593 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:03:18,594 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:03:18,594 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:03:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:03:18,594 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:03:18,594 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:03:18,594 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:03:18,594 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:03:18,594 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:18,594 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:18,594 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:03:18,595 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:03:18,595 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:03:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811100318 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:18,710 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:03:18,711 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:03:18,711 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:03:18,711 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100318', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:03:18,825 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:03:18,826 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:03:18,826 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:03:18" WHERE executed_history_id = 20180811100318 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 10:03:18,948 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:18,948 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:03:18", case_exec_history_id="20180811100318" WHERE executed_history_id = 20180811100315 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:19,085 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:03:19,116 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:03:19,129 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:03:19,129 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100315', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:03:19,246 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:03:19,246 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:03:19,247 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:03:19,247 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:03:19", case_exec_history_id="20180811100319" WHERE executed_history_id = 20180811100315 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:03:19,372 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:03:19,388 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 10:03:19,388 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 10:03:19,389 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 10:03:19,389 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811100315',)
2018-08-11 10:03:19,493 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 10:03:19,493 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811100315')
2018-08-11 10:03:19,600 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 10:03:19,601 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811100315')
2018-08-11 10:03:19,707 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 10:03:19,708 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811100315')
2018-08-11 10:03:19,815 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 10:03:19,815 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811100315')
2018-08-11 10:03:19,922 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 10:03:19,922 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811100315',)
2018-08-11 10:03:20,028 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 10:03:20,029 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811100315')
2018-08-11 10:03:20,139 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 10:03:20,139 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 10:03:20,139 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811100315')
2018-08-11 10:03:20,255 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 10:03:20,256 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 10:03:20,256 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811100315',)
2018-08-11 10:03:20,363 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 10:03:20,363 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811100315')
2018-08-11 10:03:20,475 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:03:20,475 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811100315')
2018-08-11 10:03:20,585 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:03:20,586 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811100316')
2018-08-11 10:03:20,697 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:03:20,697 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811100317')
2018-08-11 10:03:20,805 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 10:03:20,805 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811100315')
2018-08-11 10:03:20,913 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:03:20,913 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811100317')
2018-08-11 10:03:21,023 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:03:21,023 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811100318')
2018-08-11 10:03:21,133 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:03:21,133 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811100319')
2018-08-11 10:03:21,243 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 10:03:21,243 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811100315.html
2018-08-11 10:03:21,243 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 10:03:21,245 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 10:03:22,331 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811100315.html
2018-08-11 10:03:22,331 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 10:03:27,571 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 10:07:48,854 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 10:07:48,855 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 10:07:49,081 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 10:07:49,302 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 10:07:49,569 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 10:07:49,569 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 10:07:49,685 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 10:07:49,685 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 10:07:49,801 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 10:07:49,802 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 10:07:49,803 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 10:07:49,803 main.py [line: 114] INFO: 运行指定项目
2018-08-11 10:07:49,835 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 10:07:49,835 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 10:07:49,835 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 10:07:49,836 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 10:07:49,836 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 10:07:49,848 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 10:07:49,863 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 10:07:49,866 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 10:07:49,890 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:07:49,907 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:07:49,923 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:49,924 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:07:50,046 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:07:50,047 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:07:50,047 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:07:50,047 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:50,047 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100750', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:50,167 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:07:50,167 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:07:50,168 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,168 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,168 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,169 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:07:50,169 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:07:50,169 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:07:50,249 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:07:50,250 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:07:50,251 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:07:54 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=3p3jhija31f3cmqhns2ojudst0; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:07:50,251 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:07:50,252 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:07:50,252 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:07:50,253 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:07:50,253 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:07:50",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811100750 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:50,366 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:07:50,366 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:50,367 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:07:50", case_exec_history_id="20180811100750" WHERE executed_history_id = 20180811100749 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:50,497 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:07:50,530 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:07:50,545 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:50,545 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:07:50,675 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:07:50,675 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:07:50,675 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:07:50,676 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:50,677 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100750', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:50,794 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:07:50,794 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:07:50,795 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,795 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,795 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:50,795 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:07:50,795 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:07:50,796 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:07:50,872 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:07:50,872 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:07:50,873 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:07:55 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:07:50,873 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:07:50,873 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:07:50,874 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:07:50,874 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:07:50,874 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:50,874 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:50,874 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:50,875 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:07:50,876 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:07:50",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811100750 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:51,023 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:07:51,024 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:07:51,024 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:51,024 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100750', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:51,208 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:07:51,209 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:07:51,209 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:07:51" WHERE executed_history_id = 20180811100750 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 10:07:51,325 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:51,326 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:07:50", case_exec_history_id="20180811100750" WHERE executed_history_id = 20180811100749 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:51,499 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:07:51,531 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:07:51,546 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:51,547 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:07:51,668 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:07:51,669 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:07:51,669 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:51,669 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:07:51", case_exec_history_id="20180811100751" WHERE executed_history_id = 20180811100749 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:51,796 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:07:51,812 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 10:07:51,828 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 10:07:51,829 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 10:07:51,848 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:07:51,865 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:07:51,882 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:51,885 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:07:52,038 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:07:52,039 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:07:52,039 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:07:52,040 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:52,040 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100752', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:52,186 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:07:52,187 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:07:52,187 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,188 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,188 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,188 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:07:52,188 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:07:52,188 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:07:52,268 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:07:52,268 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:07:52,268 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:07:56 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:07:52,269 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:07:52,269 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:07:52,269 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:07:52,270 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:07:52,270 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:07:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811100752 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:52,382 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:07:52,383 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:52,383 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:07:52", case_exec_history_id="20180811100752" WHERE executed_history_id = 20180811100749 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:52,509 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:07:52,542 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:07:52,556 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:52,557 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:07:52,671 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:07:52,672 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:07:52,673 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:07:52,673 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:52,674 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100752', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:52,791 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:07:52,791 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:07:52,792 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,792 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,792 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:07:52,792 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:07:52,793 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:07:52,793 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:07:52,884 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:07:52,885 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:07:52,885 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:07:57 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:07:52,886 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:07:52,886 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:07:52,887 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:07:52,887 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:07:52,887 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:52,888 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:52,888 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:07:52,890 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:07:52,890 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:07:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811100752 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:53,135 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:07:53,136 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:07:53,136 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:07:53,137 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100752', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:07:53,273 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:07:53,273 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:07:53,274 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:07:53" WHERE executed_history_id = 20180811100752 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 10:07:53,454 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:53,455 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:07:52", case_exec_history_id="20180811100752" WHERE executed_history_id = 20180811100749 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:53,745 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:07:53,778 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:07:53,791 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:07:53,791 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811100749', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:07:53,913 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:07:53,913 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:07:53,914 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:07:53,914 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:07:53", case_exec_history_id="20180811100753" WHERE executed_history_id = 20180811100749 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:07:54,083 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:07:54,098 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 10:07:54,098 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 10:07:54,099 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 10:07:54,099 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811100749',)
2018-08-11 10:07:54,283 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 10:07:54,283 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811100749')
2018-08-11 10:07:54,507 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 10:07:54,507 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811100749')
2018-08-11 10:07:54,638 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 10:07:54,638 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811100749')
2018-08-11 10:07:54,814 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 10:07:54,814 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811100749')
2018-08-11 10:07:55,015 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 10:07:55,015 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811100749',)
2018-08-11 10:07:55,156 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 10:07:55,157 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811100749')
2018-08-11 10:07:55,267 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 10:07:55,268 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 10:07:55,268 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811100749')
2018-08-11 10:07:55,380 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 10:07:55,380 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 10:07:55,380 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811100749',)
2018-08-11 10:07:55,493 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 10:07:55,493 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811100749')
2018-08-11 10:07:55,602 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:07:55,603 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811100750')
2018-08-11 10:07:55,715 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:07:55,716 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811100750')
2018-08-11 10:07:55,830 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:07:55,831 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811100751')
2018-08-11 10:07:55,949 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 10:07:55,949 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811100749')
2018-08-11 10:07:56,082 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:07:56,083 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811100752')
2018-08-11 10:07:56,196 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:07:56,196 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811100752')
2018-08-11 10:07:56,310 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:07:56,310 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811100753')
2018-08-11 10:07:56,421 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 10:07:56,421 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：C:\\Users\Administrator\\Tester\\01_API-AutoTest\\reporttest_report20180811100749.html
2018-08-11 10:07:56,422 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 10:07:56,425 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 10:07:57,711 main.py [line: 241] INFO: C:\\Users\Administrator\\Tester\\01_API-AutoTest\\reporttest_report20180811100749.html
2018-08-11 10:07:57,712 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 10:07:58,365 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 10:12:58,308 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 10:12:58,309 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 10:12:58,535 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 10:12:58,752 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 10:12:59,027 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 10:12:59,028 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 10:12:59,155 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 10:12:59,156 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 10:12:59,270 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 10:12:59,272 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 10:12:59,272 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 10:12:59,272 main.py [line: 114] INFO: 运行指定项目
2018-08-11 10:12:59,304 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 10:12:59,305 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 10:12:59,305 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 10:12:59,305 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 10:12:59,305 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 10:12:59,318 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 10:12:59,335 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 10:12:59,336 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 10:12:59,359 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:12:59,379 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:12:59,391 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:12:59,393 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:12:59,520 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:12:59,520 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:12:59,521 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:12:59,521 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:12:59,522 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101259', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:12:59,645 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:12:59,646 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:12:59,646 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:12:59,646 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:12:59,647 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:12:59,647 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:12:59,648 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:12:59,648 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:12:59,740 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:12:59,741 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:12:59,742 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:13:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ann0mornotvg4b1s9gj89pp2q2; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:12:59,742 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:12:59,742 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:12:59,742 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:12:59,743 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:12:59,744 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:12:59",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811101259 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:12:59,859 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:12:59,859 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:12:59,860 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:12:59", case_exec_history_id="20180811101259" WHERE executed_history_id = 20180811101258 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:12:59,994 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:13:00,029 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:13:00,043 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:13:00,044 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:13:00,159 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:13:00,160 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:13:00,160 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:13:00,160 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:13:00,161 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101300', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:13:00,276 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:13:00,276 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:13:00,277 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:00,277 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:00,278 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:00,278 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:13:00,278 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:13:00,278 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:13:00,354 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:13:00,354 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:13:00,355 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:13:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:13:00,355 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:13:00,355 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:13:00,356 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:13:00,356 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:13:00,356 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:00,356 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:00,356 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:00,357 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:13:00,358 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:13:00",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811101300 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:00,472 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:13:00,473 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:13:00,474 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:13:00,474 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101300', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:13:00,600 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:13:00,601 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:13:00,601 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:13:00" WHERE executed_history_id = 20180811101300 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 10:13:00,716 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:13:00,716 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:13:00", case_exec_history_id="20180811101300" WHERE executed_history_id = 20180811101258 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:00,844 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:13:00,876 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:13:00,890 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:13:00,890 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:13:01,010 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:13:01,010 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:13:01,011 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:13:01,011 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:13:01", case_exec_history_id="20180811101301" WHERE executed_history_id = 20180811101258 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:01,143 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:13:01,159 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 10:13:01,172 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 10:13:01,172 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 10:13:01,191 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 10:13:01,208 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 10:13:01,223 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:13:01,224 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 10:13:01,358 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 10:13:01,359 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:13:01,359 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 10:13:01,359 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:13:01,360 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101301', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:13:01,481 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:13:01,481 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:13:01,481 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:01,482 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:01,482 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:01,482 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:13:01,483 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:13:01,483 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:13:01,561 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:13:01,562 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:13:01,562 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:13:05 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:13:01,562 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:13:01,562 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:13:01,563 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 10:13:01,564 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:13:01,564 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:13:01",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811101301 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:01,677 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 10:13:01,678 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:13:01,678 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:13:01", case_exec_history_id="20180811101301" WHERE executed_history_id = 20180811101258 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:01,810 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 10:13:01,846 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 10:13:01,872 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:13:01,872 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 10:13:02,003 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 10:13:02,003 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 10:13:02,004 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:13:02,004 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:13:02,004 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101302', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:13:02,122 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 10:13:02,124 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 10:13:02,126 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:02,126 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:02,126 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 10:13:02,127 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 10:13:02,127 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 10:13:02,128 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 10:13:02,205 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 10:13:02,206 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 10:13:02,206 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 02:13:06 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 10:13:02,206 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 10:13:02,207 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 10:13:02,207 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 10:13:02,207 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 10:13:02,207 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:02,208 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:02,208 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 10:13:02,209 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 10:13:02,209 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 10:13:02",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811101302 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:02,326 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 10:13:02,327 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 10:13:02,328 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 10:13:02,328 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101302', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 10:13:02,455 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 10:13:02,456 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 10:13:02,456 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 10:13:02" WHERE executed_history_id = 20180811101302 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 10:13:02,575 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:13:02,575 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 10:13:02", case_exec_history_id="20180811101302" WHERE executed_history_id = 20180811101258 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:02,717 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 10:13:02,749 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 10:13:02,762 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 10:13:02,762 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811101258', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 10:13:02,876 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 10:13:02,877 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 10:13:02,877 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 10:13:02,877 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 10:13:02", case_exec_history_id="20180811101302" WHERE executed_history_id = 20180811101258 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 10:13:03,020 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 10:13:03,036 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 10:13:03,036 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 10:13:03,037 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 10:13:03,038 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811101258',)
2018-08-11 10:13:03,147 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 10:13:03,147 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811101258')
2018-08-11 10:13:03,257 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 10:13:03,257 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811101258')
2018-08-11 10:13:03,372 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 10:13:03,372 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811101258')
2018-08-11 10:13:03,504 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 10:13:03,505 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811101258')
2018-08-11 10:13:03,616 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 10:13:03,616 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811101258',)
2018-08-11 10:13:03,726 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 10:13:03,727 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811101258')
2018-08-11 10:13:03,838 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 10:13:03,839 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 10:13:03,839 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811101258')
2018-08-11 10:13:03,950 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 10:13:03,950 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 10:13:03,951 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811101258',)
2018-08-11 10:13:04,065 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 10:13:04,067 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811101258')
2018-08-11 10:13:04,187 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:13:04,188 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811101259')
2018-08-11 10:13:04,302 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:13:04,303 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811101300')
2018-08-11 10:13:04,415 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:13:04,416 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811101301')
2018-08-11 10:13:04,526 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 10:13:04,527 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811101258')
2018-08-11 10:13:04,639 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 10:13:04,640 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811101301')
2018-08-11 10:13:04,749 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 10:13:04,750 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811101302')
2018-08-11 10:13:04,864 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 10:13:04,864 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811101302')
2018-08-11 10:13:04,978 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 10:13:04,979 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：C:\\Users\Administrator\\Tester\\01_API-AutoTest\\report\\test_report20180811101258.html
2018-08-11 10:13:04,979 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 10:13:04,983 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 10:13:06,117 main.py [line: 241] INFO: C:\\Users\Administrator\\Tester\\01_API-AutoTest\\report\\test_report20180811101258.html
2018-08-11 10:13:06,117 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 10:13:06,922 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 11:14:36,199 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 11:14:36,199 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 11:14:36,426 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 11:14:36,646 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 11:14:36,853 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 11:14:36,853 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 11:14:36,975 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 11:14:36,976 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 11:14:37,090 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 11:14:37,091 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 11:14:37,091 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 11:14:37,091 main.py [line: 114] INFO: 运行指定项目
2018-08-11 11:14:37,124 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 11:14:37,124 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 11:14:37,124 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 11:14:37,124 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 11:14:37,124 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 11:14:37,137 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 11:14:37,150 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 11:14:37,150 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 11:14:37,171 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 11:14:37,189 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 11:14:37,202 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:37,202 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 11:14:37,318 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 11:14:37,318 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 11:14:37,318 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 11:14:37,318 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:37,319 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111437', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:37,433 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 11:14:37,433 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 11:14:37,434 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:37,434 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:37,434 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:37,434 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 11:14:37,434 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 11:14:37,434 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 11:14:37,583 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 11:14:37,584 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 11:14:37,584 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 03:14:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=6s5q3e68lemkjrjca1ikfvbtj3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 11:14:37,584 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 11:14:37,584 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 11:14:37,584 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 11:14:37,585 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 11:14:37,585 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 11:14:37",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811111437 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:37,698 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 11:14:37,699 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:37,699 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 11:14:37", case_exec_history_id="20180811111437" WHERE executed_history_id = 20180811111436 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:37,842 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 11:14:37,879 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 11:14:37,892 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:37,892 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 11:14:38,028 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 11:14:38,029 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 11:14:38,029 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 11:14:38,029 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:38,029 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111438', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:38,144 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 11:14:38,144 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 11:14:38,145 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:38,145 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:38,145 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:38,145 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 11:14:38,145 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 11:14:38,145 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 11:14:38,224 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 11:14:38,224 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 11:14:38,224 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 03:14:42 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 11:14:38,225 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 11:14:38,225 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 11:14:38,225 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 11:14:38,225 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 11:14:38,225 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:38,225 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:38,225 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:38,226 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 11:14:38,226 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 11:14:38",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811111438 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:38,338 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 11:14:38,339 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 11:14:38,339 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:38,339 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111438', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:38,458 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 11:14:38,458 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 11:14:38,458 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 11:14:38" WHERE executed_history_id = 20180811111438 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 11:14:38,572 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:38,572 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 11:14:38", case_exec_history_id="20180811111438" WHERE executed_history_id = 20180811111436 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:38,701 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 11:14:38,733 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 11:14:38,746 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:38,746 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 11:14:38,863 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 11:14:38,863 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 11:14:38,863 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:38,863 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 11:14:38", case_exec_history_id="20180811111438" WHERE executed_history_id = 20180811111436 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:38,997 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 11:14:39,012 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 11:14:39,025 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 11:14:39,025 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 11:14:39,044 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 11:14:39,062 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 11:14:39,075 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:39,075 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 11:14:39,214 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 11:14:39,214 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 11:14:39,215 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 11:14:39,215 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:39,216 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111439', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:39,353 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 11:14:39,353 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 11:14:39,353 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:39,353 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:39,353 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:39,353 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 11:14:39,353 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 11:14:39,353 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 11:14:39,432 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 11:14:39,432 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 11:14:39,433 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 03:14:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 11:14:39,433 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 11:14:39,433 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 11:14:39,434 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 11:14:39,435 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 11:14:39,435 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 11:14:39",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811111439 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:39,556 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 11:14:39,556 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:39,557 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 11:14:39", case_exec_history_id="20180811111439" WHERE executed_history_id = 20180811111436 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:39,686 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 11:14:39,720 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 11:14:39,732 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:39,732 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 11:14:39,892 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 11:14:39,893 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 11:14:39,893 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 11:14:39,893 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:39,893 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111439', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:40,013 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 11:14:40,013 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 11:14:40,013 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:40,013 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:40,013 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 11:14:40,013 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 11:14:40,013 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 11:14:40,013 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 11:14:40,090 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 11:14:40,090 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 11:14:40,090 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 03:14:44 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 11:14:40,090 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 11:14:40,090 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 11:14:40,090 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 11:14:40,090 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 11:14:40,091 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:40,091 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:40,091 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 11:14:40,091 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 11:14:40,091 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 11:14:40",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811111439 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:40,208 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 11:14:40,208 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 11:14:40,208 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 11:14:40,208 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111439', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 11:14:40,363 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 11:14:40,363 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 11:14:40,363 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 11:14:40" WHERE executed_history_id = 20180811111439 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 11:14:40,482 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:40,482 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 11:14:39", case_exec_history_id="20180811111439" WHERE executed_history_id = 20180811111436 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:40,636 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 11:14:40,668 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 11:14:40,680 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 11:14:40,680 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811111436', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 11:14:40,795 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 11:14:40,795 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 11:14:40,795 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 11:14:40,795 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 11:14:40", case_exec_history_id="20180811111440" WHERE executed_history_id = 20180811111436 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 11:14:40,931 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 11:14:40,948 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 11:14:40,949 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 11:14:40,953 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 11:14:40,954 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811111436',)
2018-08-11 11:14:41,064 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 11:14:41,064 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811111436')
2018-08-11 11:14:41,180 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 11:14:41,180 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811111436')
2018-08-11 11:14:41,290 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 11:14:41,290 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811111436')
2018-08-11 11:14:41,400 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 11:14:41,400 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811111436')
2018-08-11 11:14:41,513 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 11:14:41,513 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811111436',)
2018-08-11 11:14:41,620 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 11:14:41,621 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811111436')
2018-08-11 11:14:41,732 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 11:14:41,733 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 11:14:41,733 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811111436')
2018-08-11 11:14:41,843 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 11:14:41,843 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 11:14:41,843 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811111436',)
2018-08-11 11:14:41,954 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 11:14:41,954 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811111436')
2018-08-11 11:14:42,064 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 11:14:42,064 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811111437')
2018-08-11 11:14:42,180 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 11:14:42,180 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811111438')
2018-08-11 11:14:42,293 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 11:14:42,293 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811111438')
2018-08-11 11:14:42,406 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 11:14:42,406 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811111436')
2018-08-11 11:14:42,515 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 11:14:42,516 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811111439')
2018-08-11 11:14:42,626 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 11:14:42,627 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811111439')
2018-08-11 11:14:42,740 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 11:14:42,740 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811111440')
2018-08-11 11:14:42,849 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 11:14:42,850 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：C:\\Users\Administrator\\Tester\\01_API-AutoTest\\report\\test_report20180811111436.html
2018-08-11 11:14:42,850 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 11:14:42,852 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 11:14:44,300 main.py [line: 241] INFO: C:\\Users\Administrator\\Tester\\01_API-AutoTest\\report\\test_report20180811111436.html
2018-08-11 11:14:44,300 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 11:14:50,061 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 12:12:24,779 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 12:12:24,779 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 12:12:25,009 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 12:12:25,264 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 12:12:25,547 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 12:12:25,547 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 12:12:25,659 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 12:12:25,659 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 12:12:25,774 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 12:12:25,775 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 12:12:25,776 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 12:12:25,776 main.py [line: 114] INFO: 运行指定项目
2018-08-11 12:12:25,811 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 12:12:25,811 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 12:12:25,812 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 12:12:25,812 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 12:12:25,812 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 12:12:25,826 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 12:12:25,841 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 12:12:25,841 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 12:12:25,863 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 12:12:25,885 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 12:12:25,900 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:25,903 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 12:12:26,018 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 12:12:26,019 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:12:26,019 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 12:12:26,019 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:26,019 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121226', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:26,140 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:12:26,141 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:12:26,141 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:26,142 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:26,142 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:26,143 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:12:26,143 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:12:26,143 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:12:26,296 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:12:26,297 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:12:26,297 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:12:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=vcogrn2qj372noeg85b11n1sl4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:12:26,298 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:12:26,298 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:12:26,299 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 12:12:26,300 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:12:26,300 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:12:26",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811121226 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:26,515 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 12:12:26,515 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:26,515 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:12:26", case_exec_history_id="20180811121226" WHERE executed_history_id = 20180811121225 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:26,721 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 12:12:26,756 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 12:12:26,769 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:26,769 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 12:12:26,918 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 12:12:26,918 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:12:26,919 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:12:26,919 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:26,920 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121226', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:27,056 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:12:27,057 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:12:27,057 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:27,057 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:27,058 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:27,058 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:12:27,058 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:12:27,058 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:12:27,149 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:12:27,149 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:12:27,149 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:12:31 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:12:27,150 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:12:27,150 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:12:27,150 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 12:12:27,151 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 12:12:27,151 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:27,151 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:27,152 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:27,153 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:12:27,153 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:12:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811121226 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:27,272 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 12:12:27,272 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:12:27,273 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:27,273 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121226', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:27,393 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 12:12:27,394 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 12:12:27,394 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 12:12:27" WHERE executed_history_id = 20180811121226 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 12:12:27,523 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:27,524 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 12:12:26", case_exec_history_id="20180811121226" WHERE executed_history_id = 20180811121225 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:27,667 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 12:12:27,699 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 12:12:27,713 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:27,713 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 12:12:27,838 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 12:12:27,838 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 12:12:27,839 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:27,839 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:12:27", case_exec_history_id="20180811121227" WHERE executed_history_id = 20180811121225 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:27,971 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 12:12:27,987 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 12:12:28,001 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 12:12:28,002 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 12:12:28,021 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 12:12:28,039 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 12:12:28,053 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:28,054 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 12:12:28,180 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 12:12:28,181 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:12:28,182 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 12:12:28,182 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:28,182 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121228', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:28,302 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:12:28,302 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:12:28,302 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:28,302 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:28,303 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:28,303 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:12:28,303 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:12:28,303 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:12:28,394 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:12:28,394 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:12:28,395 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:12:32 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:12:28,395 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:12:28,395 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:12:28,395 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 12:12:28,396 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:12:28,396 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:12:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811121228 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:28,514 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 12:12:28,514 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:28,514 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:12:28", case_exec_history_id="20180811121228" WHERE executed_history_id = 20180811121225 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:28,710 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 12:12:28,742 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 12:12:28,756 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:28,757 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 12:12:28,874 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 12:12:28,876 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:12:28,878 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:12:28,880 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:28,881 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121228', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:29,002 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:12:29,004 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:12:29,006 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:29,007 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:29,009 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:12:29,010 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:12:29,012 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:12:29,014 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:12:29,103 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:12:29,104 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:12:29,105 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:12:33 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:12:29,105 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:12:29,106 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:12:29,106 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 12:12:29,106 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 12:12:29,107 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:29,107 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:29,107 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:12:29,109 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:12:29,109 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:12:29",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811121228 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:29,233 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 12:12:29,235 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:12:29,236 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:12:29,237 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121228', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:12:29,359 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 12:12:29,359 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 12:12:29,360 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 12:12:29" WHERE executed_history_id = 20180811121228 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 12:12:29,476 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:29,476 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 12:12:28", case_exec_history_id="20180811121228" WHERE executed_history_id = 20180811121225 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:29,612 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 12:12:29,644 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 12:12:29,657 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:12:29,658 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121225', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 12:12:29,782 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 12:12:29,783 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 12:12:29,783 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:12:29,783 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:12:29", case_exec_history_id="20180811121229" WHERE executed_history_id = 20180811121225 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:12:29,911 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 12:12:29,927 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 12:12:29,928 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 12:12:29,929 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 12:12:29,929 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811121225',)
2018-08-11 12:12:30,041 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 12:12:30,041 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811121225')
2018-08-11 12:12:30,158 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 12:12:30,158 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811121225')
2018-08-11 12:12:30,362 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 12:12:30,362 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811121225')
2018-08-11 12:12:30,516 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 12:12:30,517 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811121225')
2018-08-11 12:12:30,646 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 12:12:30,646 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811121225',)
2018-08-11 12:12:30,762 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 12:12:30,763 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811121225')
2018-08-11 12:12:30,878 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 12:12:30,878 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 12:12:30,879 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811121225')
2018-08-11 12:12:30,995 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 12:12:30,996 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 12:12:30,996 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811121225',)
2018-08-11 12:12:31,107 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 12:12:31,108 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811121225')
2018-08-11 12:12:31,222 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 12:12:31,222 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811121226')
2018-08-11 12:12:31,346 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 12:12:31,348 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811121226')
2018-08-11 12:12:31,513 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 12:12:31,513 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811121227')
2018-08-11 12:12:31,653 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 12:12:31,653 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811121225')
2018-08-11 12:12:31,766 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 12:12:31,767 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811121228')
2018-08-11 12:12:31,892 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 12:12:31,893 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811121228')
2018-08-11 12:12:32,004 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 12:12:32,004 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811121229')
2018-08-11 12:12:32,120 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 12:12:32,121 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180811121225.html
2018-08-11 12:12:32,121 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 12:12:32,125 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 12:12:33,457 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180811121225.html
2018-08-11 12:12:33,457 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 12:12:34,422 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 12:14:08,884 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 12:14:08,884 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 12:14:09,115 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 12:14:09,340 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 12:14:09,633 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 12:14:09,633 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 12:14:09,746 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 12:14:09,747 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 12:14:09,861 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 12:14:09,862 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 12:14:09,863 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 12:14:09,863 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-11 12:14:09,900 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 12:14:09,947 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 12:14:09,947 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 12:14:09,948 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 12:14:09,949 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-11 12:14:09,949 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121409', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 12:14:10,069 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 12:14:10,070 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:14:10,070 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:14:10,071 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:14:10,071 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121410', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:14:10,187 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:14:10,187 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:14:10,188 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:14:10,188 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:14:10,189 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:14:10,189 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:14:10,189 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:14:10,189 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:14:10,269 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:14:10,270 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:14:10,270 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:14:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=r4n73q8ie99fdfkhmo9uph1v71; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:14:10,271 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:14:10,271 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:14:10,271 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 12:14:10,272 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 12:14:10,272 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:14:10,272 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:14:10,272 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:14:10,273 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:14:10,274 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:14:10",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811121410 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:14:10,389 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 12:14:10,390 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:14:10,391 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:14:10,391 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121410', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:14:10,510 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 12:14:10,511 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 12:14:10,511 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 12:14:10" WHERE executed_history_id = 20180811121410 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-11 12:14:10,628 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-11 12:14:10,628 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 12:14:10", case_exec_history_id="20180811121410" WHERE executed_history_id = 20180811121409 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-11 12:14:10,748 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-11 12:14:10,748 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-11 12:14:10,749 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 12:15:24,200 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 12:15:24,200 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 12:15:24,426 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 12:15:24,648 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 12:15:24,918 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 12:15:24,919 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 12:15:25,058 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 12:15:25,058 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 12:15:25,176 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 12:15:25,177 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 12:15:25,177 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 12:15:25,177 main.py [line: 114] INFO: 运行指定项目
2018-08-11 12:15:25,208 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 12:15:25,209 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 12:15:25,209 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 12:15:25,210 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 12:15:25,210 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 12:15:25,223 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 12:15:25,238 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 12:15:25,238 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 12:15:25,258 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 12:15:25,275 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 12:15:25,288 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:25,288 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 12:15:25,402 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 12:15:25,402 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:15:25,403 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 12:15:25,403 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:25,403 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121525', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:25,522 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:15:25,523 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:15:25,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:25,524 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:25,524 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:25,524 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:15:25,525 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:15:25,525 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:15:25,606 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:15:25,607 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:15:25,608 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:15:29 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=mdh11n6ohnvj7o5tp7o7sf9154; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:15:25,609 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:15:25,609 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:15:25,610 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 12:15:25,611 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:15:25,611 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:15:25",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811121525 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:25,735 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 12:15:25,735 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:25,735 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:15:25", case_exec_history_id="20180811121525" WHERE executed_history_id = 20180811121524 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:25,877 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 12:15:25,938 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 12:15:25,961 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:25,961 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 12:15:26,078 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 12:15:26,079 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:15:26,079 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:15:26,079 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:26,080 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121526', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:26,199 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:15:26,199 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:15:26,200 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:26,200 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:26,200 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:26,201 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:15:26,201 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:15:26,201 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:15:26,282 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:15:26,283 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:15:26,283 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:15:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:15:26,283 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:15:26,284 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:15:26,284 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 12:15:26,284 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 12:15:26,284 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:26,285 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:26,285 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:26,287 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:15:26,287 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:15:26",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811121526 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:26,411 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 12:15:26,412 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:15:26,414 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:26,414 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121526', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:26,567 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 12:15:26,568 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 12:15:26,568 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 12:15:26" WHERE executed_history_id = 20180811121526 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 12:15:26,682 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:26,683 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 12:15:26", case_exec_history_id="20180811121526" WHERE executed_history_id = 20180811121524 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:26,811 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 12:15:26,843 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 12:15:26,855 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:26,856 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 12:15:26,975 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 12:15:26,975 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 12:15:26,975 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:26,975 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:15:26", case_exec_history_id="20180811121526" WHERE executed_history_id = 20180811121524 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:27,103 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 12:15:27,119 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 12:15:27,133 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 12:15:27,134 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 12:15:27,154 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 12:15:27,171 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 12:15:27,187 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:27,189 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 12:15:27,309 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 12:15:27,309 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:15:27,310 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 12:15:27,312 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:27,312 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121527', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:27,444 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:15:27,444 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:15:27,444 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:27,445 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:27,445 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:27,445 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:15:27,445 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:15:27,446 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:15:27,521 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:15:27,522 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:15:27,522 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:15:31 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:15:27,523 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:15:27,523 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:15:27,523 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 12:15:27,524 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:15:27,525 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:15:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811121527 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:27,639 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 12:15:27,640 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:27,640 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:15:27", case_exec_history_id="20180811121527" WHERE executed_history_id = 20180811121524 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:27,778 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 12:15:27,813 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 12:15:27,828 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:27,829 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 12:15:27,946 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 12:15:27,946 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 12:15:27,947 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:15:27,947 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:27,947 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121527', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:28,066 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 12:15:28,069 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 12:15:28,070 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:28,071 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:28,071 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 12:15:28,071 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 12:15:28,072 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 12:15:28,072 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 12:15:28,149 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 12:15:28,150 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 12:15:28,151 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 04:15:32 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 12:15:28,151 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 12:15:28,151 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 12:15:28,152 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 12:15:28,152 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 12:15:28,152 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:28,152 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:28,152 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 12:15:28,153 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 12:15:28,154 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 12:15:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811121527 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:28,268 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 12:15:28,269 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 12:15:28,270 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 12:15:28,270 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121527', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 12:15:28,393 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 12:15:28,394 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 12:15:28,395 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 12:15:28" WHERE executed_history_id = 20180811121527 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 12:15:28,510 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:28,511 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 12:15:27", case_exec_history_id="20180811121527" WHERE executed_history_id = 20180811121524 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:28,651 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 12:15:28,684 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 12:15:28,698 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 12:15:28,700 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811121524', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 12:15:28,826 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 12:15:28,826 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 12:15:28,827 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 12:15:28,827 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 12:15:28", case_exec_history_id="20180811121528" WHERE executed_history_id = 20180811121524 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 12:15:28,964 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 12:15:28,980 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 12:15:28,980 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 12:15:28,981 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 12:15:28,981 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811121524',)
2018-08-11 12:15:29,108 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 12:15:29,109 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811121524')
2018-08-11 12:15:29,228 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 12:15:29,229 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811121524')
2018-08-11 12:15:29,342 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 12:15:29,342 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811121524')
2018-08-11 12:15:29,453 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 12:15:29,454 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811121524')
2018-08-11 12:15:29,565 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 12:15:29,566 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811121524',)
2018-08-11 12:15:29,677 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 12:15:29,678 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811121524')
2018-08-11 12:15:29,790 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 12:15:29,791 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 12:15:29,791 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811121524')
2018-08-11 12:15:29,920 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 12:15:29,921 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 12:15:29,921 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811121524',)
2018-08-11 12:15:30,031 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 12:15:30,032 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811121524')
2018-08-11 12:15:30,144 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 12:15:30,144 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811121525')
2018-08-11 12:15:30,276 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 12:15:30,277 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811121526')
2018-08-11 12:15:30,388 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 12:15:30,389 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811121526')
2018-08-11 12:15:30,501 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 12:15:30,501 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811121524')
2018-08-11 12:15:30,615 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 12:15:30,616 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811121527')
2018-08-11 12:15:30,728 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 12:15:30,728 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811121527')
2018-08-11 12:15:30,841 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 12:15:30,842 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811121528')
2018-08-11 12:15:30,954 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 12:15:30,955 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811121524.html
2018-08-11 12:15:30,955 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 12:15:30,958 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 12:15:32,315 main.py [line: 241] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811121524.html
2018-08-11 12:15:32,318 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 12:15:33,088 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 13:10:06,597 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 13:10:06,598 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 13:10:06,830 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:10:07,053 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:10:07,275 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 13:10:07,275 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 13:10:07,394 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 13:10:07,395 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:10:07,514 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 13:10:07,515 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 13:10:07,515 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 13:10:07,515 main.py [line: 114] INFO: 运行指定项目
2018-08-11 13:10:07,548 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 13:10:07,548 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 13:10:07,549 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 13:10:07,549 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 13:10:07,549 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 13:10:07,562 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 13:10:07,575 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 13:10:07,576 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 13:10:07,596 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 13:10:07,613 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 13:10:07,626 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:07,626 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 13:10:07,760 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 13:10:07,760 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:10:07,760 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 13:10:07,760 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:07,760 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:07,881 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:10:07,881 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:10:07,881 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:07,881 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:07,881 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:07,882 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:10:07,882 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:10:07,882 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:10:07,993 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:10:07,994 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:10:07,994 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:10:11 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=t8uvq7c7ujhscavrbg1o045t80; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:10:07,994 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:10:07,994 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:10:07,994 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 13:10:07,994 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:10:07,994 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:10:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811131007 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:08,109 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 13:10:08,109 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:08,109 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:10:07", case_exec_history_id="20180811131007" WHERE executed_history_id = 20180811131007 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:08,257 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 13:10:08,323 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 13:10:08,346 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:08,346 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 13:10:08,463 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 13:10:08,463 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:10:08,463 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:10:08,463 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:08,463 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131008', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:08,583 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:10:08,583 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:10:08,583 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:08,583 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:08,583 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:08,583 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:10:08,583 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:10:08,583 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:10:08,660 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:10:08,661 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:10:08,661 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:10:12 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:10:08,661 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:10:08,661 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:10:08,661 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 13:10:08,661 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 13:10:08,661 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:08,661 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:08,661 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:08,661 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:10:08,661 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:10:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811131008 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:08,777 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 13:10:08,777 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:10:08,778 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:08,778 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131008', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:08,902 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 13:10:08,902 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 13:10:08,902 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 13:10:08" WHERE executed_history_id = 20180811131008 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 13:10:09,041 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:09,041 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 13:10:08", case_exec_history_id="20180811131008" WHERE executed_history_id = 20180811131007 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:09,195 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 13:10:09,249 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 13:10:09,270 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:09,271 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 13:10:09,387 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 13:10:09,387 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 13:10:09,387 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:09,387 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:10:09", case_exec_history_id="20180811131009" WHERE executed_history_id = 20180811131007 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:09,520 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 13:10:09,543 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 13:10:09,563 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 13:10:09,563 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 13:10:09,592 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 13:10:09,616 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 13:10:09,633 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:09,633 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 13:10:09,748 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 13:10:09,748 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:10:09,748 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 13:10:09,749 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:09,749 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131009', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:09,865 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:10:09,865 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:10:09,865 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:09,865 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:09,865 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:09,865 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:10:09,865 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:10:09,865 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:10:09,947 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:10:09,948 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:10:09,948 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:10:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:10:09,948 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:10:09,948 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:10:09,948 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 13:10:09,948 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:10:09,948 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:10:09",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811131009 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:10,065 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 13:10:10,066 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:10,066 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:10:09", case_exec_history_id="20180811131009" WHERE executed_history_id = 20180811131007 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:10,202 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 13:10:10,266 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 13:10:10,288 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:10,288 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 13:10:10,404 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 13:10:10,404 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:10:10,404 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:10:10,404 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:10,404 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131010', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:10,522 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:10:10,522 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:10:10,522 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:10,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:10,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:10:10,523 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:10:10,523 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:10:10,523 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:10:10,601 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:10:10,601 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:10:10,601 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:10:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:10:10,601 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:10:10,601 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:10:10,601 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 13:10:10,601 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 13:10:10,601 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:10,601 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:10,602 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:10:10,602 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:10:10,602 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:10:10",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811131010 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:10,718 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 13:10:10,718 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:10:10,718 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:10:10,718 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131010', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:10:10,834 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 13:10:10,834 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 13:10:10,834 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 13:10:10" WHERE executed_history_id = 20180811131010 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 13:10:10,951 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:10,951 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 13:10:10", case_exec_history_id="20180811131010" WHERE executed_history_id = 20180811131007 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:11,086 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 13:10:11,118 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 13:10:11,130 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:10:11,130 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131007', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 13:10:11,283 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 13:10:11,283 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 13:10:11,283 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:10:11,283 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:10:11", case_exec_history_id="20180811131011" WHERE executed_history_id = 20180811131007 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:10:11,410 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 13:10:11,426 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 13:10:11,426 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 13:10:11,427 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 13:10:11,427 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811131007',)
2018-08-11 13:10:11,534 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 13:10:11,534 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811131007')
2018-08-11 13:10:11,649 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 13:10:11,649 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811131007')
2018-08-11 13:10:11,760 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 13:10:11,761 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811131007')
2018-08-11 13:10:11,869 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 13:10:11,869 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811131007')
2018-08-11 13:10:11,979 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 13:10:11,979 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811131007',)
2018-08-11 13:10:12,091 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 13:10:12,091 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811131007')
2018-08-11 13:10:12,201 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 13:10:12,202 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 13:10:12,202 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811131007')
2018-08-11 13:10:12,314 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 13:10:12,314 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 13:10:12,314 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811131007',)
2018-08-11 13:10:12,425 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 13:10:12,425 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811131007')
2018-08-11 13:10:12,549 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 13:10:12,549 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811131007')
2018-08-11 13:10:12,662 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 13:10:12,662 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811131008')
2018-08-11 13:10:12,775 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 13:10:12,776 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811131009')
2018-08-11 13:10:12,887 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 13:10:12,887 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811131007')
2018-08-11 13:10:13,000 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 13:10:13,000 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811131009')
2018-08-11 13:10:13,117 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 13:10:13,117 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811131010')
2018-08-11 13:10:13,234 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 13:10:13,235 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811131011')
2018-08-11 13:10:13,346 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 13:10:13,347 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811131007.html
2018-08-11 13:10:13,347 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 13:10:13,349 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 13:10:14,610 main.py [line: 241] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811131007.html
2018-08-11 13:10:14,611 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 13:10:21,255 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 13:11:17,259 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 13:11:17,259 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 13:11:17,489 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:11:17,708 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:11:17,908 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 13:11:17,908 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 13:11:18,022 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 13:11:18,023 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:11:18,136 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 13:11:18,137 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 13:11:18,137 main.py [line: 89] INFO: 按项目运行测试
2018-08-11 13:11:18,137 main.py [line: 114] INFO: 运行指定项目
2018-08-11 13:11:18,166 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 13:11:18,167 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 13:11:18,167 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-11 13:11:18,167 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 13:11:18,167 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 13:11:18,179 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 13:11:18,192 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 13:11:18,192 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 13:11:18,211 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 13:11:18,234 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 13:11:18,246 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:18,246 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 13:11:18,411 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 13:11:18,411 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:11:18,411 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 13:11:18,412 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:18,412 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131118', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:18,526 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:11:18,526 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:11:18,526 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:18,526 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:18,526 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:18,526 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:11:18,527 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:11:18,527 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:11:18,629 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:11:18,630 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:11:18,630 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:11:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=djdr84vdtdf9m80jvhrciteq77; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:11:18,630 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:11:18,630 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:11:18,630 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 13:11:18,630 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:11:18,631 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:11:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811131118 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:18,745 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 13:11:18,746 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:18,746 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:11:18", case_exec_history_id="20180811131118" WHERE executed_history_id = 20180811131117 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:18,874 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 13:11:18,907 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 13:11:18,920 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:18,920 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 13:11:19,035 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 13:11:19,035 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:11:19,035 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:11:19,035 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:19,035 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131119', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:19,152 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:11:19,153 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:11:19,153 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:19,153 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:19,153 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:19,153 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:11:19,153 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:11:19,153 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:11:19,230 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:11:19,230 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:11:19,230 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:11:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:11:19,230 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:11:19,230 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:11:19,231 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 13:11:19,231 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 13:11:19,231 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:19,231 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:19,231 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:19,231 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:11:19,231 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:11:19",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811131119 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:19,344 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 13:11:19,345 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:11:19,345 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:19,345 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131119', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:19,463 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 13:11:19,463 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 13:11:19,463 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 13:11:19" WHERE executed_history_id = 20180811131119 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 13:11:19,578 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:19,578 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 13:11:19", case_exec_history_id="20180811131119" WHERE executed_history_id = 20180811131117 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:19,707 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 13:11:19,739 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 13:11:19,751 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:19,751 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 13:11:19,865 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 13:11:19,866 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 13:11:19,866 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:19,866 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:11:19", case_exec_history_id="20180811131119" WHERE executed_history_id = 20180811131117 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:19,996 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 13:11:20,012 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 13:11:20,024 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 13:11:20,024 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 13:11:20,042 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 13:11:20,058 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 13:11:20,069 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:20,070 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 13:11:20,185 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 13:11:20,185 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:11:20,185 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 13:11:20,186 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:20,186 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131120', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:20,316 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:11:20,316 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:11:20,316 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,316 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,316 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,316 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:11:20,316 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:11:20,316 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:11:20,394 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:11:20,394 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:11:20,394 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:11:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:11:20,394 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:11:20,394 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:11:20,394 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 13:11:20,394 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:11:20,394 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:11:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811131120 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:20,509 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 13:11:20,509 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:20,509 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:11:20", case_exec_history_id="20180811131120" WHERE executed_history_id = 20180811131117 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:20,644 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 13:11:20,676 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 13:11:20,688 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:20,689 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 13:11:20,810 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 13:11:20,810 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 13:11:20,810 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:11:20,810 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:20,810 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131120', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:20,926 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 13:11:20,926 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 13:11:20,926 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,926 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,927 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 13:11:20,927 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 13:11:20,927 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 13:11:20,927 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 13:11:21,005 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 13:11:21,005 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 13:11:21,005 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 05:11:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 13:11:21,005 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 13:11:21,005 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 13:11:21,005 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 13:11:21,006 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 13:11:21,006 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:21,006 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:21,006 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 13:11:21,006 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 13:11:21,006 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 13:11:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811131120 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:21,131 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 13:11:21,132 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 13:11:21,133 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 13:11:21,133 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131120', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 13:11:21,256 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 13:11:21,256 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 13:11:21,256 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 13:11:21" WHERE executed_history_id = 20180811131120 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 13:11:21,380 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:21,380 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 13:11:20", case_exec_history_id="20180811131120" WHERE executed_history_id = 20180811131117 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:21,516 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 13:11:21,548 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 13:11:21,560 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 13:11:21,560 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811131117', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 13:11:21,675 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 13:11:21,675 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 13:11:21,675 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 13:11:21,675 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 13:11:21", case_exec_history_id="20180811131121" WHERE executed_history_id = 20180811131117 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 13:11:21,852 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 13:11:21,880 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 13:11:21,880 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 13:11:21,881 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 13:11:21,881 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811131117',)
2018-08-11 13:11:21,991 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 13:11:21,991 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811131117')
2018-08-11 13:11:22,102 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 13:11:22,102 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811131117')
2018-08-11 13:11:22,213 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 13:11:22,213 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811131117')
2018-08-11 13:11:22,324 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 13:11:22,324 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811131117')
2018-08-11 13:11:22,437 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 13:11:22,437 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811131117',)
2018-08-11 13:11:22,548 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 13:11:22,548 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811131117')
2018-08-11 13:11:22,658 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 13:11:22,658 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 13:11:22,658 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811131117')
2018-08-11 13:11:22,767 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 13:11:22,768 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 13:11:22,768 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811131117',)
2018-08-11 13:11:22,878 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 13:11:22,878 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811131117')
2018-08-11 13:11:22,990 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 13:11:22,990 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811131118')
2018-08-11 13:11:23,102 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 13:11:23,102 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811131119')
2018-08-11 13:11:23,216 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 13:11:23,216 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811131119')
2018-08-11 13:11:23,326 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 13:11:23,326 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811131117')
2018-08-11 13:11:23,439 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 13:11:23,439 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811131120')
2018-08-11 13:11:23,553 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 13:11:23,553 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811131120')
2018-08-11 13:11:23,666 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 13:11:23,666 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811131121')
2018-08-11 13:11:23,777 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 13:11:23,778 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811131117.html
2018-08-11 13:11:23,778 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 13:11:23,781 main.py [line: 234] INFO: 生成测试报告成功
2018-08-11 13:11:24,887 main.py [line: 241] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811131117.html
2018-08-11 13:11:24,887 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-11 13:11:28,558 main.py [line: 248] INFO: 发送邮件成功
2018-08-11 13:17:42,737 global_var.py [line: 25] INFO: 已选择运行环境：预发布环境
2018-08-11 13:17:42,738 global_var.py [line: 26] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2018-08-11 13:17:42,977 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:17:43,201 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:17:43,417 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-11 13:17:43,417 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-11 13:17:43,533 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-11 13:17:43,533 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:17:43,710 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-11 13:17:43,711 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-11 13:17:43,711 main.py [line: 203] INFO: 运行指定用例……
2018-08-11 13:17:43,711 main.py [line: 205] INFO: 待运行用例id列表：[148]
2018-08-11 13:17:43,729 global_function.py [line: 21] ERROR: 获取用例信息失败 5000: (getTestCase) - The Test Case ID (testcaseid: 148) provided does not exist!
getTestCase({'devKey': '1b90957f2a38f5c1d7127d620d3804fc', 'testcaseid': 148}),,暂停执行该用例
2018-08-11 13:17:43,729 main.py [line: 208] INFO: 用例[148]运行结果：('Fail', [('global_funtion_module', "获取用例信息失败 5000: (getTestCase) - The Test Case ID (testcaseid: 148) provided does not exist!\ngetTestCase({'devKey': '1b90957f2a38f5c1d7127d620d3804fc', 'testcaseid': 148})")])
2018-08-11 13:17:43,729 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 13:22:42,271 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 13:22:42,272 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 13:22:42,505 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:22:42,725 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:22:42,943 main.py [line: 60] INFO: 正在创建测试用例报告报表
2018-08-11 13:22:42,943 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 13:22:43,061 main.py [line: 63] INFO: 正在创建测试步骤报告报表
2018-08-11 13:22:43,061 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:22:43,176 main.py [line: 66] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 13:35:05,382 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 13:35:05,382 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 13:35:05,605 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:35:05,824 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:35:06,047 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 13:35:06,047 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 13:35:06,161 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 13:35:06,162 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:35:06,272 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 13:39:47,005 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 13:39:47,005 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 13:39:47,237 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 13:39:47,455 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 13:39:47,655 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 13:39:47,655 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 13:39:47,768 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 13:39:47,768 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 13:39:47,883 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:19:02,299 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 15:19:02,299 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 15:19:02,529 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 15:19:02,742 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 15:19:02,963 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 15:19:02,963 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 15:19:03,074 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 15:19:03,075 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 15:19:03,184 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:31:01,204 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 15:31:01,204 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 15:31:01,428 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 15:31:01,645 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 15:31:01,871 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 15:31:01,871 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 15:31:01,985 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 15:31:01,986 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 15:31:02,101 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:32:50,461 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 15:32:50,461 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 15:32:50,688 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 15:32:50,910 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 15:32:51,145 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 15:32:51,145 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 15:32:51,258 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 15:32:51,258 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 15:32:51,380 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:32:51,381 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-11 15:37:55,762 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 15:37:55,762 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 15:37:55,986 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 15:37:56,208 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 15:37:56,440 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 15:37:56,440 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 15:37:56,572 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 15:37:56,572 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 15:37:56,687 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:37:56,690 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-11 15:47:39,369 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 15:47:39,369 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 15:47:39,601 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 15:47:39,821 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 15:47:40,046 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 15:47:40,046 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 15:47:40,158 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 15:47:40,158 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 15:47:40,273 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 15:47:40,275 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-11 15:47:40,276 runmodeconfig.py [line: 30] ERROR: 读取运行模式配置失败：'runmode'
2018-08-11 16:10:07,571 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-11 16:10:07,572 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-11 16:10:07,802 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-11 16:10:08,024 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-11 16:10:08,249 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-11 16:10:08,249 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-11 16:10:08,366 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-11 16:10:08,366 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-11 16:10:08,478 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-11 16:10:08,480 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-11 16:10:08,480 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-11 16:10:08,480 main.py [line: 94] INFO: 按项目运行测试
2018-08-11 16:10:08,481 main.py [line: 119] INFO: 运行指定项目
2018-08-11 16:10:08,539 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-11 16:10:08,539 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-11 16:10:08,539 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-11 16:10:08,539 main.py [line: 143] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-11 16:10:08,540 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-11 16:10:08,564 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-11 16:10:08,591 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-11 16:10:08,592 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-11 16:10:08,628 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 16:10:08,659 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 16:10:08,681 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:08,681 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 16:10:08,798 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 16:10:08,798 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 16:10:08,799 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 16:10:08,799 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:08,800 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:08,932 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 16:10:08,933 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 16:10:08,934 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:08,934 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:08,935 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:08,936 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 16:10:08,936 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 16:10:08,936 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 16:10:09,073 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 16:10:09,074 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 16:10:09,074 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 08:10:12 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=unaqu6imbs66ikhepqcsu9bus4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 16:10:09,074 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 16:10:09,075 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 16:10:09,075 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 16:10:09,075 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 16:10:09,075 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 16:10:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811161008 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:09,201 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 16:10:09,201 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:09,202 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 16:10:08", case_exec_history_id="20180811161008" WHERE executed_history_id = 20180811161008 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:09,361 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 16:10:09,396 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 16:10:09,409 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:09,409 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 16:10:09,527 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 16:10:09,527 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 16:10:09,527 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 16:10:09,527 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:09,527 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161009', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:09,665 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 16:10:09,665 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 16:10:09,666 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:09,666 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:09,666 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:09,666 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 16:10:09,666 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 16:10:09,666 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 16:10:09,742 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 16:10:09,742 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 16:10:09,742 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 08:10:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 16:10:09,742 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 16:10:09,742 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 16:10:09,742 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 16:10:09,743 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 16:10:09,743 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:09,743 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:09,743 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:09,743 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 16:10:09,743 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 16:10:09",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811161009 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:09,864 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 16:10:09,864 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 16:10:09,864 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:09,864 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161009', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:09,982 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 16:10:09,982 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 16:10:09,982 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 16:10:09" WHERE executed_history_id = 20180811161009 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-11 16:10:10,099 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:10,099 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 16:10:09", case_exec_history_id="20180811161009" WHERE executed_history_id = 20180811161008 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:10,233 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 16:10:10,265 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 16:10:10,277 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:10,277 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 16:10:10,421 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 16:10:10,421 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 16:10:10,421 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:10,421 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 16:10:10", case_exec_history_id="20180811161010" WHERE executed_history_id = 20180811161008 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:10,546 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 16:10:10,561 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-11 16:10:10,573 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-11 16:10:10,573 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-11 16:10:10,592 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-11 16:10:10,608 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-11 16:10:10,620 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:10,620 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-11 16:10:10,737 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-11 16:10:10,738 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 16:10:10,738 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-11 16:10:10,738 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:10,738 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161010', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:10,855 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 16:10:10,855 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 16:10:10,855 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:10,855 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:10,855 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:10,855 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 16:10:10,855 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 16:10:10,856 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 16:10:10,933 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 16:10:10,933 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 16:10:10,933 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 08:10:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 16:10:10,933 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 16:10:10,933 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 16:10:10,933 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-11 16:10:10,934 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 16:10:10,934 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 16:10:10",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180811161010 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:11,086 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-11 16:10:11,086 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:11,086 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 16:10:10", case_exec_history_id="20180811161010" WHERE executed_history_id = 20180811161008 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:11,216 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-11 16:10:11,249 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-11 16:10:11,262 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:11,263 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-11 16:10:11,420 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-11 16:10:11,420 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-11 16:10:11,420 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 16:10:11,420 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:11,420 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161011', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:11,545 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-11 16:10:11,545 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-11 16:10:11,546 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:11,546 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:11,546 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-11 16:10:11,546 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-11 16:10:11,546 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-11 16:10:11,546 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-11 16:10:11,625 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-11 16:10:11,625 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-11 16:10:11,625 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Sat, 11 Aug 2018 08:10:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-11 16:10:11,626 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ="}
2018-08-11 16:10:11,626 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-11 16:10:11,626 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-11 16:10:11,626 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-11 16:10:11,626 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:11,626 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:11,626 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-ZmNkNGE0NjE1ZjVmMzM5YzI5YTI0ODM5N2RkMDFmMzQ=
2018-08-11 16:10:11,626 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-11 16:10:11,626 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-11 16:10:11",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180811161011 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:11,742 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-11 16:10:11,742 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-11 16:10:11,742 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-11 16:10:11,742 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161011', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-11 16:10:11,865 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-11 16:10:11,865 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-11 16:10:11,865 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-11 16:10:11" WHERE executed_history_id = 20180811161011 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-11 16:10:11,981 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:11,981 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-11 16:10:11", case_exec_history_id="20180811161011" WHERE executed_history_id = 20180811161008 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:12,112 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-11 16:10:12,143 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-11 16:10:12,155 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-11 16:10:12,155 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180811161008', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-11 16:10:12,269 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-11 16:10:12,270 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-11 16:10:12,271 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-11 16:10:12,271 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-11 16:10:12", case_exec_history_id="20180811161012" WHERE executed_history_id = 20180811161008 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-11 16:10:12,398 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-11 16:10:12,413 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-11 16:10:12,413 main.py [line: 214] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-11 16:10:12,414 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-11 16:10:12,414 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180811161008',)
2018-08-11 16:10:12,532 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-11 16:10:12,532 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180811161008')
2018-08-11 16:10:12,647 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-11 16:10:12,647 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180811161008')
2018-08-11 16:10:12,755 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-11 16:10:12,755 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180811161008')
2018-08-11 16:10:12,868 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-11 16:10:12,868 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180811161008')
2018-08-11 16:10:12,978 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-11 16:10:12,979 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811161008',)
2018-08-11 16:10:13,093 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-11 16:10:13,094 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811161008')
2018-08-11 16:10:13,207 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-11 16:10:13,207 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-11 16:10:13,207 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811161008')
2018-08-11 16:10:13,319 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-11 16:10:13,319 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-11 16:10:13,319 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180811161008',)
2018-08-11 16:10:13,429 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-11 16:10:13,429 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180811161008')
2018-08-11 16:10:13,542 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 16:10:13,542 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180811161008')
2018-08-11 16:10:13,652 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 16:10:13,652 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180811161009')
2018-08-11 16:10:13,772 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 16:10:13,772 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180811161010')
2018-08-11 16:10:13,891 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-11 16:10:13,891 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180811161008')
2018-08-11 16:10:14,002 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-11 16:10:14,002 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180811161010')
2018-08-11 16:10:14,113 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-11 16:10:14,113 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180811161011')
2018-08-11 16:10:14,226 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-11 16:10:14,226 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180811161012')
2018-08-11 16:10:14,338 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-11 16:10:14,338 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811161008.html
2018-08-11 16:10:14,339 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-11 16:10:14,347 main.py [line: 238] INFO: 生成测试报告成功
2018-08-11 16:10:15,727 main.py [line: 245] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\test_report20180811161008.html
2018-08-11 16:10:15,727 main.py [line: 248] INFO: 正在发送测试报告邮件...
2018-08-11 16:10:19,515 main.py [line: 252] INFO: 发送邮件成功
