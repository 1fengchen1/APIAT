2018-08-08 14:45:57,670 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:45:57,675 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:45:57,935 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:45:58,135 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:49:24,025 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:49:24,026 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:49:24,233 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:49:24,440 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:51:53,663 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:51:53,663 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:51:53,871 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:51:54,088 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:52:51,717 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:52:51,718 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:52:51,933 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:52:52,141 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:54:11,630 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:54:11,630 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:54:11,843 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:54:12,052 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:56:10,878 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:56:10,878 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:56:11,179 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:56:11,481 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:58:58,741 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:58:58,741 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:58:59,009 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:58:59,255 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 14:59:57,466 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 14:59:57,466 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 14:59:57,713 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 14:59:57,952 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:01:31,497 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:01:31,497 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:01:31,750 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:01:31,988 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:02:57,845 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:02:57,846 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:02:58,101 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:02:58,347 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:04:37,448 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:04:37,449 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:04:37,751 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:04:38,070 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:06:07,645 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:06:07,646 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:06:07,922 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:06:08,174 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:06:44,167 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:06:44,167 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:06:44,413 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:06:45,318 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:06:45,515 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 15:06:45,516 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 15:06:45,651 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 15:06:45,651 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 15:06:45,792 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 15:06:45,793 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 15:06:45,793 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 15:06:45,794 main.py [line: 114] INFO: 运行指定项目
2018-08-08 15:06:45,845 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 15:06:45,846 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 15:06:45,846 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 15:06:45,846 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 15:06:45,847 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 15:06:45,862 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 15:06:45,878 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 15:06:45,878 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 15:06:45,898 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:06:45,916 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:06:45,931 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:45,931 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:06:46,057 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:06:46,057 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:06:46,057 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:06:46,058 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:46,058 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150646', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:46,213 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:06:46,213 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:06:46,213 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,213 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,214 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,214 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:06:46,214 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:06:46,214 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:06:46,366 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:06:46,368 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:06:46,368 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:06:54 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=5rm01q4856pnfglqc09iimkr51; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:06:46,368 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:06:46,368 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:06:46,368 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:06:46,369 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:06:46,369 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:06:46",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150646 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:46,498 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:06:46,499 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:46,499 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:06:46", case_exec_history_id="20180808150646" WHERE executed_history_id = 20180808150645 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:46,643 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:06:46,680 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:06:46,693 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:46,694 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:06:46,842 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:06:46,843 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:06:46,843 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:06:46,843 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:46,843 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150646', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:46,974 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:06:46,975 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:06:46,976 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,977 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,978 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:46,979 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:06:46,979 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:06:46,980 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:06:47,063 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:06:47,063 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:06:47,063 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:06:55 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:06:47,063 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:06:47,063 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:06:47,063 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:06:47,063 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:06:47,063 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:47,064 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:47,064 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:47,064 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:06:47,064 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:06:46",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150646 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:47,198 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:06:47,198 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:06:47,199 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:47,199 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150646', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:47,326 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:06:47,326 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:06:47,327 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:06:47" WHERE executed_history_id = 20180808150646 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 15:06:47,452 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:47,452 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:06:46", case_exec_history_id="20180808150646" WHERE executed_history_id = 20180808150645 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:47,591 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:06:47,623 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:06:47,636 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:47,637 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:06:47,762 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:06:47,762 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:06:47,762 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:47,763 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:06:47", case_exec_history_id="20180808150647" WHERE executed_history_id = 20180808150645 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:47,907 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:06:47,922 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 15:06:47,935 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 15:06:47,935 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 15:06:47,957 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:06:47,973 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:06:47,986 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:47,986 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:06:48,118 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:06:48,118 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:06:48,119 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:06:48,119 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:48,119 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150648', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:48,246 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:06:48,246 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:06:48,247 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,248 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,248 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,248 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:06:48,248 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:06:48,248 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:06:48,334 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:06:48,334 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:06:48,335 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:06:56 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:06:48,335 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:06:48,335 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:06:48,335 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:06:48,336 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:06:48,336 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:06:48",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150648 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:48,463 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:06:48,463 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:48,464 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:06:48", case_exec_history_id="20180808150648" WHERE executed_history_id = 20180808150645 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:48,603 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:06:48,637 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:06:48,650 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:48,651 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:06:48,814 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:06:48,814 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:06:48,814 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:06:48,814 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:48,815 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150648', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:48,967 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:06:48,967 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:06:48,967 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:06:48,968 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:06:48,969 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:06:48,969 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:06:49,052 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:06:49,053 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:06:49,053 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:06:57 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:06:49,053 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:06:49,054 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:06:49,054 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:06:49,054 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:06:49,054 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:49,054 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:49,054 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:06:49,055 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:06:49,055 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:06:48",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150648 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:49,193 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:06:49,193 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:06:49,194 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:06:49,194 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150648', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:06:49,325 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:06:49,325 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:06:49,325 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:06:49" WHERE executed_history_id = 20180808150648 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 15:06:49,448 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:49,449 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:06:48", case_exec_history_id="20180808150648" WHERE executed_history_id = 20180808150645 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:49,595 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:06:49,628 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:06:49,641 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:06:49,641 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150645', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:06:49,765 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:06:49,765 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:06:49,766 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:06:49,766 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:06:49", case_exec_history_id="20180808150649" WHERE executed_history_id = 20180808150645 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:06:49,911 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:06:49,926 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 15:06:49,926 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 15:06:49,931 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 15:06:49,931 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808150645',)
2018-08-08 15:06:50,053 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 15:06:50,054 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808150645')
2018-08-08 15:06:50,175 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 15:06:50,175 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808150645')
2018-08-08 15:06:50,296 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 15:06:50,296 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808150645')
2018-08-08 15:06:50,417 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 15:06:50,417 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808150645')
2018-08-08 15:06:50,536 htmlreporter.py [line: 112] INFO: 正在查询已运的测试计划
2018-08-08 15:06:50,536 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150645',)
2018-08-08 15:06:50,656 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 15:06:50,656 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150645')
2018-08-08 15:06:50,785 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 15:06:50,787 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 15:06:50,787 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808150645')
2018-08-08 15:06:50,908 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 15:06:50,909 htmlreporter.py [line: 179] INFO: 正在查询已运的测试计划
2018-08-08 15:06:50,909 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150645',)
2018-08-08 15:06:51,050 htmlreporter.py [line: 198] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 15:06:51,050 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150645')
2018-08-08 15:06:51,171 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 15:06:51,172 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808150646')
2018-08-08 15:08:40,465 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:08:40,465 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:08:40,717 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:08:40,961 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:08:41,158 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 15:08:41,159 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 15:08:41,279 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 15:08:41,279 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 15:08:41,412 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 15:08:41,413 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 15:08:41,413 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 15:08:41,413 main.py [line: 114] INFO: 运行指定项目
2018-08-08 15:08:41,454 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 15:08:41,454 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 15:08:41,454 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 15:08:41,454 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 15:08:41,455 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 15:08:41,467 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 15:08:41,481 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 15:08:41,482 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 15:08:41,501 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:08:41,518 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:08:41,531 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:41,532 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:08:41,653 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:08:41,654 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:08:41,654 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:08:41,655 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:41,655 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150841', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:41,786 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:08:41,786 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:08:41,787 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:41,787 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:41,787 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:41,787 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:08:41,788 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:08:41,788 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:08:41,878 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:08:41,878 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:08:41,879 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:08:49 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=l505hf9r2cprkok58ce628bf05; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:08:41,879 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:08:41,879 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:08:41,879 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:08:41,880 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:08:41,880 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:08:41",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150841 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:42,019 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:08:42,019 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:42,020 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:08:41", case_exec_history_id="20180808150841" WHERE executed_history_id = 20180808150840 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:42,175 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:08:42,209 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:08:42,223 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:42,223 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:08:42,351 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:08:42,351 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:08:42,352 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:08:42,352 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:42,352 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150842', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:42,499 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:08:42,500 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:08:42,502 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:42,502 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:42,502 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:42,503 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:08:42,503 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:08:42,503 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:08:42,600 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:08:42,600 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:08:42,600 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:08:50 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:08:42,601 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:08:42,601 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:08:42,601 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:08:42,601 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:08:42,601 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:42,601 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:42,601 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:42,602 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:08:42,602 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:08:42",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150842 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:42,749 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:08:42,749 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:08:42,749 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:42,749 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150842', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:42,886 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:08:42,887 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:08:42,888 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:08:42" WHERE executed_history_id = 20180808150842 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 15:08:43,018 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:43,019 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:08:42", case_exec_history_id="20180808150842" WHERE executed_history_id = 20180808150840 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:43,152 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:08:43,184 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:08:43,197 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:43,198 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:08:43,323 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:08:43,323 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:08:43,324 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:43,324 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:08:43", case_exec_history_id="20180808150843" WHERE executed_history_id = 20180808150840 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:43,501 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:08:43,516 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 15:08:43,529 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 15:08:43,529 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 15:08:43,547 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:08:43,565 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:08:43,580 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:43,581 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:08:43,707 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:08:43,708 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:08:43,708 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:08:43,709 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:43,709 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150843', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:43,842 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:08:43,843 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:08:43,844 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:43,844 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:43,844 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:43,845 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:08:43,845 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:08:43,845 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:08:43,930 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:08:43,931 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:08:43,931 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:08:52 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:08:43,931 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:08:43,931 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:08:43,932 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:08:43,933 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:08:43,933 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:08:43",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150843 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:44,061 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:08:44,061 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:44,061 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:08:43", case_exec_history_id="20180808150843" WHERE executed_history_id = 20180808150840 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:44,202 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:08:44,234 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:08:44,247 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:44,247 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:08:44,370 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:08:44,370 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:08:44,371 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:08:44,371 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:44,372 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150844', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:44,500 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:08:44,501 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:08:44,502 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:44,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:44,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:08:44,505 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:08:44,506 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:08:44,506 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:08:44,592 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:08:44,592 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:08:44,593 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:08:52 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:08:44,593 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:08:44,593 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:08:44,593 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:08:44,593 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:08:44,593 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:44,593 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:44,593 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:08:44,594 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:08:44,594 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:08:44",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150844 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:44,727 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:08:44,728 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:08:44,730 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:08:44,731 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150844', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:08:44,862 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:08:44,863 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:08:44,863 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:08:44" WHERE executed_history_id = 20180808150844 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 15:08:44,998 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:44,998 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:08:44", case_exec_history_id="20180808150844" WHERE executed_history_id = 20180808150840 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:45,136 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:08:45,168 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:08:45,181 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:08:45,181 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150840', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:08:45,309 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:08:45,310 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:08:45,310 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:08:45,310 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:08:45", case_exec_history_id="20180808150845" WHERE executed_history_id = 20180808150840 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:08:45,459 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:08:45,474 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 15:08:45,474 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 15:08:45,475 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 15:08:45,475 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808150840',)
2018-08-08 15:08:45,596 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 15:08:45,596 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808150840')
2018-08-08 15:08:45,717 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 15:08:45,717 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808150840')
2018-08-08 15:08:45,842 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 15:08:45,842 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808150840')
2018-08-08 15:08:45,964 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 15:08:45,965 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808150840')
2018-08-08 15:08:46,087 htmlreporter.py [line: 112] INFO: 正在查询已运的测试计划
2018-08-08 15:08:46,087 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150840',)
2018-08-08 15:08:46,214 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 15:08:46,214 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150840')
2018-08-08 15:08:46,338 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 15:08:46,338 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 15:08:46,338 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808150840')
2018-08-08 15:08:46,461 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 15:08:46,461 htmlreporter.py [line: 179] INFO: 正在查询已运的测试计划
2018-08-08 15:08:46,461 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150840',)
2018-08-08 15:08:46,579 htmlreporter.py [line: 198] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 15:08:46,579 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150840')
2018-08-08 15:08:46,702 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 15:08:46,702 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808150841')
2018-08-08 15:09:25,534 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:09:25,534 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:09:25,775 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:09:26,031 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:09:26,238 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 15:09:26,238 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 15:09:26,364 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 15:09:26,364 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 15:09:26,489 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 15:09:26,490 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 15:09:26,490 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 15:09:26,491 main.py [line: 114] INFO: 运行指定项目
2018-08-08 15:09:26,519 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 15:09:26,519 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 15:09:26,520 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 15:09:26,520 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 15:09:26,520 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 15:09:26,532 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 15:09:26,545 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 15:09:26,545 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 15:09:26,564 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:09:26,580 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:09:26,593 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:26,593 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:09:26,719 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:09:26,719 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:09:26,720 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:09:26,721 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:26,721 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:26,854 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:09:26,854 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:09:26,854 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:26,855 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:26,855 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:26,855 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:09:26,855 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:09:26,856 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:09:26,944 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:09:26,945 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:09:26,945 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:09:35 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=m5mig8qj0s2ihjgq2pe82mso81; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:09:26,945 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:09:26,945 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:09:26,945 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:09:26,946 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:09:26,946 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:09:26",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150926 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:27,078 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:09:27,078 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:27,078 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:09:26", case_exec_history_id="20180808150926" WHERE executed_history_id = 20180808150926 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:27,217 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:09:27,251 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:09:27,264 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:27,265 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:09:27,388 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:09:27,389 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:09:27,392 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:09:27,394 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:27,394 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150927', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:27,520 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:09:27,521 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:09:27,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:27,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:27,523 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:27,523 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:09:27,523 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:09:27,524 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:09:27,608 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:09:27,608 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:09:27,609 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:09:35 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:09:27,611 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:09:27,611 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:09:27,611 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:09:27,611 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:09:27,611 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:27,611 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:27,611 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:27,612 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:09:27,612 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:09:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150927 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:27,738 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:09:27,738 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:09:27,739 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:27,739 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150927', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:27,878 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:09:27,878 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:09:27,879 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:09:27" WHERE executed_history_id = 20180808150927 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 15:09:28,011 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:28,011 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:09:27", case_exec_history_id="20180808150927" WHERE executed_history_id = 20180808150926 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:28,145 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:09:28,176 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:09:28,188 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:28,188 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:09:28,314 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:09:28,314 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:09:28,315 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:28,315 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:09:28", case_exec_history_id="20180808150928" WHERE executed_history_id = 20180808150926 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:28,453 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:09:28,469 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 15:09:28,481 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 15:09:28,482 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 15:09:28,501 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:09:28,518 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:09:28,533 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:28,533 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:09:28,662 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:09:28,662 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:09:28,663 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:09:28,663 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:28,663 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150928', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:28,797 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:09:28,797 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:09:28,797 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:28,798 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:28,798 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:28,798 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:09:28,798 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:09:28,798 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:09:28,881 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:09:28,881 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:09:28,881 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:09:36 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:09:28,882 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:09:28,882 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:09:28,884 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:09:28,885 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:09:28,885 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:09:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808150928 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:29,010 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:09:29,010 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:29,010 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:09:28", case_exec_history_id="20180808150928" WHERE executed_history_id = 20180808150926 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:29,146 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:09:29,181 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:09:29,195 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:29,196 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:09:29,326 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:09:29,326 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:09:29,327 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:09:29,327 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:29,327 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150929', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:29,490 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:09:29,490 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:09:29,490 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:29,491 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:29,491 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:09:29,491 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:09:29,491 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:09:29,492 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:09:29,580 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:09:29,580 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:09:29,580 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:09:37 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:09:29,581 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:09:29,581 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:09:29,581 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:09:29,581 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:09:29,581 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:29,581 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:29,582 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:09:29,582 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:09:29,582 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:09:29",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808150929 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:29,710 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:09:29,710 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:09:29,711 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:09:29,711 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150929', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:09:29,839 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:09:29,839 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:09:29,839 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:09:29" WHERE executed_history_id = 20180808150929 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 15:09:29,961 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:29,961 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:09:29", case_exec_history_id="20180808150929" WHERE executed_history_id = 20180808150926 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:30,107 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:09:30,141 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:09:30,154 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:09:30,154 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808150926', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:09:30,280 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:09:30,280 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:09:30,280 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:09:30,280 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:09:30", case_exec_history_id="20180808150930" WHERE executed_history_id = 20180808150926 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:09:30,415 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:09:30,432 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 15:09:30,433 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 15:09:30,436 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 15:09:30,436 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808150926',)
2018-08-08 15:09:30,561 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 15:09:30,561 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808150926')
2018-08-08 15:09:30,678 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 15:09:30,678 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808150926')
2018-08-08 15:09:30,798 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 15:09:30,799 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808150926')
2018-08-08 15:09:30,925 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 15:09:30,925 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808150926')
2018-08-08 15:09:31,057 htmlreporter.py [line: 112] INFO: 正在查询已运的测试计划
2018-08-08 15:09:31,057 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150926',)
2018-08-08 15:09:31,177 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 15:09:31,177 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150926')
2018-08-08 15:09:31,302 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 15:09:31,303 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 15:09:31,303 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808150926')
2018-08-08 15:09:31,428 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 15:09:31,428 htmlreporter.py [line: 179] INFO: 正在查询已运的测试计划
2018-08-08 15:09:31,429 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808150926',)
2018-08-08 15:09:31,551 htmlreporter.py [line: 198] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 15:09:31,551 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808150926')
2018-08-08 15:09:31,672 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 15:09:31,672 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808150926')
2018-08-08 15:10:50,667 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 15:10:50,667 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 15:10:50,915 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 15:10:51,157 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 15:10:51,346 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 15:10:51,346 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 15:10:51,473 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 15:10:51,474 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 15:10:51,601 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 15:10:51,602 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 15:10:51,602 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 15:10:51,603 main.py [line: 114] INFO: 运行指定项目
2018-08-08 15:10:51,632 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 15:10:51,632 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 15:10:51,632 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 15:10:51,632 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 15:10:51,633 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 15:10:51,645 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 15:10:51,657 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 15:10:51,657 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 15:10:51,674 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:10:51,691 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:10:51,704 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:51,704 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:10:51,835 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:10:51,835 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:10:51,836 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:10:51,836 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:51,836 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:51,965 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:10:51,965 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:10:51,966 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:51,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:51,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:51,968 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:10:51,970 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:10:51,970 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:10:52,057 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:10:52,058 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:10:52,058 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:11:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=qgpjvef38q15r4rmulv687bof7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:10:52,059 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:10:52,059 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:10:52,059 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:10:52,060 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:10:52,060 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:10:51",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808151051 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:52,184 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:10:52,185 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:52,185 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:10:51", case_exec_history_id="20180808151051" WHERE executed_history_id = 20180808151051 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:52,344 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:10:52,379 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:10:52,392 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:52,392 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:10:52,517 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:10:52,519 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:10:52,519 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:10:52,520 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:52,520 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151052', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:52,651 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:10:52,651 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:10:52,652 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:52,652 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:52,652 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:52,652 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:10:52,653 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:10:52,653 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:10:52,738 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:10:52,738 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:10:52,738 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:11:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:10:52,739 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:10:52,739 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:10:52,740 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:10:52,740 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:10:52,740 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:52,740 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:52,741 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:52,742 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:10:52,742 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:10:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808151052 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:52,892 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:10:52,892 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:10:52,893 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:52,893 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151052', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:53,021 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:10:53,021 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:10:53,022 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:10:53" WHERE executed_history_id = 20180808151052 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 15:10:53,147 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:53,148 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:10:52", case_exec_history_id="20180808151052" WHERE executed_history_id = 20180808151051 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:53,286 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:10:53,317 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:10:53,330 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:53,330 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:10:53,456 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:10:53,456 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:10:53,457 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:53,457 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:10:53", case_exec_history_id="20180808151053" WHERE executed_history_id = 20180808151051 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:53,591 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:10:53,606 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 15:10:53,620 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 15:10:53,620 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 15:10:53,638 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 15:10:53,653 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 15:10:53,667 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:53,667 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 15:10:53,801 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 15:10:53,802 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:10:53,802 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 15:10:53,802 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:53,802 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151053', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:53,927 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:10:53,927 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:10:53,928 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:53,928 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:53,928 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:53,928 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:10:53,929 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:10:53,929 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:10:54,014 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:10:54,014 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:10:54,015 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:11:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:10:54,015 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:10:54,015 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:10:54,015 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 15:10:54,016 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:10:54,017 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:10:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808151053 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:54,139 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 15:10:54,139 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:54,140 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:10:53", case_exec_history_id="20180808151053" WHERE executed_history_id = 20180808151051 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:54,293 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 15:10:54,353 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 15:10:54,375 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:54,375 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 15:10:54,500 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 15:10:54,500 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 15:10:54,501 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:10:54,501 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:54,501 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151054', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:54,628 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 15:10:54,629 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 15:10:54,629 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:54,629 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:54,629 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 15:10:54,630 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 15:10:54,630 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 15:10:54,630 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 15:10:54,741 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 15:10:54,741 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 15:10:54,742 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 07:11:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 15:10:54,742 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 15:10:54,742 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 15:10:54,742 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 15:10:54,743 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 15:10:54,743 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:54,743 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:54,743 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 15:10:54,745 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 15:10:54,745 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 15:10:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808151054 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:54,869 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 15:10:54,869 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 15:10:54,870 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 15:10:54,870 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151054', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 15:10:55,005 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 15:10:55,006 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 15:10:55,006 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 15:10:55" WHERE executed_history_id = 20180808151054 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 15:10:55,128 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:55,128 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 15:10:54", case_exec_history_id="20180808151054" WHERE executed_history_id = 20180808151051 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:55,293 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 15:10:55,327 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 15:10:55,341 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 15:10:55,342 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808151051', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 15:10:55,468 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 15:10:55,468 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 15:10:55,469 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 15:10:55,469 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 15:10:55", case_exec_history_id="20180808151055" WHERE executed_history_id = 20180808151051 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 15:10:55,627 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 15:10:55,642 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 15:10:55,643 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 15:10:55,644 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 15:10:55,644 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808151051',)
2018-08-08 15:10:55,777 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 15:10:55,777 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808151051')
2018-08-08 15:10:55,897 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 15:10:55,897 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808151051')
2018-08-08 15:10:56,020 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 15:10:56,020 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808151051')
2018-08-08 15:10:56,144 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 15:10:56,144 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808151051')
2018-08-08 15:10:56,268 htmlreporter.py [line: 112] INFO: 正在查询已运的测试计划
2018-08-08 15:10:56,268 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808151051',)
2018-08-08 15:10:56,388 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 15:10:56,388 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808151051')
2018-08-08 15:10:56,510 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 15:10:56,512 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 15:10:56,513 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808151051')
2018-08-08 15:10:56,636 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 15:10:56,637 htmlreporter.py [line: 179] INFO: 正在查询已运的测试计划
2018-08-08 15:10:56,637 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808151051',)
2018-08-08 15:10:56,759 htmlreporter.py [line: 198] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 15:10:56,759 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808151051')
2018-08-08 15:10:56,881 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 15:10:56,881 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808151051')
2018-08-08 15:10:57,002 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 15:10:57,002 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808151052')
2018-08-08 15:10:57,126 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 15:10:57,126 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808151053')
2018-08-08 15:10:57,247 htmlreporter.py [line: 198] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 15:10:57,247 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808151051')
2018-08-08 15:10:57,371 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 15:10:57,371 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808151053')
2018-08-08 15:10:57,493 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 15:10:57,494 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808151054')
2018-08-08 15:10:57,626 htmlreporter.py [line: 238] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 15:10:57,628 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808151055')
2018-08-08 15:10:57,752 htmlreporter.py [line: 269] INFO: 正在设置测试报告结果文件名
2018-08-08 15:10:57,752 htmlreporter.py [line: 279] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808151051.html
2018-08-08 15:10:57,753 htmlreporter.py [line: 272] INFO: 正在生成测试报告
2018-08-08 15:10:57,756 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 15:10:59,181 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808151051.html
2018-08-08 15:10:59,181 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 15:11:00,040 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 16:04:12,467 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 16:04:12,468 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 16:04:12,717 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 16:04:12,952 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 16:04:13,143 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 16:04:13,144 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 16:04:13,267 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 16:04:13,267 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 16:04:13,392 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 16:04:13,392 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 16:04:13,393 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 16:04:13,393 main.py [line: 114] INFO: 运行指定项目
2018-08-08 16:04:13,426 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 16:04:13,426 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 16:04:13,426 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 16:04:13,427 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 16:04:13,427 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 16:04:13,440 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 16:04:13,453 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 16:04:13,453 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 16:04:13,473 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 16:04:13,491 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 16:04:13,505 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:13,505 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 16:04:13,652 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 16:04:13,652 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 16:04:13,653 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 16:04:13,653 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:13,653 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160413', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:13,840 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 16:04:13,840 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 16:04:13,842 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:13,842 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:13,842 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:13,842 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 16:04:13,843 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 16:04:13,843 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 16:04:13,992 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 16:04:13,993 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 16:04:13,993 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 08:04:21 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=c0e2ktgjug32uvbrjbf9j175n4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 16:04:13,994 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 16:04:13,994 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 16:04:13,994 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 16:04:13,995 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 16:04:13,995 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 16:04:13",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808160413 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:14,153 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 16:04:14,154 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:14,154 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 16:04:13", case_exec_history_id="20180808160413" WHERE executed_history_id = 20180808160412 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:14,306 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 16:04:14,340 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 16:04:14,353 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:14,353 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 16:04:14,482 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 16:04:14,483 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 16:04:14,483 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 16:04:14,483 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:14,484 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160414', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:14,618 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 16:04:14,619 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 16:04:14,619 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:14,620 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:14,620 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:14,620 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 16:04:14,620 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 16:04:14,621 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 16:04:14,706 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 16:04:14,706 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 16:04:14,707 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 08:04:22 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 16:04:14,707 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 16:04:14,707 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 16:04:14,707 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 16:04:14,707 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 16:04:14,707 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:14,707 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:14,707 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:14,708 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 16:04:14,708 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 16:04:14",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808160414 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:14,861 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 16:04:14,861 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 16:04:14,861 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:14,862 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160414', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:14,994 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 16:04:14,994 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 16:04:14,995 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 16:04:14" WHERE executed_history_id = 20180808160414 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 16:04:15,117 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:15,117 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 16:04:14", case_exec_history_id="20180808160414" WHERE executed_history_id = 20180808160412 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:15,254 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 16:04:15,285 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 16:04:15,298 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:15,299 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 16:04:15,423 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 16:04:15,424 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 16:04:15,424 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:15,424 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 16:04:15", case_exec_history_id="20180808160415" WHERE executed_history_id = 20180808160412 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:15,569 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 16:04:15,585 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 16:04:15,598 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 16:04:15,598 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 16:04:15,617 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 16:04:15,633 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 16:04:15,644 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:15,644 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 16:04:15,807 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 16:04:15,808 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 16:04:15,808 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 16:04:15,809 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:15,809 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160415', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:15,939 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 16:04:15,940 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 16:04:15,948 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:15,948 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:15,948 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:15,949 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 16:04:15,949 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 16:04:15,949 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 16:04:16,037 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 16:04:16,038 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 16:04:16,038 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 08:04:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 16:04:16,041 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 16:04:16,041 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 16:04:16,041 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 16:04:16,042 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 16:04:16,042 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 16:04:15",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808160415 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:16,179 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 16:04:16,179 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:16,181 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 16:04:15", case_exec_history_id="20180808160415" WHERE executed_history_id = 20180808160412 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:16,317 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 16:04:16,354 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 16:04:16,368 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:16,369 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 16:04:16,491 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 16:04:16,491 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 16:04:16,492 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 16:04:16,492 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:16,492 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160416', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:16,617 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 16:04:16,618 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 16:04:16,620 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:16,620 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:16,621 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 16:04:16,622 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 16:04:16,623 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 16:04:16,623 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 16:04:16,712 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 16:04:16,712 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 16:04:16,713 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 08:04:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 16:04:16,713 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 16:04:16,713 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 16:04:16,714 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 16:04:16,714 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 16:04:16,714 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:16,714 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:16,714 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 16:04:16,715 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 16:04:16,716 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 16:04:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808160416 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:16,848 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 16:04:16,849 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 16:04:16,852 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 16:04:16,852 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160416', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 16:04:16,985 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 16:04:16,986 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 16:04:16,986 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 16:04:16" WHERE executed_history_id = 20180808160416 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 16:04:17,112 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:17,112 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 16:04:16", case_exec_history_id="20180808160416" WHERE executed_history_id = 20180808160412 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:17,283 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 16:04:17,316 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 16:04:17,331 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 16:04:17,331 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808160412', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 16:04:17,458 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 16:04:17,458 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 16:04:17,458 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 16:04:17,459 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 16:04:17", case_exec_history_id="20180808160417" WHERE executed_history_id = 20180808160412 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 16:04:17,594 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 16:04:17,612 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 16:04:17,612 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 16:04:17,613 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 16:04:17,616 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808160412',)
2018-08-08 16:04:17,745 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 16:04:17,746 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808160412')
2018-08-08 16:04:17,867 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 16:04:17,867 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808160412')
2018-08-08 16:04:17,988 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 16:04:17,988 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808160412')
2018-08-08 16:04:18,110 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 16:04:18,111 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808160412')
2018-08-08 16:04:18,232 htmlreporter.py [line: 112] INFO: 正在查询已运的测试计划
2018-08-08 16:04:18,233 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808160412',)
2018-08-08 16:04:18,351 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 16:04:18,352 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808160412')
2018-08-08 16:04:18,487 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 16:04:18,487 htmlreporter.py [line: 144] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 16:04:18,487 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808160412')
2018-08-08 16:04:18,608 htmlreporter.py [line: 153] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 16:04:18,609 htmlreporter.py [line: 179] INFO: 正在查询已运的测试计划
2018-08-08 16:04:18,609 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808160412',)
2018-08-08 16:04:18,730 htmlreporter.py [line: 199] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 16:04:18,730 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808160412')
2018-08-08 16:04:18,851 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 16:04:18,851 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808160413')
2018-08-08 16:04:18,973 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 16:04:18,975 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808160414')
2018-08-08 16:04:19,100 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 16:04:19,100 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808160415')
2018-08-08 16:04:19,221 htmlreporter.py [line: 199] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 16:04:19,222 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808160412')
2018-08-08 16:04:19,343 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 16:04:19,343 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808160415')
2018-08-08 16:04:19,463 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 16:04:19,464 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808160416')
2018-08-08 16:04:19,586 htmlreporter.py [line: 239] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 16:04:19,586 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808160417')
2018-08-08 16:04:19,713 htmlreporter.py [line: 270] INFO: 正在设置测试报告结果文件名
2018-08-08 16:04:19,713 htmlreporter.py [line: 280] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808160412.html
2018-08-08 16:04:19,713 htmlreporter.py [line: 273] INFO: 正在生成测试报告
2018-08-08 16:04:19,717 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 16:04:21,083 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808160412.html
2018-08-08 16:04:21,083 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 16:04:21,896 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:17:49,027 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:17:49,027 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:17:49,509 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:17:49,785 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:17:49,978 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:17:49,979 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:17:50,104 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:17:50,105 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:17:50,231 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:17:50,232 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:17:50,233 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:17:50,233 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:17:50,269 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:17:50,270 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 17:17:50,270 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:17:50,270 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:17:50,270 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:17:50,283 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:17:50,297 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:17:50,298 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:17:50,319 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:17:50,337 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:17:50,350 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:50,350 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:17:50,480 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:17:50,480 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:17:50,480 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:17:50,481 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:50,481 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171750', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:50,609 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:17:50,610 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:17:50,610 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:50,610 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:50,610 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:50,611 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:17:50,611 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:17:50,611 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:17:50,769 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:17:50,770 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:17:50,770 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:17:58 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=jko281fhgodpbjqe4i94i445p3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:17:50,770 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:17:50,770 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:17:50,770 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:17:50,771 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:17:50,771 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:17:50",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808171750 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:50,903 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:17:50,903 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:50,904 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:17:50", case_exec_history_id="20180808171750" WHERE executed_history_id = 20180808171749 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:51,044 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:17:51,078 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:17:51,092 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:51,093 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:17:51,226 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:17:51,226 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:17:51,227 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:17:51,227 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:51,227 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171751', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:51,372 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:17:51,372 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:17:51,373 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:51,377 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:51,380 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:51,380 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:17:51,380 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:17:51,381 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:17:51,466 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:17:51,466 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:17:51,466 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:17:59 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:17:51,467 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:17:51,467 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:17:51,467 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:17:51,467 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:17:51,467 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:51,468 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:51,468 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:51,471 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:17:51,471 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:17:51",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808171751 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:51,600 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:17:51,600 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:17:51,601 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:51,601 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171751', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:51,742 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:17:51,742 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:17:51,742 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 17:17:51" WHERE executed_history_id = 20180808171751 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 17:17:51,874 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:51,874 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:17:51", case_exec_history_id="20180808171751" WHERE executed_history_id = 20180808171749 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:52,017 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:17:52,050 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:17:52,062 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:52,063 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:17:52,188 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:17:52,188 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:17:52,188 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:52,188 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:17:52", case_exec_history_id="20180808171752" WHERE executed_history_id = 20180808171749 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:52,325 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:17:52,341 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:17:52,356 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:17:52,357 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:17:52,374 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:17:52,391 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:17:52,404 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:52,405 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:17:52,533 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:17:52,533 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:17:52,534 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:17:52,534 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:52,534 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171752', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:52,661 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:17:52,661 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:17:52,662 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:52,662 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:52,662 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:52,662 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:17:52,663 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:17:52,663 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:17:52,748 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:17:52,749 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:17:52,749 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:18:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:17:52,751 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:17:52,751 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:17:52,751 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:17:52,752 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:17:52,752 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:17:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808171752 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:52,896 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:17:52,896 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:52,897 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:17:52", case_exec_history_id="20180808171752" WHERE executed_history_id = 20180808171749 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:53,030 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:17:53,063 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:17:53,077 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:53,080 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:17:53,206 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:17:53,206 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:17:53,207 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:17:53,207 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:53,207 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171753', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:53,383 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:17:53,383 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:17:53,384 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:53,384 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:53,384 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:17:53,384 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:17:53,384 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:17:53,385 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:17:53,519 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:17:53,520 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:17:53,520 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:18:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:17:53,522 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:17:53,525 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:17:53,525 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:17:53,525 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:17:53,525 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:53,526 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:53,526 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:17:53,527 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:17:53,527 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:17:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808171753 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:53,653 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:17:53,654 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:17:53,654 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:17:53,655 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171753', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:17:53,784 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:17:53,784 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:17:53,785 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 17:17:53" WHERE executed_history_id = 20180808171753 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 17:17:53,909 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:53,910 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:17:53", case_exec_history_id="20180808171753" WHERE executed_history_id = 20180808171749 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:54,051 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:17:54,085 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:17:54,098 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:17:54,098 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808171749', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:17:54,260 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:17:54,261 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:17:54,261 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:17:54,262 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:17:54", case_exec_history_id="20180808171754" WHERE executed_history_id = 20180808171749 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:17:54,421 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:17:54,448 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:17:54,448 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:17:54,450 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 17:17:54,450 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808171749',)
2018-08-08 17:17:54,572 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 17:17:54,572 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808171749')
2018-08-08 17:17:54,693 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 17:17:54,693 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808171749')
2018-08-08 17:17:54,814 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 17:17:54,814 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808171749')
2018-08-08 17:17:54,942 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 17:17:54,943 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808171749')
2018-08-08 17:17:55,067 htmlreporter.py [line: 118] INFO: 正在查询已运的测试计划
2018-08-08 17:17:55,067 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808171749',)
2018-08-08 17:17:55,196 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:17:55,196 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808171749')
2018-08-08 17:17:55,320 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:17:55,321 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:17:55,321 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808171749')
2018-08-08 17:17:55,447 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:17:55,448 htmlreporter.py [line: 185] INFO: 正在查询已运的测试计划
2018-08-08 17:17:55,448 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808171749',)
2018-08-08 17:17:55,569 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:17:55,570 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808171749')
2018-08-08 17:17:55,691 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:17:55,691 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808171750')
2018-08-08 17:17:55,817 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:17:55,817 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808171751')
2018-08-08 17:17:55,941 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:17:55,941 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808171752')
2018-08-08 17:17:56,067 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:17:56,067 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808171749')
2018-08-08 17:17:56,204 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:17:56,204 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808171752')
2018-08-08 17:17:56,327 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:17:56,328 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808171753')
2018-08-08 17:17:56,455 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:17:56,455 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808171754')
2018-08-08 17:17:56,577 htmlreporter.py [line: 276] INFO: 正在设置测试报告结果文件名
2018-08-08 17:17:56,578 htmlreporter.py [line: 286] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808171749.html
2018-08-08 17:17:56,578 htmlreporter.py [line: 279] INFO: 正在生成测试报告
2018-08-08 17:17:56,581 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:17:57,871 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808171749.html
2018-08-08 17:17:57,871 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:17:58,545 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:23:24,993 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:23:24,994 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:23:25,244 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:23:25,491 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:23:25,703 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:23:25,703 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:23:25,835 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:23:25,835 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:23:25,963 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:23:25,963 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:23:25,964 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:23:25,964 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:23:26,021 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:23:26,021 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 17:23:26,022 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:23:26,022 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:23:26,022 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:23:26,046 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:23:26,070 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:23:26,070 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:23:26,105 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:23:26,136 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:23:26,161 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:26,163 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:23:26,305 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:23:26,306 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:23:26,306 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:23:26,307 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:26,307 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172326', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:26,435 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:23:26,435 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:23:26,446 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:26,446 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:26,446 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:26,447 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:23:26,447 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:23:26,453 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:23:26,541 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:23:26,542 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:23:26,542 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:23:34 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=3p8eadfpv78epnda4vt55kg6i5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:23:26,544 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:23:26,544 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:23:26,544 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:23:26,546 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:23:26,546 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:23:26",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808172326 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:26,680 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:23:26,680 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:26,681 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:23:26", case_exec_history_id="20180808172326" WHERE executed_history_id = 20180808172325 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:26,829 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:23:26,895 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:23:26,918 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:26,918 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:23:27,044 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:23:27,044 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:23:27,045 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:23:27,051 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:27,051 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172327', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:27,181 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:23:27,182 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:23:27,182 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:27,183 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:27,183 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:27,183 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:23:27,183 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:23:27,183 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:23:27,270 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:23:27,271 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:23:27,271 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:23:34 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:23:27,272 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:23:27,272 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:23:27,272 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:23:27,272 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:23:27,272 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:27,272 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:27,272 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:27,273 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:23:27,273 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:23:27",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808172327 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:27,401 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:23:27,401 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:23:27,402 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:27,402 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172327', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:27,526 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:23:27,526 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:23:27,527 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 17:23:27" WHERE executed_history_id = 20180808172327 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 17:23:27,651 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:27,652 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:23:27", case_exec_history_id="20180808172327" WHERE executed_history_id = 20180808172325 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:27,797 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:23:27,830 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:23:27,843 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:27,843 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:23:27,970 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:23:27,970 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:23:27,971 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:27,971 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:23:27", case_exec_history_id="20180808172327" WHERE executed_history_id = 20180808172325 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:28,122 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:23:28,139 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:23:28,151 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:23:28,152 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:23:28,170 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:23:28,186 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:23:28,199 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:28,199 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:23:28,326 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:23:28,327 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:23:28,329 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:23:28,333 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:28,333 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172328', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:28,463 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:23:28,463 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:23:28,464 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:28,464 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:28,464 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:28,464 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:23:28,465 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:23:28,465 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:23:28,548 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:23:28,549 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:23:28,550 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:23:36 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:23:28,550 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:23:28,550 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:23:28,551 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:23:28,554 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:23:28,554 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:23:28",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808172328 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:28,683 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:23:28,683 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:28,683 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:23:28", case_exec_history_id="20180808172328" WHERE executed_history_id = 20180808172325 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:28,820 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:23:28,853 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-03 19:59:29', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:23:28,866 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:28,866 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:23:28,989 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:23:28,989 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:23:28,990 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:23:28,991 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:28,994 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172328', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:29,121 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:23:29,121 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:23:29,122 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:29,122 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:29,122 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:23:29,123 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:23:29,123 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:23:29,123 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:23:29,205 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:23:29,206 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:23:29,206 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:23:36 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:23:29,207 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:23:29,207 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:23:29,207 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:23:29,207 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:23:29,208 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:29,208 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:29,208 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:23:29,209 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:23:29,209 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:23:29",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808172328 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:29,336 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:23:29,336 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:23:29,337 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:23:29,337 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172328', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:23:29,473 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:23:29,473 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:23:29,474 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 17:23:29" WHERE executed_history_id = 20180808172328 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 17:23:29,600 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:29,600 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:23:28", case_exec_history_id="20180808172328" WHERE executed_history_id = 20180808172325 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:29,747 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:23:29,781 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:23:29,794 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:23:29,795 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808172325', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:23:29,921 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:23:29,922 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:23:29,922 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:23:29,922 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:23:29", case_exec_history_id="20180808172329" WHERE executed_history_id = 20180808172325 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:23:30,065 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:23:30,082 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:23:30,083 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:23:30,084 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 17:23:30,087 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808172325',)
2018-08-08 17:23:30,205 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 17:23:30,205 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808172325')
2018-08-08 17:23:30,325 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 17:23:30,327 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808172325')
2018-08-08 17:23:30,447 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 17:23:30,448 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808172325')
2018-08-08 17:23:30,572 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 17:23:30,573 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808172325')
2018-08-08 17:23:30,694 htmlreporter.py [line: 118] INFO: 正在查询已运的测试计划
2018-08-08 17:23:30,695 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808172325',)
2018-08-08 17:23:30,824 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:23:30,824 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808172325')
2018-08-08 17:23:30,969 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:23:30,970 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:23:30,972 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808172325')
2018-08-08 17:23:31,095 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:23:31,095 htmlreporter.py [line: 185] INFO: 正在查询已运的测试计划
2018-08-08 17:23:31,096 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808172325',)
2018-08-08 17:23:31,217 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:23:31,219 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808172325')
2018-08-08 17:23:31,359 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:23:31,359 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808172326')
2018-08-08 17:23:31,480 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:23:31,480 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808172327')
2018-08-08 17:23:31,608 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:23:31,609 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808172327')
2018-08-08 17:23:31,734 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:23:31,735 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808172325')
2018-08-08 17:23:31,858 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:23:31,859 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808172328')
2018-08-08 17:23:31,981 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:23:31,982 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808172328')
2018-08-08 17:23:32,109 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:23:32,109 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808172329')
2018-08-08 17:23:32,232 htmlreporter.py [line: 276] INFO: 正在设置测试报告结果文件名
2018-08-08 17:23:32,232 htmlreporter.py [line: 286] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808172325.html
2018-08-08 17:23:32,233 htmlreporter.py [line: 279] INFO: 正在生成测试报告
2018-08-08 17:23:32,236 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:23:33,480 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808172325.html
2018-08-08 17:23:33,480 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:23:34,075 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:32:57,589 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:32:57,589 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:32:57,875 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:32:58,140 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:32:58,328 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:32:58,328 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:32:58,462 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:32:58,462 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:32:58,593 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:32:58,594 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:32:58,595 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:32:58,595 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:32:58,632 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:32:58,632 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 17:32:58,632 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:32:58,632 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:32:58,633 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:32:58,646 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:32:58,658 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:32:58,658 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:32:58,677 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:32:58,695 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:32:58,709 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:32:58,710 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:32:58,859 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:32:58,860 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:32:58,862 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:32:58,863 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:32:58,863 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:32:59,003 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:32:59,004 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:32:59,004 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,004 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,004 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,005 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:32:59,005 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:32:59,005 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:32:59,191 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:32:59,192 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:32:59,192 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:33:06 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=sl9nb3c249162lld1cq2bdohv0; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:32:59,192 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:32:59,192 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:32:59,192 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:32:59,193 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:32:59,193 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:32:59",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808173258 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:32:59,334 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:32:59,334 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:32:59,334 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:32:58", case_exec_history_id="20180808173258" WHERE executed_history_id = 20180808173258 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:32:59,477 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:32:59,512 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:31:55', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&#39;post&#39;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:32:59,526 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:32:59,526 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:32:59,661 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:32:59,661 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:32:59,661 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:32:59,662 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:32:59,662 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173259', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:32:59,797 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:32:59,798 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:32:59,798 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,798 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,798 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:32:59,799 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:32:59,799 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:32:59,799 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:32:59,884 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:32:59,884 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:32:59,885 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:33:07 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:32:59,885 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:32:59,885 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:32:59,885 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:32:59,885 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:32:59,886 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:32:59,886 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:32:59,886 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:32:59,887 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:32:59,887 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:32:59",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808173259 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:00,074 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":'post',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:33:00,074 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:33:00,074 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:33:00,075 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173259', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":\'post\',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:33:00,226 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting value: line 1 column 7 (char 6),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:33:00,226 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:33:00,226 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting value: line 1 column 7 (char 6)", protocol_method="未获取到", runtime="2018-08-08 17:33:00" WHERE executed_history_id = 20180808173259 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 17:33:00,351 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:33:00,351 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:32:59", case_exec_history_id="20180808173259" WHERE executed_history_id = 20180808173258 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:00,486 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:33:00,517 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:33:00,531 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:33:00,531 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:33:00,676 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:33:00,676 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:33:00,677 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:33:00,681 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:33:00", case_exec_history_id="20180808173300" WHERE executed_history_id = 20180808173258 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:00,832 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:33:00,848 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:33:00,862 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:33:00,862 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:33:00,889 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:33:00,906 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:33:00,922 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:33:00,922 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:33:01,054 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:33:01,054 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:33:01,055 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:33:01,055 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:33:01,055 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173301', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:33:01,180 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:33:01,180 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:33:01,180 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,180 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,181 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,181 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:33:01,181 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:33:01,181 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:33:01,267 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:33:01,268 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:33:01,268 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:33:08 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:33:01,268 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:33:01,268 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:33:01,268 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:33:01,268 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:33:01,269 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:33:01",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808173301 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:01,407 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:33:01,407 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:33:01,408 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:33:01", case_exec_history_id="20180808173301" WHERE executed_history_id = 20180808173258 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:01,577 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:33:01,631 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:31:55', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&#39;post&#39;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:33:01,651 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:33:01,651 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:33:01,777 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:33:01,777 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:33:01,777 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:33:01,778 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:33:01,778 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173301', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:33:01,908 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:33:01,908 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:33:01,909 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,909 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,909 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:33:01,909 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:33:01,909 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:33:01,909 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:33:01,996 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:33:01,996 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:33:01,996 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:33:09 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:33:01,996 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:33:01,997 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:33:01,997 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:33:01,997 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:33:01,997 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:33:01,997 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:33:01,997 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:33:01,998 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:33:01,998 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:33:01",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808173301 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:02,123 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":'post',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 17:33:02,124 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:33:02,125 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:33:02,125 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173301', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":\'post\',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:33:02,273 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting value: line 1 column 7 (char 6),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:33:02,274 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:33:02,274 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting value: line 1 column 7 (char 6)", protocol_method="未获取到", runtime="2018-08-08 17:33:02" WHERE executed_history_id = 20180808173301 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 17:33:02,430 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:33:02,431 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:33:01", case_exec_history_id="20180808173301" WHERE executed_history_id = 20180808173258 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:02,570 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:33:02,601 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:33:02,614 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:33:02,614 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808173258', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:33:02,757 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:33:02,757 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:33:02,757 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:33:02,758 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:33:02", case_exec_history_id="20180808173302" WHERE executed_history_id = 20180808173258 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:33:02,893 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:33:02,910 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:33:02,910 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:33:02,911 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 17:33:02,911 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808173258',)
2018-08-08 17:33:03,029 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 17:33:03,029 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808173258')
2018-08-08 17:33:03,148 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 17:33:03,148 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808173258')
2018-08-08 17:33:03,268 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 17:33:03,268 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808173258')
2018-08-08 17:33:03,388 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 17:33:03,388 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808173258')
2018-08-08 17:33:03,514 htmlreporter.py [line: 118] INFO: 正在查询已运的测试计划
2018-08-08 17:33:03,514 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808173258',)
2018-08-08 17:33:03,638 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:33:03,638 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808173258')
2018-08-08 17:33:03,763 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:33:03,763 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:33:03,764 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808173258')
2018-08-08 17:33:03,884 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:33:03,884 htmlreporter.py [line: 185] INFO: 正在查询已运的测试计划
2018-08-08 17:33:03,885 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808173258',)
2018-08-08 17:33:04,007 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:33:04,008 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808173258')
2018-08-08 17:33:04,131 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:33:04,132 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808173258')
2018-08-08 17:33:04,250 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:33:04,251 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808173259')
2018-08-08 17:33:04,388 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:33:04,389 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808173300')
2018-08-08 17:33:04,514 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:33:04,514 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808173258')
2018-08-08 17:33:04,645 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:33:04,645 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808173301')
2018-08-08 17:33:04,765 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:33:04,765 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808173301')
2018-08-08 17:33:04,894 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:33:04,894 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808173302')
2018-08-08 17:33:05,011 htmlreporter.py [line: 276] INFO: 正在设置测试报告结果文件名
2018-08-08 17:33:05,012 htmlreporter.py [line: 286] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808173258.html
2018-08-08 17:33:05,012 htmlreporter.py [line: 279] INFO: 正在生成测试报告
2018-08-08 17:33:05,015 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:33:06,238 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808173258.html
2018-08-08 17:33:06,238 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:33:06,901 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:41:50,405 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:41:50,406 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:41:50,653 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:41:50,896 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:41:51,100 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:41:51,101 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:41:51,224 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:41:51,225 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:41:51,357 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:41:51,358 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:41:51,358 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:41:51,358 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:41:51,389 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:41:51,389 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 17:41:51,389 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:41:51,389 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:41:51,389 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:41:51,402 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:41:51,415 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:41:51,415 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:41:51,434 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:41:51,450 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:41:51,462 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:51,462 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:41:51,586 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:41:51,587 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:41:51,587 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:41:51,587 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:51,588 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174151', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:51,714 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:41:51,715 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:41:51,715 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:51,715 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:51,715 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:51,716 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:41:51,716 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:41:51,716 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:41:51,807 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:41:51,807 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:41:51,808 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:41:59 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=5m39ibe4n0spbl1tk7ui36u6s5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:41:51,808 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:41:51,808 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:41:51,808 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:41:51,810 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:41:51,810 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:41:51",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808174151 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:51,937 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:41:51,937 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:51,937 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:41:51", case_exec_history_id="20180808174151" WHERE executed_history_id = 20180808174150 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:52,119 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:41:52,153 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:40:52', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&#39;post&#39;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:41:52,166 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:52,166 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:41:52,313 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:41:52,314 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:41:52,314 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:41:52,314 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:52,314 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174152', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:52,439 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:41:52,440 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:41:52,440 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:52,440 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:52,440 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:52,440 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:41:52,440 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:41:52,440 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:41:52,526 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:41:52,526 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:41:52,527 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:42:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:41:52,527 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:41:52,527 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:41:52,527 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:41:52,527 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:41:52,528 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:52,528 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:52,528 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:52,528 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:41:52,528 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:41:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174152 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:52,663 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":'post',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:41:52,663 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:41:52,663 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:52,664 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174152', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":\'post\',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:52,856 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting value: line 1 column 7 (char 6),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:41:52,856 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:41:52,856 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting value: line 1 column 7 (char 6)", protocol_method="未获取到", runtime="2018-08-08 17:41:52" WHERE executed_history_id = 20180808174152 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 17:41:53,014 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:53,014 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:41:52", case_exec_history_id="20180808174152" WHERE executed_history_id = 20180808174150 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:53,154 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:41:53,186 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:41:53,198 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:53,198 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:41:53,364 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:41:53,364 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:41:53,364 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:53,364 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:41:53", case_exec_history_id="20180808174153" WHERE executed_history_id = 20180808174150 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:53,503 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:41:53,519 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:41:53,533 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:41:53,533 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:41:53,551 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:41:53,568 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:41:53,581 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:53,581 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:41:53,707 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:41:53,707 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:41:53,708 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:41:53,708 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:53,708 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174153', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:53,838 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:41:53,838 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:41:53,838 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:53,839 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:53,839 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:53,839 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:41:53,839 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:41:53,839 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:41:53,927 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:41:53,927 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:41:53,927 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:42:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:41:53,928 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:41:53,928 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:41:53,928 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:41:53,928 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:41:53,928 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:41:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808174153 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:54,052 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:41:54,052 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:54,053 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:41:53", case_exec_history_id="20180808174153" WHERE executed_history_id = 20180808174150 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:54,189 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:41:54,223 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:40:52', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&#39;post&#39;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:41:54,235 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:54,236 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:41:54,369 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:41:54,369 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:41:54,370 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:41:54,370 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:54,370 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174154', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:54,505 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:41:54,506 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:41:54,506 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:54,507 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:54,508 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:41:54,509 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:41:54,510 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:41:54,510 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:41:54,607 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:41:54,608 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:41:54,608 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:42:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:41:54,608 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:41:54,608 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:41:54,608 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:41:54,609 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:41:54,609 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:54,609 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:54,609 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:41:54,611 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:41:54,611 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:41:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174154 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:54,737 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":'post',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:41:54,737 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:41:54,738 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:41:54,738 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174154', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":\'post\',"url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:41:54,861 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting value: line 1 column 7 (char 6),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 17:41:54,862 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 17:41:54,863 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting value: line 1 column 7 (char 6)", protocol_method="未获取到", runtime="2018-08-08 17:41:54" WHERE executed_history_id = 20180808174154 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 17:41:54,986 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:54,987 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 17:41:54", case_exec_history_id="20180808174154" WHERE executed_history_id = 20180808174150 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:55,135 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:41:55,192 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:41:55,214 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:41:55,214 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174150', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:41:55,340 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:41:55,340 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:41:55,340 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:41:55,341 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:41:55", case_exec_history_id="20180808174155" WHERE executed_history_id = 20180808174150 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:41:55,504 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:41:55,532 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:41:55,533 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:41:55,534 htmlreporter.py [line: 48] INFO: 正在查询测试用例总数
2018-08-08 17:41:55,534 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808174150',)
2018-08-08 17:41:55,655 htmlreporter.py [line: 54] INFO: 正在查询执行通过的用例数
2018-08-08 17:41:55,655 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808174150')
2018-08-08 17:41:55,775 htmlreporter.py [line: 60] INFO: 正在查询执行失败的用例数
2018-08-08 17:41:55,775 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808174150')
2018-08-08 17:41:55,895 htmlreporter.py [line: 66] INFO: 正在查询执行出错的用例数
2018-08-08 17:41:55,895 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808174150')
2018-08-08 17:41:56,015 htmlreporter.py [line: 72] INFO: 正在查询未执行的用例数
2018-08-08 17:41:56,016 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808174150')
2018-08-08 17:41:56,135 htmlreporter.py [line: 118] INFO: 正在查询已运的测试计划
2018-08-08 17:41:56,136 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808174150',)
2018-08-08 17:41:56,257 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:41:56,257 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808174150')
2018-08-08 17:41:56,379 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:41:56,379 htmlreporter.py [line: 150] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:41:56,379 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808174150')
2018-08-08 17:41:56,496 htmlreporter.py [line: 159] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:41:56,497 htmlreporter.py [line: 185] INFO: 正在查询已运的测试计划
2018-08-08 17:41:56,497 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808174150',)
2018-08-08 17:41:56,618 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:41:56,618 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808174150')
2018-08-08 17:41:56,737 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:41:56,738 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808174151')
2018-08-08 17:41:56,858 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:41:56,858 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808174152')
2018-08-08 17:41:56,981 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:41:56,981 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808174153')
2018-08-08 17:41:57,098 htmlreporter.py [line: 205] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:41:57,099 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808174150')
2018-08-08 17:41:57,230 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:41:57,230 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808174153')
2018-08-08 17:41:57,351 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:41:57,351 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808174154')
2018-08-08 17:41:57,474 htmlreporter.py [line: 245] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:41:57,474 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808174155')
2018-08-08 17:41:57,592 htmlreporter.py [line: 276] INFO: 正在设置测试报告结果文件名
2018-08-08 17:41:57,592 htmlreporter.py [line: 286] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808174150.html
2018-08-08 17:41:57,593 htmlreporter.py [line: 279] INFO: 正在生成测试报告
2018-08-08 17:41:57,595 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:41:58,568 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808174150.html
2018-08-08 17:41:58,568 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:41:59,303 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:49:33,931 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:49:33,932 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:49:34,184 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:49:34,426 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:49:34,623 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:49:34,624 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:49:34,751 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:49:34,751 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:49:34,874 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:49:34,875 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:49:34,875 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:49:34,875 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:49:34,906 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:49:34,906 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 17:49:34,906 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:49:34,906 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:49:34,907 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:49:34,919 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:49:34,933 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:49:34,933 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:49:34,953 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:49:34,971 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:49:34,985 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:34,986 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:49:35,112 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:49:35,112 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:49:35,113 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:49:35,113 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:35,113 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174935', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:35,248 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:49:35,248 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:35,248 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:35,248 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:35,249 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:35,249 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:49:35,249 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:49:35,249 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:49:35,371 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:35,374 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:35,375 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:42 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=b4a2bcqaec9gn4eufn4h8feke3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:35,376 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:49:35,376 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:49:35,377 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:49:35,377 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:35,378 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:49:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808174935 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:35,504 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:49:35,504 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:35,504 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:35", case_exec_history_id="20180808174935" WHERE executed_history_id = 20180808174934 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:35,641 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:49:35,674 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:49:35,686 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:35,687 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:49:35,831 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:49:35,832 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:49:35,832 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:49:35,835 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:35,836 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174935', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:36,013 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:49:36,014 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:36,014 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:36,015 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:36,015 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:36,015 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:49:36,015 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:49:36,016 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:49:36,104 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:36,104 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:36,104 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:43 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:36,104 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:49:36,104 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:49:36,105 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:49:36,105 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:49:36,105 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:36,105 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:36,105 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:36,106 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:36,106 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:49:36",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174935 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:36,231 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:49:36,231 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:49:36,231 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:36,231 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174935', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:36,354 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 17:49:36,354 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:36,354 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 17:49:36,354 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 17:49:36,354 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:36,354 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:36,355 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 17:49:36,355 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 17:49:36,356 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 17:49:36,357 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 17:49:36,561 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:36,562 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:36,562 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:44 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:36,563 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 17:49:36,564 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 17:49:36,565 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:49:36,566 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:49:36,566 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 17:49:36,567 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 17:49:36,568 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 17:49:36,571 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:36,571 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 17:49:36",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174935 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:36,692 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 17:49:36,692 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:36,693 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:35", case_exec_history_id="20180808174935" WHERE executed_history_id = 20180808174934 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:36,833 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:49:36,865 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:49:36,879 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:36,880 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:49:37,005 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:49:37,005 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:49:37,006 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:37,006 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:37", case_exec_history_id="20180808174937" WHERE executed_history_id = 20180808174934 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:37,144 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:49:37,160 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:49:37,172 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:49:37,173 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:49:37,190 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:49:37,207 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:49:37,219 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:37,219 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:49:37,375 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:49:37,375 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:49:37,375 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:49:37,376 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:37,376 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174937', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:37,505 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:49:37,505 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:37,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:37,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:37,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:37,506 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:49:37,506 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:49:37,506 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:49:37,591 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:37,591 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:37,591 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:45 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:37,592 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:49:37,592 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:49:37,592 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:49:37,593 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:37,593 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:49:37",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808174937 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:37,718 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:49:37,718 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:37,718 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:37", case_exec_history_id="20180808174937" WHERE executed_history_id = 20180808174934 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:37,858 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:49:37,891 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:49:37,904 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:37,904 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:49:38,030 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:49:38,030 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:49:38,030 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:49:38,031 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:38,031 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174938', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:38,159 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:49:38,159 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:38,159 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:38,159 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:38,159 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:38,159 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:49:38,160 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:49:38,160 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:49:38,244 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:38,244 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:38,244 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:45 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:38,245 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:49:38,245 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:49:38,245 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:49:38,245 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:49:38,246 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:38,246 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:38,246 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:49:38,247 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:38,247 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:49:38",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174938 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:38,372 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:49:38,373 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:49:38,373 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:49:38,373 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174938', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:49:38,502 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 17:49:38,504 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:49:38,504 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 17:49:38,504 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 17:49:38,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:38,505 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:49:38,505 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 17:49:38,505 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 17:49:38,505 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 17:49:38,505 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 17:49:38,641 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:49:38,641 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:49:38,642 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:49:46 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:49:38,642 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 17:49:38,642 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 17:49:38,642 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:49:38,643 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:49:38,643 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 17:49:38,643 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 17:49:38,643 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 17:49:38,643 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:49:38,643 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 17:49:38",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808174938 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:38,779 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 17:49:38,779 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:38,779 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:38", case_exec_history_id="20180808174938" WHERE executed_history_id = 20180808174934 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:38,917 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:49:38,949 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:49:38,962 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:49:38,962 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808174934', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:49:39,112 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:49:39,112 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:49:39,112 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:49:39,113 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:49:39", case_exec_history_id="20180808174939" WHERE executed_history_id = 20180808174934 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:49:39,262 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:49:39,278 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:49:39,279 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:49:39,283 htmlreporter.py [line: 49] INFO: 正在查询测试用例总数
2018-08-08 17:49:39,283 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808174934',)
2018-08-08 17:49:39,404 htmlreporter.py [line: 55] INFO: 正在查询执行通过的用例数
2018-08-08 17:49:39,404 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808174934')
2018-08-08 17:49:39,527 htmlreporter.py [line: 61] INFO: 正在查询执行失败的用例数
2018-08-08 17:49:39,528 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808174934')
2018-08-08 17:49:39,650 htmlreporter.py [line: 67] INFO: 正在查询执行出错的用例数
2018-08-08 17:49:39,650 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808174934')
2018-08-08 17:49:39,767 htmlreporter.py [line: 73] INFO: 正在查询未执行的用例数
2018-08-08 17:49:39,767 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808174934')
2018-08-08 17:49:39,885 htmlreporter.py [line: 119] INFO: 正在查询已运的测试计划
2018-08-08 17:49:39,886 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808174934',)
2018-08-08 17:49:40,006 htmlreporter.py [line: 151] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:49:40,006 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808174934')
2018-08-08 17:49:40,125 htmlreporter.py [line: 160] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:49:40,126 htmlreporter.py [line: 151] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:49:40,126 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808174934')
2018-08-08 17:49:40,253 htmlreporter.py [line: 160] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:49:40,253 htmlreporter.py [line: 186] INFO: 正在查询已运的测试计划
2018-08-08 17:49:40,254 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808174934',)
2018-08-08 17:49:40,374 htmlreporter.py [line: 206] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:49:40,375 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808174934')
2018-08-08 17:49:40,496 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:49:40,496 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808174935')
2018-08-08 17:49:40,620 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:49:40,621 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808174935')
2018-08-08 17:49:40,744 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:49:40,744 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808174937')
2018-08-08 17:49:40,866 htmlreporter.py [line: 206] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:49:40,867 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808174934')
2018-08-08 17:49:40,987 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:49:40,987 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808174937')
2018-08-08 17:49:41,110 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:49:41,110 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808174938')
2018-08-08 17:49:41,232 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:49:41,232 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808174939')
2018-08-08 17:49:41,354 htmlreporter.py [line: 277] INFO: 正在设置测试报告结果文件名
2018-08-08 17:49:41,354 htmlreporter.py [line: 287] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808174934.html
2018-08-08 17:49:41,354 htmlreporter.py [line: 280] INFO: 正在生成测试报告
2018-08-08 17:49:41,370 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:49:42,637 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808174934.html
2018-08-08 17:49:42,638 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:49:43,271 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 17:59:29,873 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 17:59:29,874 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 17:59:30,140 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 17:59:30,381 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 17:59:30,578 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 17:59:30,579 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 17:59:30,705 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 17:59:30,705 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 17:59:30,829 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 17:59:30,830 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 17:59:30,830 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 17:59:30,830 main.py [line: 114] INFO: 运行指定项目
2018-08-08 17:59:30,866 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 17:59:30,866 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 17:59:30,866 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 17:59:30,866 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 17:59:30,867 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 17:59:30,879 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 17:59:30,895 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 17:59:30,895 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 17:59:30,916 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:59:30,935 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:59:30,951 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:30,952 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:59:31,083 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:59:31,084 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:59:31,084 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:59:31,084 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:31,084 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175931', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:31,208 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:59:31,208 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:31,208 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,209 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,209 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,210 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:59:31,210 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:59:31,210 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:59:31,294 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:31,295 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:31,295 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:38 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=8hjs5tsoknacitsekcl4bksmu3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:31,295 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:59:31,296 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:59:31,296 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:59:31,297 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:31,297 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:59:31",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808175931 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:31,421 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:59:31,422 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:31,422 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:31", case_exec_history_id="20180808175931" WHERE executed_history_id = 20180808175930 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:31,560 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:59:31,595 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:59:31,608 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:31,608 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:59:31,734 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:59:31,734 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:59:31,734 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:59:31,735 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:31,735 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175931', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:31,856 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:59:31,856 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:31,857 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,857 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,857 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:31,857 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:59:31,857 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:59:31,858 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:59:31,942 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:31,942 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:31,943 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:39 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:31,946 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:59:31,946 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:59:31,947 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:59:31,947 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:59:31,947 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:31,947 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:31,947 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:31,947 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:31,948 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:59:31",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808175931 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:32,076 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:59:32,076 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:59:32,077 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:32,077 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175931', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:32,202 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 17:59:32,202 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:32,203 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 17:59:32,203 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 17:59:32,203 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:32,203 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:32,204 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 17:59:32,204 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 17:59:32,204 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 17:59:32,204 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 17:59:32,347 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:32,347 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:32,347 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:39 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:32,347 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 17:59:32,347 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 17:59:32,347 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:59:32,348 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:59:32,348 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 17:59:32,348 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 17:59:32,348 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 17:59:32,353 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:32,354 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 17:59:32",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808175931 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:32,483 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 17:59:32,483 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:32,483 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:31", case_exec_history_id="20180808175931" WHERE executed_history_id = 20180808175930 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:32,632 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:59:32,664 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:59:32,677 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:32,677 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:59:32,799 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:59:32,800 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:59:32,800 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:32,800 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:32", case_exec_history_id="20180808175932" WHERE executed_history_id = 20180808175930 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:32,935 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:59:32,951 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 17:59:32,963 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 17:59:32,963 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 17:59:32,981 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 17:59:32,998 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 17:59:33,011 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:33,011 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 17:59:33,135 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 17:59:33,135 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:59:33,135 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 17:59:33,136 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:33,136 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175933', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:33,270 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:59:33,270 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:33,270 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,270 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,270 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,270 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:59:33,270 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:59:33,271 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:59:33,355 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:33,356 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:33,356 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:40 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:33,356 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:59:33,356 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:59:33,356 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 17:59:33,358 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:33,358 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:59:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808175933 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:33,480 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 17:59:33,480 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:33,481 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:33", case_exec_history_id="20180808175933" WHERE executed_history_id = 20180808175930 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:33,638 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 17:59:33,698 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 17:59:33,721 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:33,722 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 17:59:33,847 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 17:59:33,848 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 17:59:33,848 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:59:33,849 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:33,849 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175933', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:33,971 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 17:59:33,971 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:33,971 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,972 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,972 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:33,972 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 17:59:33,972 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 17:59:33,972 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 17:59:34,061 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:34,061 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:34,061 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:34,062 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 17:59:34,062 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 17:59:34,062 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:59:34,063 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:59:34,064 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:34,064 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:34,068 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 17:59:34,069 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:34,069 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 17:59:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808175933 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:34,205 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 17:59:34,206 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 17:59:34,206 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 17:59:34,206 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175933', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 17:59:34,330 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 17:59:34,330 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 17:59:34,330 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 17:59:34,331 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 17:59:34,332 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:34,332 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 17:59:34,336 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 17:59:34,336 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 17:59:34,336 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 17:59:34,336 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 17:59:34,477 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 17:59:34,477 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 17:59:34,477 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 09:59:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 17:59:34,478 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 17:59:34,478 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 17:59:34,478 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 17:59:34,478 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 17:59:34,479 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 17:59:34,479 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 17:59:34,479 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 17:59:34,480 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 17:59:34,480 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 17:59:34",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808175933 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:34,608 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 17:59:34,608 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:34,608 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:33", case_exec_history_id="20180808175933" WHERE executed_history_id = 20180808175930 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:34,748 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 17:59:34,780 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 17:59:34,793 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 17:59:34,794 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808175930', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 17:59:34,917 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 17:59:34,917 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 17:59:34,918 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 17:59:34,918 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 17:59:34", case_exec_history_id="20180808175934" WHERE executed_history_id = 20180808175930 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 17:59:35,056 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 17:59:35,073 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 17:59:35,074 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 17:59:35,077 htmlreporter.py [line: 49] INFO: 正在查询测试用例总数
2018-08-08 17:59:35,080 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808175930',)
2018-08-08 17:59:35,203 htmlreporter.py [line: 55] INFO: 正在查询执行通过的用例数
2018-08-08 17:59:35,203 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808175930')
2018-08-08 17:59:35,322 htmlreporter.py [line: 61] INFO: 正在查询执行失败的用例数
2018-08-08 17:59:35,322 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808175930')
2018-08-08 17:59:35,439 htmlreporter.py [line: 67] INFO: 正在查询执行出错的用例数
2018-08-08 17:59:35,440 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808175930')
2018-08-08 17:59:35,561 htmlreporter.py [line: 73] INFO: 正在查询未执行的用例数
2018-08-08 17:59:35,561 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808175930')
2018-08-08 17:59:35,678 htmlreporter.py [line: 119] INFO: 正在查询已运的测试计划
2018-08-08 17:59:35,678 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808175930',)
2018-08-08 17:59:35,799 htmlreporter.py [line: 151] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 17:59:35,799 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808175930')
2018-08-08 17:59:35,925 htmlreporter.py [line: 160] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 17:59:35,926 htmlreporter.py [line: 151] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 17:59:35,926 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808175930')
2018-08-08 17:59:36,047 htmlreporter.py [line: 160] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 17:59:36,048 htmlreporter.py [line: 186] INFO: 正在查询已运的测试计划
2018-08-08 17:59:36,049 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808175930',)
2018-08-08 17:59:36,169 htmlreporter.py [line: 206] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 17:59:36,169 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808175930')
2018-08-08 17:59:36,291 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:59:36,292 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808175931')
2018-08-08 17:59:36,419 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:59:36,419 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808175931')
2018-08-08 17:59:36,547 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:59:36,548 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808175932')
2018-08-08 17:59:36,668 htmlreporter.py [line: 206] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 17:59:36,669 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808175930')
2018-08-08 17:59:36,796 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 17:59:36,797 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808175933')
2018-08-08 17:59:36,928 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 17:59:36,928 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808175933')
2018-08-08 17:59:37,052 htmlreporter.py [line: 246] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 17:59:37,052 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808175934')
2018-08-08 17:59:37,171 htmlreporter.py [line: 277] INFO: 正在设置测试报告结果文件名
2018-08-08 17:59:37,172 htmlreporter.py [line: 287] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808175930.html
2018-08-08 17:59:37,172 htmlreporter.py [line: 280] INFO: 正在生成测试报告
2018-08-08 17:59:37,175 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 17:59:38,175 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808175930.html
2018-08-08 17:59:38,175 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 17:59:38,874 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 19:50:55,195 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 19:50:55,196 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 19:50:55,410 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 19:50:55,618 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 19:50:55,815 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 19:50:55,815 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 19:50:55,922 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 19:50:55,923 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 19:50:56,030 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 19:50:56,031 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 19:50:56,031 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 19:50:56,031 main.py [line: 114] INFO: 运行指定项目
2018-08-08 19:50:56,066 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 19:50:56,066 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 19:50:56,066 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 19:50:56,067 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 19:50:56,067 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 19:50:56,080 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 19:50:56,093 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 19:50:56,094 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 19:50:56,113 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:50:56,132 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:50:56,146 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:56,146 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:50:56,261 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:50:56,261 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:50:56,261 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:50:56,261 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:56,261 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195056', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:56,379 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:50:56,380 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:56,380 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:56,380 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:56,380 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:56,381 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:50:56,381 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:50:56,381 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:50:56,506 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:56,506 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:56,507 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:03 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=6th94gtk9l854maknt73e141p3; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:56,507 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:50:56,507 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:50:56,507 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:50:56,508 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:56,508 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:50:56",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195056 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:56,619 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:50:56,619 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:56,619 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:56", case_exec_history_id="20180808195056" WHERE executed_history_id = 20180808195055 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:56,752 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:50:56,818 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:50:56,841 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:56,841 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:50:56,960 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:50:56,961 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:50:56,962 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:50:56,963 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:56,964 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195056', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:57,072 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:50:57,073 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:57,073 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:57,073 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:57,073 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:57,074 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:50:57,074 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:50:57,074 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:50:57,148 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:57,148 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:57,148 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:57,148 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:50:57,149 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:50:57,149 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:50:57,149 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:50:57,149 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:57,149 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:57,150 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:57,151 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:57,151 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:50:57",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195056 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:57,258 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:50:57,259 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:50:57,259 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:57,259 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195056', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:57,366 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:50:57,366 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:57,367 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:50:57,367 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:50:57,367 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:57,367 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:57,368 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:50:57,368 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:50:57,368 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:50:57,368 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:50:57,495 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:57,495 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:57,496 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:04 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:57,496 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:50:57,496 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:50:57,496 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:50:57,496 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:50:57,497 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:50:57,497 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:50:57,497 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:50:57,498 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:57,498 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:50:57",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195056 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:57,606 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:50:57,606 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:57,606 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:56", case_exec_history_id="20180808195056" WHERE executed_history_id = 20180808195055 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:57,728 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:50:57,761 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:50:57,773 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:57,773 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:50:57,911 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:50:57,912 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:50:57,912 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:57,912 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:57", case_exec_history_id="20180808195057" WHERE executed_history_id = 20180808195055 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:58,042 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:50:58,071 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 19:50:58,094 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 19:50:58,094 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 19:50:58,130 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:50:58,161 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:50:58,183 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:58,183 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:50:58,301 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:50:58,301 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:50:58,301 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:50:58,302 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:58,302 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195058', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:58,406 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:50:58,406 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:58,407 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:58,411 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:58,411 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:58,411 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:50:58,411 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:50:58,411 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:50:58,484 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:58,484 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:58,484 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:05 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:58,484 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:50:58,485 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:50:58,485 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:50:58,485 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:58,485 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:50:58",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195058 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:58,593 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:50:58,593 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:58,594 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:58", case_exec_history_id="20180808195058" WHERE executed_history_id = 20180808195055 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:58,725 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:50:58,785 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:50:58,807 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:58,808 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:50:58,915 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:50:58,915 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:50:58,916 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:50:58,916 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:58,916 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195058', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:59,024 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:50:59,024 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:59,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:59,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:59,024 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:59,025 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:50:59,025 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:50:59,025 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:50:59,099 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:59,099 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:59,099 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:06 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:59,099 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:50:59,099 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:50:59,099 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:50:59,099 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:50:59,100 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:59,100 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:59,100 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:50:59,100 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:59,100 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:50:59",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195058 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:59,207 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:50:59,207 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:50:59,208 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:50:59,208 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195058', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:50:59,318 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:50:59,319 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:50:59,320 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:50:59,321 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:50:59,322 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:59,322 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:50:59,322 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:50:59,323 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:50:59,323 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:50:59,323 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:50:59,461 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:50:59,461 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:50:59,462 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:51:06 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:50:59,462 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:50:59,462 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:50:59,462 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:50:59,462 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:50:59,462 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:50:59,462 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:50:59,463 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:50:59,463 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:50:59,463 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:50:59",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195058 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:59,568 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:50:59,568 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:59,568 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:58", case_exec_history_id="20180808195058" WHERE executed_history_id = 20180808195055 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:59,695 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:50:59,729 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:50:59,743 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:50:59,744 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195055', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:50:59,853 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:50:59,853 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:50:59,853 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:50:59,853 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:50:59", case_exec_history_id="20180808195059" WHERE executed_history_id = 20180808195055 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:50:59,971 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:50:59,987 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 19:50:59,987 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 19:50:59,988 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 19:50:59,988 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808195055',)
2018-08-08 19:51:00,093 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 19:51:00,094 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808195055')
2018-08-08 19:51:00,197 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 19:51:00,197 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808195055')
2018-08-08 19:51:00,299 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 19:51:00,299 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808195055')
2018-08-08 19:51:00,403 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 19:51:00,403 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808195055')
2018-08-08 19:51:00,504 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 19:51:00,504 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195055',)
2018-08-08 19:51:00,608 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 19:51:00,608 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195055')
2018-08-08 19:51:00,714 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 19:51:00,714 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 19:51:00,715 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195055')
2018-08-08 19:51:00,819 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 19:51:00,819 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 19:51:00,820 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195055',)
2018-08-08 19:51:00,923 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 19:51:00,923 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195055')
2018-08-08 19:51:01,026 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:51:01,026 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808195056')
2018-08-08 19:51:01,131 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:51:01,131 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808195056')
2018-08-08 19:51:01,238 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:51:01,239 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808195057')
2018-08-08 19:51:01,347 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 19:51:01,348 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195055')
2018-08-08 19:51:01,452 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:51:01,452 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808195058')
2018-08-08 19:51:01,558 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:51:01,559 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808195058')
2018-08-08 19:51:01,665 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:51:01,665 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808195059')
2018-08-08 19:51:01,768 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 19:51:01,768 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808195055.html
2018-08-08 19:51:01,768 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 19:51:01,771 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 19:51:03,187 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808195055.html
2018-08-08 19:51:03,187 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 19:51:04,022 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 19:52:14,699 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 19:52:14,699 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 19:52:14,915 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 19:52:15,125 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 19:52:15,324 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 19:52:15,325 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 19:52:15,475 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 19:52:15,475 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 19:52:15,583 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 19:52:15,584 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 19:52:15,584 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 19:52:15,584 main.py [line: 114] INFO: 运行指定项目
2018-08-08 19:52:15,615 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 19:52:15,616 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 19:52:15,616 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 19:52:15,616 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 19:52:15,616 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 19:52:15,629 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 19:52:15,642 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 19:52:15,643 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 19:52:15,662 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:52:15,679 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:52:15,692 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:15,693 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:52:15,800 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:52:15,800 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:52:15,801 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:52:15,802 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:15,805 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:15,915 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:52:15,915 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:15,915 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:15,916 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:15,916 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:15,916 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:52:15,916 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:52:15,917 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:52:16,002 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:16,003 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:16,004 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=qf12tv5n2nai0tddeabfsojb32; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:16,004 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:52:16,004 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:52:16,004 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:52:16,004 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:16,004 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:52:15",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195215 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:16,113 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:52:16,113 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:16,114 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:15", case_exec_history_id="20180808195215" WHERE executed_history_id = 20180808195215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:16,246 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:52:16,309 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:52:16,333 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:16,334 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:52:16,443 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:52:16,444 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:52:16,444 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:52:16,444 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:16,444 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195216', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:16,564 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:52:16,564 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:16,564 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:16,565 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:16,565 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:16,565 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:52:16,565 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:52:16,565 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:52:16,637 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:16,639 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:16,640 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:16,640 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:52:16,642 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:52:16,647 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:52:16,647 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:52:16,647 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:16,648 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:16,649 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:16,649 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:16,650 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:52:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195216 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:16,768 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:52:16,769 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:52:16,769 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:16,769 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195216', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:16,878 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:52:16,879 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:16,879 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:52:16,879 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:52:16,879 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:16,879 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:16,880 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:52:16,880 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:52:16,880 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:52:16,880 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:52:17,003 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:17,004 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:17,004 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:17,004 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:52:17,004 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:52:17,004 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:52:17,005 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:52:17,005 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:52:17,005 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:52:17,005 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:52:17,006 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:17,006 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:52:16",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195216 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:17,117 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:52:17,117 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:17,117 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:16", case_exec_history_id="20180808195216" WHERE executed_history_id = 20180808195215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:17,250 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:52:17,308 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:52:17,330 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:17,330 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:52:17,435 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:52:17,436 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:52:17,436 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:17,436 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:17", case_exec_history_id="20180808195217" WHERE executed_history_id = 20180808195215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:17,578 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:52:17,607 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 19:52:17,631 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 19:52:17,631 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 19:52:17,664 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:52:17,694 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:52:17,715 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:17,716 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:52:17,822 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:52:17,824 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:52:17,825 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:52:17,827 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:17,828 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195217', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:17,940 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:52:17,940 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:17,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:17,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:17,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:17,941 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:52:17,941 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:52:17,941 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:52:18,014 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:18,014 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:18,014 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:18,015 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:52:18,015 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:52:18,015 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:52:18,016 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:18,016 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:52:17",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195217 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:18,126 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:52:18,126 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:18,126 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:17", case_exec_history_id="20180808195217" WHERE executed_history_id = 20180808195215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:18,259 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:52:18,320 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:52:18,343 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:18,344 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:52:18,451 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:52:18,451 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:52:18,452 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:52:18,452 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:18,453 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:18,565 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:52:18,566 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:18,567 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:18,568 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:18,569 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:18,570 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:52:18,571 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:52:18,571 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:52:18,647 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:18,648 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:18,648 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:18,649 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:52:18,649 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:52:18,649 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:52:18,649 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:52:18,649 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:18,650 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:18,650 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:52:18,650 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:18,650 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:52:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195218 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:18,757 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:52:18,758 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:52:18,758 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:52:18,758 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:52:18,869 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:52:18,869 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:52:18,869 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:52:18,869 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:52:18,869 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:18,869 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:52:18,870 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:52:18,870 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:52:18,870 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:52:18,870 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:52:18,993 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:52:18,994 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:52:18,994 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:52:26 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:52:18,994 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:52:18,994 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:52:18,994 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:52:18,995 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:52:18,995 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:52:18,995 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:52:18,995 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:52:18,996 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:52:18,996 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:52:18",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195218 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:19,103 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:52:19,104 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:19,104 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:18", case_exec_history_id="20180808195218" WHERE executed_history_id = 20180808195215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:19,234 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:52:19,294 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:52:19,318 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:52:19,319 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:52:19,432 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:52:19,433 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:52:19,433 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:52:19,433 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:52:19", case_exec_history_id="20180808195219" WHERE executed_history_id = 20180808195215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:52:19,564 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:52:19,590 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 19:52:19,590 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 19:52:19,590 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 19:52:19,592 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808195215',)
2018-08-08 19:52:19,694 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 19:52:19,694 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808195215')
2018-08-08 19:52:19,798 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 19:52:19,798 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808195215')
2018-08-08 19:52:19,900 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 19:52:19,901 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808195215')
2018-08-08 19:52:20,003 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 19:52:20,004 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808195215')
2018-08-08 19:52:20,107 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 19:52:20,107 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195215',)
2018-08-08 19:52:20,214 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 19:52:20,215 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195215')
2018-08-08 19:52:20,318 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 19:52:20,319 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 19:52:20,319 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195215')
2018-08-08 19:52:20,423 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 19:52:20,424 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 19:52:20,424 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195215',)
2018-08-08 19:52:20,530 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 19:52:20,530 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195215')
2018-08-08 19:52:20,636 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:52:20,636 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808195215')
2018-08-08 19:52:20,752 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:52:20,752 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808195216')
2018-08-08 19:52:20,858 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:52:20,858 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808195217')
2018-08-08 19:52:20,961 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 19:52:20,961 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195215')
2018-08-08 19:52:21,070 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:52:21,070 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808195217')
2018-08-08 19:52:21,175 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:52:21,175 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808195218')
2018-08-08 19:52:21,281 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:52:21,281 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808195219')
2018-08-08 19:52:21,384 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 19:52:21,384 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808195215.html
2018-08-08 19:52:21,384 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 19:52:21,387 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 19:52:22,627 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808195215.html
2018-08-08 19:52:22,627 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 19:52:23,359 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 19:56:06,221 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 19:56:06,222 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 19:56:06,435 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 19:56:06,642 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 19:56:06,842 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 19:56:06,842 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 19:56:06,949 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 19:56:06,949 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 19:56:07,079 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 19:56:07,080 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 19:56:07,081 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 19:56:07,081 main.py [line: 114] INFO: 运行指定项目
2018-08-08 19:56:07,115 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 19:56:07,115 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 19:56:07,116 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 19:56:07,116 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 19:56:07,116 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 19:56:07,128 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 19:56:07,141 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 19:56:07,142 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 19:56:07,161 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:56:07,178 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:56:07,192 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:07,192 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:56:07,341 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:56:07,341 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:56:07,342 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:56:07,342 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:07,343 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195607', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:07,452 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:56:07,452 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:07,453 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:07,454 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:07,454 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:07,454 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:56:07,455 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:56:07,455 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:56:07,531 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:07,531 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:07,532 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=cmfajana3q5q0qpj53rpf05ts1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:07,532 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:56:07,533 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:56:07,533 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:56:07,534 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:07,534 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:56:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195607 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:07,640 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:56:07,640 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:07,641 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:07", case_exec_history_id="20180808195607" WHERE executed_history_id = 20180808195606 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:07,860 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:56:07,894 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:56:07,907 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:07,907 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:56:08,057 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:56:08,058 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:56:08,058 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:56:08,058 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:08,058 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195608', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:08,165 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:56:08,166 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:08,166 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:08,166 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:08,166 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:08,167 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:56:08,167 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:56:08,167 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:56:08,240 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:08,240 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:08,241 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:08,241 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:56:08,241 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:56:08,242 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:56:08,242 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:56:08,242 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:08,242 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:08,242 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:08,243 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:08,243 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:56:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195608 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:08,359 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:56:08,360 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:56:08,360 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:08,360 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195608', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:08,490 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:56:08,490 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:08,490 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:56:08,491 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:56:08,491 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:08,491 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:08,491 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:56:08,491 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:56:08,491 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:56:08,491 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:56:08,626 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:08,626 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:08,626 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:08,627 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:56:08,627 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:56:08,627 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:56:08,627 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:56:08,627 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:56:08,627 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:56:08,627 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:56:08,628 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:08,628 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:56:08",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195608 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:08,735 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:56:08,735 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:08,736 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:08", case_exec_history_id="20180808195608" WHERE executed_history_id = 20180808195606 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:08,856 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:56:08,888 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:56:08,900 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:08,900 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:56:09,008 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:56:09,008 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:56:09,008 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:09,009 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:09", case_exec_history_id="20180808195609" WHERE executed_history_id = 20180808195606 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:09,131 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:56:09,147 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 19:56:09,159 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 19:56:09,160 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 19:56:09,177 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 19:56:09,194 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 19:56:09,207 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:09,207 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 19:56:09,314 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 19:56:09,314 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:56:09,314 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 19:56:09,314 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:09,314 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195609', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:09,421 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:56:09,421 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:09,422 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:09,422 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:09,422 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:09,422 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:56:09,422 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:56:09,422 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:56:09,495 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:09,495 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:09,495 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:16 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:09,496 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:56:09,496 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:56:09,496 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 19:56:09,496 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:09,497 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:56:09",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808195609 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:09,601 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 19:56:09,601 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:09,601 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:09", case_exec_history_id="20180808195609" WHERE executed_history_id = 20180808195606 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:09,730 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 19:56:09,791 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 19:56:09,813 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:09,814 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 19:56:09,923 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 19:56:09,924 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 19:56:09,925 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:56:09,927 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:09,928 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195609', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:10,059 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 19:56:10,059 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:10,059 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:10,059 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:10,059 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:10,059 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 19:56:10,060 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 19:56:10,060 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 19:56:10,140 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:10,141 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:10,141 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:17 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:10,141 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 19:56:10,141 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 19:56:10,141 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:56:10,142 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:56:10,142 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:10,142 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:10,142 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 19:56:10,144 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:10,144 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 19:56:10",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195609 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:10,255 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 19:56:10,255 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 19:56:10,256 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 19:56:10,256 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195609', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 19:56:10,366 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 19:56:10,367 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 19:56:10,368 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 19:56:10,368 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 19:56:10,369 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:10,369 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 19:56:10,369 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 19:56:10,369 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 19:56:10,370 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 19:56:10,370 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 19:56:10,501 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 19:56:10,502 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 19:56:10,503 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 11:56:17 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 19:56:10,503 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 19:56:10,504 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 19:56:10,504 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 19:56:10,504 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 19:56:10,505 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 19:56:10,505 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 19:56:10,505 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 19:56:10,505 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 19:56:10,506 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 19:56:10",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808195609 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:10,629 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 19:56:10,631 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:10,632 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:09", case_exec_history_id="20180808195609" WHERE executed_history_id = 20180808195606 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:10,753 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 19:56:10,785 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 19:56:10,798 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 19:56:10,798 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808195606', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 19:56:10,915 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 19:56:10,915 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 19:56:10,915 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 19:56:10,915 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 19:56:10", case_exec_history_id="20180808195610" WHERE executed_history_id = 20180808195606 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 19:56:11,048 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 19:56:11,076 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 19:56:11,076 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 19:56:11,077 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 19:56:11,077 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808195606',)
2018-08-08 19:56:11,185 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 19:56:11,186 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808195606')
2018-08-08 19:56:11,286 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 19:56:11,286 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808195606')
2018-08-08 19:56:11,390 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 19:56:11,390 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808195606')
2018-08-08 19:56:11,495 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 19:56:11,495 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808195606')
2018-08-08 19:56:11,600 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 19:56:11,600 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195606',)
2018-08-08 19:56:11,705 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 19:56:11,706 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195606')
2018-08-08 19:56:11,811 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 19:56:11,812 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 19:56:11,812 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195606')
2018-08-08 19:56:11,918 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 19:56:11,919 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 19:56:11,919 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808195606',)
2018-08-08 19:56:12,023 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 19:56:12,023 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808195606')
2018-08-08 19:56:12,126 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:56:12,126 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808195607')
2018-08-08 19:56:12,232 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:56:12,233 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808195608')
2018-08-08 19:56:12,338 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:56:12,338 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808195609')
2018-08-08 19:56:12,443 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 19:56:12,443 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808195606')
2018-08-08 19:56:12,548 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 19:56:12,548 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808195609')
2018-08-08 19:56:12,654 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 19:56:12,654 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808195609')
2018-08-08 19:56:12,761 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 19:56:12,761 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808195610')
2018-08-08 19:56:12,867 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 19:56:12,867 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808195606.html
2018-08-08 19:56:12,868 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 19:56:12,871 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 19:56:14,146 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808195606.html
2018-08-08 19:56:14,147 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 19:56:14,782 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:00:04,391 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:00:04,391 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:00:04,604 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:00:04,811 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:00:05,019 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:00:05,019 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:00:05,124 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:00:05,125 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:00:05,236 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:00:05,237 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:00:05,237 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:00:05,238 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:00:05,268 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:00:05,269 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:00:05,269 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:00:05,269 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:00:05,269 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:00:05,283 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:00:05,297 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:00:05,297 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:00:05,317 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:00:05,334 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:00:05,346 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:05,346 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:00:05,453 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:00:05,453 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:00:05,453 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:00:05,454 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:05,454 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200005', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:05,561 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:00:05,561 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:05,561 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:05,562 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:05,562 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:05,562 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:00:05,563 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:00:05,563 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:00:05,651 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:05,652 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:05,652 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:12 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=gaqfo364opnf7us186petq8lr1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:05,653 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:00:05,653 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:00:05,653 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:00:05,655 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:05,655 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:00:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200005 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:05,771 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:00:05,771 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:05,771 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:05", case_exec_history_id="20180808200005" WHERE executed_history_id = 20180808200004 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:05,902 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:00:05,965 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:00:05,987 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:05,987 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:00:06,096 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:00:06,096 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:00:06,096 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:00:06,097 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:06,097 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200006', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:06,204 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:00:06,204 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:06,204 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:06,205 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:06,205 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:06,205 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:00:06,205 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:00:06,206 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:00:06,278 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:06,279 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:06,279 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:06,279 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:00:06,279 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:00:06,280 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:00:06,280 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:00:06,280 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:06,280 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:06,280 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:06,281 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:06,281 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:00:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200006 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:06,387 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:00:06,388 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:00:06,388 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:06,388 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200006', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:06,507 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:00:06,507 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:06,508 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:00:06,508 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:00:06,508 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:06,508 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:06,509 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:00:06,509 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:00:06,509 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:00:06,509 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:00:06,637 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:06,637 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:06,637 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:06,638 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:00:06,638 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:00:06,638 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:00:06,638 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:00:06,639 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:00:06,639 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:00:06,639 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:00:06,640 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:06,640 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:00:06",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200006 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:06,748 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:00:06,749 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:06,749 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:06", case_exec_history_id="20180808200006" WHERE executed_history_id = 20180808200004 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:06,872 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:00:06,906 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:00:06,919 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:06,919 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:00:07,028 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:00:07,029 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:00:07,029 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:07,029 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:07", case_exec_history_id="20180808200007" WHERE executed_history_id = 20180808200004 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:07,147 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:00:07,162 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:00:07,175 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:00:07,176 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:00:07,194 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:00:07,210 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:00:07,223 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:07,223 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:00:07,331 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:00:07,331 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:00:07,331 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:00:07,332 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:07,332 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200007', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:07,440 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:00:07,440 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:07,441 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:07,444 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:07,445 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:07,445 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:00:07,445 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:00:07,445 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:00:07,520 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:07,521 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:07,522 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:07,522 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:00:07,523 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:00:07,524 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:00:07,524 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:07,524 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:00:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200007 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:07,635 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:00:07,636 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:07,636 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:07", case_exec_history_id="20180808200007" WHERE executed_history_id = 20180808200004 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:07,766 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:00:07,826 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:00:07,847 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:07,847 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:00:07,962 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:00:07,962 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:00:07,962 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:00:07,962 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:07,963 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200007', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:08,075 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:00:08,076 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:08,076 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:08,076 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:08,076 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:08,077 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:00:08,077 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:00:08,077 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:00:08,152 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:08,152 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:08,152 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:08,152 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:00:08,153 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:00:08,153 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:00:08,153 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:00:08,153 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:08,153 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:08,154 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:00:08,155 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:08,155 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:00:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200007 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:08,263 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:00:08,263 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:00:08,264 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:00:08,264 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200007', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:00:08,375 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:00:08,376 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:00:08,378 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:00:08,379 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:00:08,382 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:08,382 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:00:08,383 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:00:08,383 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:00:08,383 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:00:08,383 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:00:08,510 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:00:08,510 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:00:08,510 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:00:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:00:08,510 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:00:08,511 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:00:08,511 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:00:08,511 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:00:08,511 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:00:08,512 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:00:08,512 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:00:08,513 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:00:08,513 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:00:08",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200007 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:08,621 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:00:08,622 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:08,622 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:07", case_exec_history_id="20180808200007" WHERE executed_history_id = 20180808200004 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:08,748 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:00:08,783 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:00:08,796 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:00:08,796 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200004', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:00:08,904 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:00:08,904 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:00:08,905 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:00:08,905 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:00:08", case_exec_history_id="20180808200008" WHERE executed_history_id = 20180808200004 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:00:09,065 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:00:09,080 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:00:09,080 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:00:09,081 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:00:09,081 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808200004',)
2018-08-08 20:00:09,186 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:00:09,186 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808200004')
2018-08-08 20:00:09,292 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:00:09,292 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808200004')
2018-08-08 20:00:09,395 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:00:09,395 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808200004')
2018-08-08 20:00:09,498 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:00:09,498 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808200004')
2018-08-08 20:00:09,601 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:00:09,601 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200004',)
2018-08-08 20:00:09,704 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:00:09,705 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200004')
2018-08-08 20:00:09,811 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:00:09,812 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:00:09,812 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200004')
2018-08-08 20:00:09,915 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:00:09,915 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:00:09,915 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200004',)
2018-08-08 20:00:10,018 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:00:10,018 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200004')
2018-08-08 20:00:10,122 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:00:10,123 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808200005')
2018-08-08 20:00:10,229 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:00:10,229 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808200006')
2018-08-08 20:00:10,332 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:00:10,332 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808200007')
2018-08-08 20:00:10,437 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:00:10,437 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200004')
2018-08-08 20:00:10,544 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:00:10,544 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808200007')
2018-08-08 20:00:10,651 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:00:10,651 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808200007')
2018-08-08 20:00:10,755 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:00:10,756 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808200008')
2018-08-08 20:00:10,861 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:00:10,862 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808200004.html
2018-08-08 20:00:10,862 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:00:10,866 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:00:12,105 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808200004.html
2018-08-08 20:00:12,106 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:00:12,749 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:01:44,125 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:01:44,125 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:01:44,341 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:01:44,549 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:01:44,741 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:01:44,741 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:01:44,850 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:01:44,851 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:01:44,957 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:01:44,958 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:01:44,958 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:01:44,958 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:01:44,989 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:01:44,989 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:01:44,990 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:01:44,990 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:01:44,990 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:01:45,002 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:01:45,015 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:01:45,016 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:01:45,036 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:01:45,053 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:01:45,067 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:45,067 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:01:45,176 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:01:45,176 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:01:45,177 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:01:45,177 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:45,177 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200145', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:45,295 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:01:45,295 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:45,295 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,296 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,296 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,296 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:01:45,296 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:01:45,297 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:01:45,447 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:45,447 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:45,448 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:52 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=m4ghqvki0m1pqptbetnsfuk8n7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:45,448 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:01:45,449 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:01:45,449 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:01:45,450 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:45,450 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:01:45",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200145 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:45,558 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:01:45,559 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:45,560 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:45", case_exec_history_id="20180808200145" WHERE executed_history_id = 20180808200144 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:45,697 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:01:45,732 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:01:45,746 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:45,746 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:01:45,853 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:01:45,853 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:01:45,854 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:01:45,854 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:45,854 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200145', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:45,962 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:01:45,962 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:45,962 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,962 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,963 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:45,963 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:01:45,963 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:01:45,963 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:01:46,036 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:46,036 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:46,036 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:46,037 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:01:46,037 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:01:46,037 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:01:46,037 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:01:46,037 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:46,037 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:46,037 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:46,038 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:46,038 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:01:45",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200145 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:46,144 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:01:46,145 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:01:46,145 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:46,145 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200145', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:46,282 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:01:46,282 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:46,282 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:01:46,283 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:01:46,283 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:46,283 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:46,283 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:01:46,284 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:01:46,284 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:01:46,284 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:01:46,499 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:46,500 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:46,500 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:53 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:46,501 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:01:46,502 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:01:46,502 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:01:46,502 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:01:46,502 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:01:46,502 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:01:46,502 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:01:46,503 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:46,503 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:01:46",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200145 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:46,612 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:01:46,613 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:46,613 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:45", case_exec_history_id="20180808200145" WHERE executed_history_id = 20180808200144 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:46,773 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:01:46,804 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:01:46,815 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:46,815 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:01:46,929 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:01:46,929 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:01:46,930 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:46,930 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:46", case_exec_history_id="20180808200146" WHERE executed_history_id = 20180808200144 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:47,077 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:01:47,093 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:01:47,106 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:01:47,106 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:01:47,124 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:01:47,140 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:01:47,152 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:47,153 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:01:47,259 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:01:47,259 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:01:47,259 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:01:47,260 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:47,260 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200147', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:47,378 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:01:47,378 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:47,378 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:47,379 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:47,379 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:47,379 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:01:47,379 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:01:47,379 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:01:47,453 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:47,454 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:47,454 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:54 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:47,454 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:01:47,454 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:01:47,454 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:01:47,455 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:47,456 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:01:47",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200147 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:47,564 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:01:47,564 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:47,564 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:47", case_exec_history_id="20180808200147" WHERE executed_history_id = 20180808200144 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:47,695 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:01:47,755 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:01:47,779 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:47,779 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:01:47,891 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:01:47,892 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:01:47,892 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:01:47,892 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:47,893 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200147', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:48,001 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:01:48,002 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:48,002 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:48,002 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:48,002 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:48,002 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:01:48,002 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:01:48,002 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:01:48,075 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:48,075 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:48,075 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:55 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:48,075 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:01:48,076 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:01:48,076 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:01:48,076 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:01:48,076 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:48,077 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:48,077 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:01:48,078 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:48,078 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:01:48",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200147 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:48,185 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:01:48,185 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:01:48,186 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:01:48,186 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200147', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:01:48,299 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:01:48,299 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:01:48,300 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:01:48,300 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:01:48,300 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:48,300 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:01:48,301 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:01:48,301 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:01:48,301 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:01:48,302 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:01:48,431 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:01:48,431 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:01:48,432 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:01:55 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:01:48,432 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:01:48,432 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:01:48,432 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:01:48,432 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:01:48,433 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:01:48,433 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:01:48,433 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:01:48,434 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:01:48,435 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:01:48",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200147 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:48,545 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:01:48,545 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:48,546 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:47", case_exec_history_id="20180808200147" WHERE executed_history_id = 20180808200144 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:48,686 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:01:48,750 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:01:48,774 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:01:48,776 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200144', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:01:48,885 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:01:48,885 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:01:48,885 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:01:48,885 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:01:48", case_exec_history_id="20180808200148" WHERE executed_history_id = 20180808200144 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:01:49,014 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:01:49,042 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:01:49,042 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:01:49,043 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:01:49,043 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808200144',)
2018-08-08 20:01:49,147 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:01:49,147 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808200144')
2018-08-08 20:01:49,248 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:01:49,248 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808200144')
2018-08-08 20:01:49,364 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:01:49,366 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808200144')
2018-08-08 20:01:49,470 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:01:49,470 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808200144')
2018-08-08 20:01:49,573 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:01:49,573 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200144',)
2018-08-08 20:01:49,676 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:01:49,676 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200144')
2018-08-08 20:01:49,781 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:01:49,781 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:01:49,782 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200144')
2018-08-08 20:01:49,887 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:01:49,888 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:01:49,888 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200144',)
2018-08-08 20:01:49,992 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:01:49,992 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200144')
2018-08-08 20:01:50,097 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:01:50,097 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808200145')
2018-08-08 20:01:50,204 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:01:50,204 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808200145')
2018-08-08 20:01:50,310 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:01:50,310 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808200146')
2018-08-08 20:01:50,414 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:01:50,415 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200144')
2018-08-08 20:01:50,519 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:01:50,519 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808200147')
2018-08-08 20:01:50,624 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:01:50,624 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808200147')
2018-08-08 20:01:50,730 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:01:50,730 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808200148')
2018-08-08 20:01:50,836 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:01:50,836 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808200144.html
2018-08-08 20:01:50,836 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:01:50,839 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:01:52,093 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808200144.html
2018-08-08 20:01:52,093 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:01:52,750 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:06:51,527 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:06:51,527 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:06:51,760 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:06:51,970 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:06:52,154 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:06:52,154 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:06:52,262 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:06:52,262 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:06:52,371 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:06:52,371 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:06:52,372 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:06:52,372 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:06:52,425 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:06:52,425 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:06:52,425 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:06:52,426 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:06:52,426 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:06:52,448 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:06:52,472 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:06:52,472 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:06:52,506 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:06:52,539 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:06:52,567 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:52,567 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:06:52,677 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:06:52,678 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:06:52,678 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:06:52,678 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:52,679 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200652', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:52,802 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:06:52,802 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:52,802 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:52,803 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:52,803 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:52,803 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:06:52,803 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:06:52,804 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:06:52,882 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:52,884 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:52,884 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:06:59 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=i4m86t4215sh8oe9hbekd7bve7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:52,887 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:06:52,888 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:06:52,888 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:06:52,888 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:52,888 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:06:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200652 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:53,008 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:06:53,008 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:53,009 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:52", case_exec_history_id="20180808200652" WHERE executed_history_id = 20180808200651 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:53,132 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:06:53,167 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:06:53,179 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:53,179 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:06:53,290 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:06:53,290 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:06:53,290 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:06:53,290 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:53,291 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200653', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:53,413 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:06:53,413 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:53,413 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:53,413 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:53,414 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:53,414 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:06:53,414 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:06:53,414 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:06:53,488 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:53,488 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:53,488 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:07:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:53,489 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:06:53,489 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:06:53,490 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:06:53,491 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:06:53,494 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:53,494 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:53,494 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:53,495 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:53,495 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:06:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200653 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:53,615 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:06:53,615 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:06:53,616 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:53,616 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200653', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:53,728 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:06:53,728 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:53,728 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:06:53,729 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:06:53,729 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:53,729 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:53,729 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:06:53,730 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:06:53,730 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:06:53,730 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:06:53,862 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:53,863 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:53,863 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:07:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:53,863 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:06:53,863 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:06:53,863 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:06:53,863 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:06:53,863 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:06:53,863 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:06:53,863 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:06:53,864 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:53,864 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:06:53",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200653 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:53,972 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:06:53,972 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:53,972 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:53", case_exec_history_id="20180808200653" WHERE executed_history_id = 20180808200651 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:54,093 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:06:54,127 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:06:54,140 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:54,140 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:06:54,259 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:06:54,260 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:06:54,260 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:54,260 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:54", case_exec_history_id="20180808200654" WHERE executed_history_id = 20180808200651 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:54,388 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:06:54,417 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:06:54,439 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:06:54,440 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:06:54,472 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:06:54,502 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:06:54,525 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:54,525 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:06:54,646 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:06:54,647 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:06:54,647 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:06:54,647 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:54,647 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200654', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:54,771 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:06:54,771 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:54,771 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:54,771 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:54,771 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:54,771 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:06:54,772 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:06:54,772 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:06:54,845 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:54,845 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:54,845 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:07:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:54,846 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:06:54,847 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:06:54,847 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:06:54,848 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:54,848 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:06:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200654 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:54,955 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:06:54,955 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:54,956 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:54", case_exec_history_id="20180808200654" WHERE executed_history_id = 20180808200651 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:55,094 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:06:55,153 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 02:48:43', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;}<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:06:55,178 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:55,179 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:06:55,288 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:06:55,288 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:06:55,289 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:06:55,289 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:55,289 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200655', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:55,399 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:06:55,399 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:55,399 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:55,399 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:55,400 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:55,400 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:06:55,400 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:06:55,400 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:06:55,475 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:55,475 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:55,475 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:07:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:55,475 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:06:55,475 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:06:55,476 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:06:55,476 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:06:55,476 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:55,476 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:55,476 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:06:55,477 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:55,477 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:06:55",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200655 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:55,588 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}
2018-08-08 20:06:55,589 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:06:55,590 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:06:55,590 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200655', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:06:55,698 testcase.py [line: 140] INFO: 开始执行步骤操作[第2步]
2018-08-08 20:06:55,698 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:06:55,698 casestep.py [line: 135] INFO: 从字符串中找到待替换的非全局动态参数：[token_1]
2018-08-08 20:06:55,698 casestep.py [line: 168] INFO: 转换后的参数体为：OrderedDict([('token', '[token_1]'), ('user_name', '13811110000'), ('password', 'e10adc3949ba59abbe56e057f20f883e'), ('version', '3.7')])
2018-08-08 20:06:55,699 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:55,699 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:06:55,699 InterfaceUnittestTestCase.py [line: 32] INFO: 正在发起POST请求...
2018-08-08 20:06:55,699 httpprotocol.py [line: 111] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/user/login
2018-08-08 20:06:55,700 httpprotocol.py [line: 112] INFO: 参数为：b'token=%5Btoken_1%5D&user_name=13811110000&password=e10adc3949ba59abbe56e057f20f883e&version=3.7'
2018-08-08 20:06:55,700 httpprotocol.py [line: 113] INFO: 请求头为：{}
2018-08-08 20:06:55,829 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:06:55,829 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:06:55,829 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:07:02 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:06:55,829 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":{"uid":"356534","id":"278703","user_type":"3","cellphone":"13811110000","cellphone_check":"1","expected_cost":"0","city_name":"葫芦岛","province_name":"辽宁","nickname":"","icon":"","order_count":"0","grade":"0","token":"FafcDBR30T5UmfUX7Sa0YqlxBRgivJHMmScPUmsEmrV6EAUX+8mZ+7ghayOr4mkI2s3SVYAC68Mg5xOwqyAalKvx\/m2ymK3UW\/PZc3X2U8W58rfwHpK1KEilESQqDK71SgrQZ69NIGhS0l0EUMTdLTzRKOskAGrtgzR2tXuWjU00kgklPNnTDQPsxdMZQ7XBrWtayqJ0pfrIk7EcLtHamY83wVogLEMNbV+CqhRVO\/bRfEPU+R9f9NZBiY9UgJ55DZkt6UROQgfl76e8mH58def4NPt131lkCRFKk+ZUYmfeYTVrhZI5GFkk5uuUF2lb5qiDrTjrKYDwhoq8\/ozrF4VnT0rxKyxPUdC0K6imm86OHL7\/qDCVLNEW3jwHIWgB5QyWxjYxHBc3hzITU6dKZJgQWrv2epXH1Dk8JMI\/hw3ogtOjas9muXQfO0ofkiIrzavovqhax1ZjzdNR2uvUKBJ2lJ5\/4ddZvsC7fP4s351hi5MIpp4C4eBRtJGVWqNTGB5qVCxLhtiNSLfTlHLJj6ytxlTFVS0dSGqSf4V9Tm\/gzrXHtkO2wBIHcRHdrXBsR+QJL2nSmZfGCKuA4ULSnn7TSk\/N2co5+L\/G1kW5PsrOjam2xbHB9DXMqOavtPNvQ2mRRB1jTooNxMDDdqE90uAbl8eZswkvEXT+MncdNxg=","new_order_count":0,"not_lf_order_count":0,"lf_order_count":0,"is_new_sms":0}}
2018-08-08 20:06:55,830 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："id":"278703"
2018-08-08 20:06:55,830 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:06:55,830 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:06:55,830 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：None
2018-08-08 20:06:55,830 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：None
2018-08-08 20:06:55,830 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-None
2018-08-08 20:06:55,831 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:06:55,831 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2018-08-08 20:06:55",step_action="{'方法': 'post', 'url': '/mapp/user/login', '参数': {'token': '[token_1]', 'user_name': '13811110000', 'password': 'e10adc3949ba59abbe56e057f20f883e', 'version': '3.7'}}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''id':'278703'', '消息': '获取token失败,id不为278703'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200655 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:55,936 testcase.py [line: 235] INFO: 测试用例[id=1083, name=账号密码登录成功]执行成功
2018-08-08 20:06:55,937 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:55,938 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:55", case_exec_history_id="20180808200655" WHERE executed_history_id = 20180808200651 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:56,061 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:06:56,093 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:06:56,106 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:06:56,106 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200651', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:06:56,233 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:06:56,233 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:06:56,234 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:06:56,234 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:06:56", case_exec_history_id="20180808200656" WHERE executed_history_id = 20180808200651 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:06:56,350 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:06:56,366 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:06:56,367 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:06:56,370 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:06:56,371 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808200651',)
2018-08-08 20:06:56,476 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:06:56,476 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808200651')
2018-08-08 20:06:56,578 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:06:56,578 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808200651')
2018-08-08 20:06:56,681 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:06:56,682 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808200651')
2018-08-08 20:06:56,786 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:06:56,787 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808200651')
2018-08-08 20:06:56,899 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:06:56,900 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200651',)
2018-08-08 20:06:57,006 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:06:57,006 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200651')
2018-08-08 20:06:57,113 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:06:57,114 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:06:57,114 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200651')
2018-08-08 20:06:57,215 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:06:57,215 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:06:57,216 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200651',)
2018-08-08 20:06:57,321 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:06:57,321 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200651')
2018-08-08 20:06:57,425 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:06:57,425 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808200652')
2018-08-08 20:06:57,532 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:06:57,532 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808200653')
2018-08-08 20:06:57,638 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:06:57,638 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808200654')
2018-08-08 20:06:57,741 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:06:57,742 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200651')
2018-08-08 20:06:57,844 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:06:57,846 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808200654')
2018-08-08 20:06:57,955 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:06:57,955 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808200655')
2018-08-08 20:06:58,062 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:06:58,062 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808200656')
2018-08-08 20:06:58,167 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:06:58,168 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808200651.html
2018-08-08 20:06:58,168 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:06:58,171 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:06:59,167 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808200651.html
2018-08-08 20:06:59,167 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:06:59,834 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:08:04,553 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:08:04,554 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:08:04,768 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:08:04,977 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:08:05,168 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:08:05,168 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:08:05,279 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:08:05,279 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:08:05,386 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:08:05,387 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:08:05,387 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:08:05,387 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:08:05,433 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:08:05,433 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:08:05,434 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:08:05,434 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:08:05,434 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:08:05,454 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:08:05,476 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:08:05,477 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:08:05,507 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:08:05,534 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:08:05,556 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:05,556 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:08:05,679 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:08:05,680 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:08:05,680 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:08:05,680 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:05,680 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200805', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:05,841 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:08:05,841 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:08:05,841 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:05,841 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:05,842 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:05,842 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:08:05,842 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:08:05,842 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:08:05,921 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:08:05,922 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:08:05,922 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:08:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=dritmg24ig6vct3i6p8heh66g2; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:08:05,922 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:08:05,922 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:08:05,922 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:08:05,923 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:08:05,923 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:08:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200805 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:06,032 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:08:06,033 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:06,034 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:08:05", case_exec_history_id="20180808200805" WHERE executed_history_id = 20180808200804 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:06,165 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:08:06,213 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:08:06,230 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:06,231 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:08:06,403 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:08:06,403 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:08:06,404 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:08:06,405 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:06,405 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200806', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:06,514 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:08:06,515 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:08:06,515 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:06,516 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:06,520 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:06,520 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:08:06,520 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:08:06,520 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:08:06,593 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:08:06,593 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:08:06,594 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:08:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:08:06,594 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:08:06,595 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:08:06,595 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:08:06,595 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:08:06,595 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:06,595 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:06,595 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:06,596 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:08:06,596 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:08:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200806 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:06,711 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:08:06,711 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:08:06,712 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:06,712 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200806', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:06,854 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:08:06,855 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:08:06,855 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:08:06" WHERE executed_history_id = 20180808200806 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:08:06,970 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:06,970 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:08:06", case_exec_history_id="20180808200806" WHERE executed_history_id = 20180808200804 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:07,099 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:08:07,129 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:08:07,141 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:07,141 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:08:07,250 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:08:07,251 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:08:07,251 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:07,252 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:08:07", case_exec_history_id="20180808200807" WHERE executed_history_id = 20180808200804 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:07,375 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:08:07,397 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:08:07,409 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:08:07,409 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:08:07,429 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:08:07,444 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:08:07,458 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:07,458 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:08:07,568 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:08:07,568 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:08:07,568 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:08:07,569 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:07,569 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200807', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:07,696 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:08:07,696 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:08:07,697 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:07,697 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:07,697 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:07,697 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:08:07,698 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:08:07,698 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:08:07,772 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:08:07,773 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:08:07,773 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:08:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:08:07,773 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:08:07,773 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:08:07,773 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:08:07,774 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:08:07,775 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:08:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200807 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:07,887 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:08:07,887 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:07,887 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:08:07", case_exec_history_id="20180808200807" WHERE executed_history_id = 20180808200804 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:08,013 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:08:08,046 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:08:08,058 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:08,059 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:08:08,176 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:08:08,176 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:08:08,176 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:08:08,176 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:08,176 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200808', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:08,304 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:08:08,304 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:08:08,305 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:08,305 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:08,305 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:08:08,305 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:08:08,306 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:08:08,306 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:08:08,384 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:08:08,384 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:08:08,384 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:08:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:08:08,385 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:08:08,385 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:08:08,385 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:08:08,385 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:08:08,385 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:08,386 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:08,386 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:08:08,387 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:08:08,387 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:08:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200808 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:08,496 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:08:08,496 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:08:08,496 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:08:08,497 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200808', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:08:08,606 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:08:08,606 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:08:08,606 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:08:08" WHERE executed_history_id = 20180808200808 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:08:08,727 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:08,727 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:08:08", case_exec_history_id="20180808200808" WHERE executed_history_id = 20180808200804 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:08,846 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:08:08,878 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:08:08,891 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:08:08,891 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200804', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:08:09,010 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:08:09,010 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:08:09,011 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:08:09,011 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:08:09", case_exec_history_id="20180808200809" WHERE executed_history_id = 20180808200804 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:08:09,139 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:08:09,154 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:08:09,154 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:08:09,155 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:08:09,155 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808200804',)
2018-08-08 20:08:09,260 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:08:09,261 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808200804')
2018-08-08 20:08:09,365 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:08:09,365 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808200804')
2018-08-08 20:08:09,468 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:08:09,468 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808200804')
2018-08-08 20:08:09,571 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:08:09,572 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808200804')
2018-08-08 20:08:09,675 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:08:09,676 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200804',)
2018-08-08 20:08:09,781 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:08:09,781 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200804')
2018-08-08 20:08:09,887 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:08:09,888 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:08:09,888 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200804')
2018-08-08 20:08:09,994 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:08:09,995 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:08:09,995 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200804',)
2018-08-08 20:08:10,100 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:08:10,100 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200804')
2018-08-08 20:08:10,206 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:08:10,206 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808200805')
2018-08-08 20:08:10,315 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:08:10,316 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808200806')
2018-08-08 20:08:10,423 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:08:10,424 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808200807')
2018-08-08 20:08:10,530 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:08:10,530 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200804')
2018-08-08 20:08:10,636 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:08:10,637 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808200807')
2018-08-08 20:08:10,743 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:08:10,743 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808200808')
2018-08-08 20:08:10,855 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:08:10,862 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808200809')
2018-08-08 20:08:10,970 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:08:10,971 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808200804.html
2018-08-08 20:08:10,971 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:08:10,974 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:08:12,106 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808200804.html
2018-08-08 20:08:12,106 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:08:13,025 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:09:05,271 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:09:05,272 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:09:05,490 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:09:05,700 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:09:05,887 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:09:05,887 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:09:06,000 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:09:06,000 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:09:06,109 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:09:06,110 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:09:06,111 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:09:06,111 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:09:06,143 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:09:06,144 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:09:06,144 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:09:06,144 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:09:06,145 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:09:06,157 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:09:06,170 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:09:06,171 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:09:06,190 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:09:06,206 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:09:06,220 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:06,220 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:09:06,335 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:09:06,335 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:09:06,335 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:09:06,336 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:06,336 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200906', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:06,464 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:09:06,465 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:09:06,465 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:06,465 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:06,465 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:06,466 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:09:06,466 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:09:06,466 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:09:06,561 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:09:06,562 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:09:06,562 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:09:13 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=eslu6sbjdvqbfjl5t6353da4u1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:09:06,562 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:09:06,562 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:09:06,563 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:09:06,564 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:09:06,564 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:09:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200906 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:06,669 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:09:06,670 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:06,670 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:09:06", case_exec_history_id="20180808200906" WHERE executed_history_id = 20180808200905 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:06,790 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:09:06,823 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:09:06,836 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:06,836 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:09:06,946 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:09:06,946 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:09:06,946 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:09:06,946 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:06,947 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200906', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:07,055 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:09:07,055 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:09:07,056 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:07,056 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:07,056 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:07,056 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:09:07,056 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:09:07,057 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:09:07,130 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:09:07,131 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:09:07,131 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:09:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:09:07,131 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:09:07,132 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:09:07,132 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:09:07,132 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:09:07,132 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:07,132 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:07,133 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:07,133 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:09:07,133 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:09:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200906 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:07,241 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:09:07,241 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:09:07,241 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:07,241 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200906', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:07,352 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:09:07,353 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:09:07,353 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:09:07" WHERE executed_history_id = 20180808200906 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:09:07,466 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:07,467 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:09:06", case_exec_history_id="20180808200906" WHERE executed_history_id = 20180808200905 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:07,587 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:09:07,622 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:09:07,634 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:07,634 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:09:07,741 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:09:07,741 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:09:07,741 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:07,742 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:09:07", case_exec_history_id="20180808200907" WHERE executed_history_id = 20180808200905 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:07,863 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:09:07,878 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:09:07,891 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:09:07,891 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:09:07,908 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:09:07,925 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:09:07,938 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:07,938 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:09:08,053 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:09:08,053 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:09:08,054 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:09:08,054 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:08,054 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200908', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:08,163 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:09:08,164 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:09:08,164 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,164 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,164 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,165 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:09:08,165 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:09:08,165 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:09:08,239 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:09:08,240 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:09:08,240 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:09:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:09:08,240 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:09:08,241 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:09:08,241 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:09:08,241 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:09:08,241 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:09:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808200908 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:08,350 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:09:08,350 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:08,350 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:09:08", case_exec_history_id="20180808200908" WHERE executed_history_id = 20180808200905 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:08,470 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:09:08,502 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:09:08,514 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:08,515 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:09:08,624 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:09:08,624 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:09:08,625 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:09:08,625 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:08,625 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200908', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:08,743 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:09:08,744 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:09:08,744 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,744 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,744 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:09:08,745 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:09:08,745 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:09:08,745 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:09:08,819 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:09:08,819 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:09:08,820 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:09:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:09:08,820 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:09:08,820 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:09:08,820 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:09:08,820 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:09:08,821 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:08,821 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:08,821 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:09:08,821 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:09:08,821 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:09:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808200908 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:08,929 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:09:08,930 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:09:08,930 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:09:08,930 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200908', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:09:09,041 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:09:09,042 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:09:09,042 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:09:09" WHERE executed_history_id = 20180808200908 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:09:09,154 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:09,154 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:09:08", case_exec_history_id="20180808200908" WHERE executed_history_id = 20180808200905 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:09,296 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:09:09,327 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:09:09,340 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:09:09,340 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808200905', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:09:09,455 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:09:09,455 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:09:09,455 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:09:09,455 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:09:09", case_exec_history_id="20180808200909" WHERE executed_history_id = 20180808200905 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:09:09,580 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:09:09,595 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:09:09,595 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:09:09,596 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:09:09,597 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808200905',)
2018-08-08 20:09:09,703 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:09:09,704 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808200905')
2018-08-08 20:09:09,806 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:09:09,807 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808200905')
2018-08-08 20:09:09,914 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:09:09,915 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808200905')
2018-08-08 20:09:10,019 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:09:10,020 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808200905')
2018-08-08 20:09:10,125 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:09:10,125 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200905',)
2018-08-08 20:09:10,231 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:09:10,232 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200905')
2018-08-08 20:09:10,335 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:09:10,336 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:09:10,336 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200905')
2018-08-08 20:09:10,441 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:09:10,441 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:09:10,441 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808200905',)
2018-08-08 20:09:10,546 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:09:10,546 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808200905')
2018-08-08 20:09:10,654 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:09:10,654 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808200906')
2018-08-08 20:09:10,760 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:09:10,760 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808200906')
2018-08-08 20:09:10,869 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:09:10,870 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808200907')
2018-08-08 20:09:10,977 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:09:10,977 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808200905')
2018-08-08 20:09:11,083 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:09:11,084 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808200908')
2018-08-08 20:09:11,190 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:09:11,191 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808200908')
2018-08-08 20:09:11,299 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:09:11,300 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808200909')
2018-08-08 20:09:11,406 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:09:11,407 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808200905.html
2018-08-08 20:09:11,407 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:09:11,411 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:09:12,524 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808200905.html
2018-08-08 20:09:12,524 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:09:13,366 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:11:06,763 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:11:06,764 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:11:06,983 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:11:07,192 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:11:07,380 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:11:07,380 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:11:07,502 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:11:07,503 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:11:07,612 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:11:07,613 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:11:07,613 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:11:07,613 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:11:07,644 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:11:07,645 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:11:07,645 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:11:07,645 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:11:07,645 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:11:07,657 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:11:07,671 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:11:07,671 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:11:07,689 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:11:07,706 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:11:07,718 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:07,718 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:11:07,825 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:11:07,826 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:11:07,826 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:11:07,826 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:07,827 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:07,940 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:11:07,940 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:11:07,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:07,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:07,940 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:07,941 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:11:07,941 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:11:07,941 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:11:08,019 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:11:08,021 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:11:08,021 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:11:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=627smraid6j6e8vvbnos6kcqr5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:11:08,025 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:11:08,026 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:11:08,026 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:11:08,026 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:11:08,026 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:11:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201107 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:08,138 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:11:08,139 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:08,139 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:11:07", case_exec_history_id="20180808201107" WHERE executed_history_id = 20180808201107 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:08,259 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:11:08,295 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:11:08,307 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:08,307 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:11:08,417 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:11:08,418 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:11:08,418 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:11:08,418 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:08,419 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201108', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:08,540 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:11:08,541 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:11:08,542 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:08,542 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:08,543 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:08,543 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:11:08,543 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:11:08,543 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:11:08,618 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:11:08,618 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:11:08,618 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:11:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:11:08,618 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:11:08,619 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:11:08,619 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:11:08,619 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:11:08,619 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:08,619 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:08,620 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:08,621 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:11:08,621 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:11:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201108 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:08,728 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:11:08,728 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:11:08,729 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:08,729 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201108', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:08,836 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:11:08,836 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:11:08,836 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:11:08" WHERE executed_history_id = 20180808201108 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:11:08,949 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:08,950 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:11:08", case_exec_history_id="20180808201108" WHERE executed_history_id = 20180808201107 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:09,069 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:11:09,101 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:11:09,113 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:09,113 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:11:09,220 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:11:09,220 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:11:09,221 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:09,221 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:11:09", case_exec_history_id="20180808201109" WHERE executed_history_id = 20180808201107 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:09,341 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:11:09,356 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:11:09,369 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:11:09,369 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:11:09,386 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:11:09,403 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:11:09,415 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:09,415 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:11:09,530 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:11:09,531 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:11:09,532 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:11:09,533 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:09,540 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201109', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:09,649 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:11:09,650 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:11:09,650 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:09,650 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:09,650 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:09,650 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:11:09,651 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:11:09,651 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:11:09,725 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:11:09,725 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:11:09,726 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:11:16 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:11:09,726 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:11:09,726 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:11:09,726 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:11:09,727 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:11:09,727 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:11:09",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201109 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:09,846 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:11:09,847 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:09,847 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:11:09", case_exec_history_id="20180808201109" WHERE executed_history_id = 20180808201107 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:09,990 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:11:10,023 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:11:10,035 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:10,036 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:11:10,143 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:11:10,143 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:11:10,143 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:11:10,144 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:10,144 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201110', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:10,253 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:11:10,253 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:11:10,253 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:10,254 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:10,254 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:11:10,254 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:11:10,254 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:11:10,254 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:11:10,328 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:11:10,329 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:11:10,329 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:11:17 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:11:10,329 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:11:10,329 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:11:10,330 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:11:10,330 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:11:10,330 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:10,330 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:10,330 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:11:10,332 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:11:10,332 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:11:10",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201110 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:10,446 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:11:10,447 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:11:10,448 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:11:10,449 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201110', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:11:10,562 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:11:10,563 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:11:10,563 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:11:10" WHERE executed_history_id = 20180808201110 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:11:10,676 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:10,677 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:11:10", case_exec_history_id="20180808201110" WHERE executed_history_id = 20180808201107 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:10,803 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:11:10,833 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:11:10,846 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:11:10,846 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201107', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:11:10,956 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:11:10,956 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:11:10,956 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:11:10,957 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:11:10", case_exec_history_id="20180808201110" WHERE executed_history_id = 20180808201107 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:11:11,076 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:11:11,091 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:11:11,091 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:11:11,092 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:11:11,092 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808201107',)
2018-08-08 20:11:11,196 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:11:11,196 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808201107')
2018-08-08 20:11:11,296 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:11:11,296 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808201107')
2018-08-08 20:11:11,401 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:11:11,402 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808201107')
2018-08-08 20:11:11,506 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:11:11,506 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808201107')
2018-08-08 20:11:11,615 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:11:11,615 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201107',)
2018-08-08 20:11:11,714 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:11:11,715 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201107')
2018-08-08 20:11:11,821 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:11:11,821 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:11:11,821 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201107')
2018-08-08 20:11:11,924 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:11:11,924 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:11:11,925 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201107',)
2018-08-08 20:11:12,026 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:11:12,027 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201107')
2018-08-08 20:11:12,138 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:11:12,139 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808201107')
2018-08-08 20:11:12,239 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:11:12,239 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808201108')
2018-08-08 20:11:12,343 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:11:12,343 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808201109')
2018-08-08 20:11:12,447 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:11:12,447 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201107')
2018-08-08 20:11:12,553 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:11:12,554 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808201109')
2018-08-08 20:11:12,660 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:11:12,660 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808201110')
2018-08-08 20:11:12,772 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:11:12,773 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808201110')
2018-08-08 20:11:12,873 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:11:12,875 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808201107.html
2018-08-08 20:11:12,875 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:11:12,878 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:11:14,130 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808201107.html
2018-08-08 20:11:14,130 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:11:14,788 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:12:14,671 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:12:14,671 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:12:14,884 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:12:15,089 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:12:15,279 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:12:15,280 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:12:15,393 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:12:15,394 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:12:15,501 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:12:15,502 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:12:15,502 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:12:15,502 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:12:15,532 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:12:15,533 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:12:15,534 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:12:15,534 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:12:15,535 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:12:15,547 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:12:15,562 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:12:15,563 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:12:15,581 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:12:15,598 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:12:15,612 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:15,612 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:12:15,759 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:12:15,760 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:15,760 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:12:15,760 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:15,760 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:15,877 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:15,880 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:15,881 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:15,882 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:15,882 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:15,883 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:15,884 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:15,884 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:16,024 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:16,025 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:16,025 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:12:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=1o3535revhj37pub7iolei0hj4; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:16,025 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:16,025 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:16,026 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:12:16,027 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:16,027 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:15",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201215 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:16,138 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:12:16,138 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:16,138 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:15", case_exec_history_id="20180808201215" WHERE executed_history_id = 20180808201215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:16,301 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:12:16,333 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:12:16,345 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:16,345 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:12:16,455 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:12:16,455 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:16,455 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:16,456 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:16,456 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201216', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:16,568 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:16,568 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:16,568 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:16,569 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:16,569 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:16,569 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:16,569 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:16,570 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:16,648 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:16,648 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:16,648 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:12:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:16,649 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:16,649 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:16,649 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:12:16,649 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:12:16,649 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:16,650 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:16,650 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:16,651 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:16,651 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201216 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:16,759 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:12:16,759 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:16,759 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:16,760 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201216', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:16,898 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:12:16,898 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:12:16,898 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:12:16" WHERE executed_history_id = 20180808201216 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:12:17,014 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:17,014 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:12:16", case_exec_history_id="20180808201216" WHERE executed_history_id = 20180808201215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:17,132 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:12:17,163 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:12:17,176 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:17,176 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:12:17,286 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:12:17,286 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:12:17,286 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:17,286 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:17", case_exec_history_id="20180808201217" WHERE executed_history_id = 20180808201215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:17,407 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:12:17,422 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:12:17,436 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:12:17,437 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:12:17,456 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:12:17,472 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:12:17,484 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:17,484 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:12:17,595 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:12:17,596 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:17,596 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:12:17,596 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:17,596 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201217', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:17,705 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:17,705 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:17,705 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:17,706 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:17,706 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:17,706 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:17,706 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:17,706 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:17,779 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:17,779 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:17,780 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:12:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:17,780 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:17,780 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:17,780 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:12:17,781 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:17,781 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:17",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201217 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:17,889 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:12:17,890 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:17,890 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:17", case_exec_history_id="20180808201217" WHERE executed_history_id = 20180808201215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:18,009 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:12:18,041 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:12:18,054 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:18,054 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:12:18,172 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:12:18,172 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:18,173 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:18,173 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:18,173 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:18,290 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:18,290 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:18,290 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:18,290 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:18,290 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:18,291 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:18,291 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:18,291 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:18,370 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:18,371 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:18,371 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:12:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:18,371 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:18,371 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:18,371 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:12:18,372 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:12:18,372 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:18,372 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:18,372 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:18,373 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:18,373 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201218 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:18,489 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:12:18,490 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:18,490 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:18,490 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:18,603 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:12:18,604 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:12:18,604 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:12:18" WHERE executed_history_id = 20180808201218 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:12:18,732 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:18,733 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:12:18", case_exec_history_id="20180808201218" WHERE executed_history_id = 20180808201215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:18,862 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:12:18,909 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:12:18,922 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:18,924 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:12:19,033 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:12:19,033 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:12:19,033 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:19,034 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:19", case_exec_history_id="20180808201219" WHERE executed_history_id = 20180808201215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:19,155 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:12:19,171 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:12:19,172 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:12:19,175 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:12:19,178 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808201215',)
2018-08-08 20:12:19,283 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:12:19,283 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808201215')
2018-08-08 20:12:19,388 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:12:19,388 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808201215')
2018-08-08 20:12:19,490 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:12:19,490 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808201215')
2018-08-08 20:12:19,591 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:12:19,591 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808201215')
2018-08-08 20:12:19,694 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:12:19,694 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201215',)
2018-08-08 20:12:19,796 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:12:19,797 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201215')
2018-08-08 20:12:19,903 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:12:19,903 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:12:19,903 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201215')
2018-08-08 20:12:20,004 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:12:20,005 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:12:20,005 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201215',)
2018-08-08 20:12:20,109 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:12:20,109 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201215')
2018-08-08 20:12:20,226 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:12:20,226 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808201215')
2018-08-08 20:12:20,333 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:12:20,334 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808201216')
2018-08-08 20:12:20,441 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:12:20,441 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808201217')
2018-08-08 20:12:20,544 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:12:20,544 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201215')
2018-08-08 20:12:20,649 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:12:20,649 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808201217')
2018-08-08 20:12:20,755 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:12:20,756 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808201218')
2018-08-08 20:12:20,859 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:12:20,860 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808201219')
2018-08-08 20:12:20,965 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:12:20,965 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808201215.html
2018-08-08 20:12:20,966 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:12:20,969 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:12:22,091 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808201215.html
2018-08-08 20:12:22,092 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:12:23,046 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:12:51,213 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:12:51,214 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:12:51,428 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:12:51,638 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:12:51,840 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:12:51,841 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:12:51,947 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:12:51,947 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:12:52,060 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:12:52,061 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:12:52,062 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:12:52,062 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:12:52,091 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:12:52,092 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:12:52,092 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:12:52,092 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:12:52,092 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:12:52,104 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:12:52,117 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:12:52,117 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:12:52,136 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:12:52,153 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:12:52,167 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:52,167 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:12:52,290 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:12:52,290 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:52,290 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:12:52,291 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:52,291 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201252', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:52,402 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:52,402 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:52,402 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:52,402 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:52,402 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:52,403 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:52,403 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:52,403 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:52,481 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:52,481 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:52,482 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:12:59 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=0ea5at1cud88vmajfngqll1hh6; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:52,482 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:52,482 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:52,482 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:12:52,483 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:52,484 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:52",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201252 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:52,601 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:12:52,601 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:52,601 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:52", case_exec_history_id="20180808201252" WHERE executed_history_id = 20180808201251 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:52,720 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:12:52,753 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:12:52,766 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:52,766 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:12:52,898 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:12:52,898 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:52,899 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:52,899 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:52,899 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201252', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:53,019 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:53,020 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:53,020 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:53,020 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:53,020 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:53,021 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:53,021 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:53,022 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:53,101 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:53,101 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:53,101 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:13:00 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:53,101 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:53,101 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:53,102 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:12:53,102 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:12:53,102 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:53,102 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:53,102 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:53,103 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:53,103 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:53",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201252 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:53,232 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:12:53,232 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:53,233 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:53,233 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201252', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:53,342 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:12:53,342 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:12:53,342 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:12:53" WHERE executed_history_id = 20180808201252 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:12:53,452 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:53,452 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:12:52", case_exec_history_id="20180808201252" WHERE executed_history_id = 20180808201251 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:53,573 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:12:53,605 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:12:53,617 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:53,618 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:12:53,727 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:12:53,727 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:12:53,727 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:53,727 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:53", case_exec_history_id="20180808201253" WHERE executed_history_id = 20180808201251 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:53,848 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:12:53,863 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:12:53,875 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:12:53,875 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:12:53,894 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:12:53,910 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:12:53,922 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:53,923 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:12:54,033 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:12:54,033 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:54,033 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:12:54,034 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:54,034 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201254', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:54,145 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:54,146 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:54,146 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,146 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,146 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,146 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:54,147 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:54,147 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:54,220 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:54,221 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:54,221 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:13:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:54,221 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:54,221 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:54,221 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:12:54,221 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:54,222 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808201254 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:54,334 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:12:54,334 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:54,335 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:54", case_exec_history_id="20180808201254" WHERE executed_history_id = 20180808201251 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:54,456 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:12:54,487 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:12:54,499 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:54,500 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:12:54,618 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:12:54,618 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:12:54,618 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:54,618 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:54,619 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201254', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:54,731 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:12:54,731 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:12:54,731 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,731 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,732 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:12:54,732 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:12:54,732 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:12:54,733 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:12:54,808 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:12:54,808 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:12:54,808 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:13:01 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:12:54,808 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:12:54,809 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:12:54,809 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:12:54,809 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:12:54,809 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:54,809 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:54,810 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:12:54,811 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:12:54,812 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:12:54",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808201254 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:54,931 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:12:54,931 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:12:54,931 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:12:54,931 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201254', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:12:55,041 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:12:55,041 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:12:55,041 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:12:55" WHERE executed_history_id = 20180808201254 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:12:55,151 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:55,151 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:12:54", case_exec_history_id="20180808201254" WHERE executed_history_id = 20180808201251 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:55,275 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:12:55,307 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:12:55,319 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:12:55,320 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808201251', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:12:55,428 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:12:55,429 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:12:55,429 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:12:55,429 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:12:55", case_exec_history_id="20180808201255" WHERE executed_history_id = 20180808201251 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:12:55,553 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:12:55,571 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:12:55,572 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:12:55,573 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:12:55,573 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808201251',)
2018-08-08 20:12:55,676 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:12:55,676 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808201251')
2018-08-08 20:12:55,787 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:12:55,787 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808201251')
2018-08-08 20:12:55,891 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:12:55,892 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808201251')
2018-08-08 20:12:55,993 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:12:55,993 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808201251')
2018-08-08 20:12:56,098 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:12:56,098 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201251',)
2018-08-08 20:12:56,204 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:12:56,205 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201251')
2018-08-08 20:12:56,311 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:12:56,312 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:12:56,312 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201251')
2018-08-08 20:12:56,417 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:12:56,418 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:12:56,418 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808201251',)
2018-08-08 20:12:56,520 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:12:56,521 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808201251')
2018-08-08 20:12:56,625 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:12:56,626 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808201252')
2018-08-08 20:12:56,729 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:12:56,729 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808201252')
2018-08-08 20:12:56,833 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:12:56,834 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808201253')
2018-08-08 20:12:56,938 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:12:56,939 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808201251')
2018-08-08 20:12:57,043 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:12:57,043 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808201254')
2018-08-08 20:12:57,148 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:12:57,148 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808201254')
2018-08-08 20:12:57,255 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:12:57,255 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808201255')
2018-08-08 20:12:57,360 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:12:57,361 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808201251.html
2018-08-08 20:12:57,362 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:12:57,369 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:12:58,325 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808201251.html
2018-08-08 20:12:58,325 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:12:59,005 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:32:32,121 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:32:32,121 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:32:32,332 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:32:32,540 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:32:32,746 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:32:32,746 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:32:32,877 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:32:32,877 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port varchar(10),                                          runtime datetime)
2018-08-08 20:32:33,004 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:32:33,005 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:32:33,005 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:32:33,005 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:32:33,037 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:32:33,037 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"默认"}
2018-08-08 20:32:33,038 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:32:33,038 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:32:33,038 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:32:33,050 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:32:33,064 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:32:33,064 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:32:33,084 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:32:33,102 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:32:33,115 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:33,115 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:32:33,227 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:32:33,227 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:32:33,227 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:32:33,228 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:33,228 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203233', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:33,344 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:32:33,344 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:32:33,344 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,344 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,344 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,345 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:32:33,345 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:32:33,345 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:32:33,455 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:32:33,456 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:32:33,456 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:32:40 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=ldfq6bsrjp7uapdko7fs56dlp2; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:32:33,460 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:32:33,460 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:32:33,460 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:32:33,461 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:32:33,461 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:32:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808203233 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:33,573 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:32:33,574 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:33,574 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:32:33", case_exec_history_id="20180808203233" WHERE executed_history_id = 20180808203232 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:33,698 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:32:33,732 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:32:33,744 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:33,744 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:32:33,851 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:32:33,851 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:32:33,851 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:32:33,852 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:33,852 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203233', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:33,967 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:32:33,967 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:32:33,967 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,968 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:33,968 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:32:33,969 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:32:33,969 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:32:34,041 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:32:34,041 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:32:34,041 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:32:41 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:32:34,042 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:32:34,042 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:32:34,042 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:32:34,042 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:32:34,042 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:34,043 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:34,043 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:34,049 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:32:34,049 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:32:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808203233 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:34,158 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:32:34,158 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:32:34,158 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:34,158 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203233', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:34,266 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:32:34,267 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:32:34,267 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:32:34" WHERE executed_history_id = 20180808203233 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:32:34,376 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:34,377 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:32:33", case_exec_history_id="20180808203233" WHERE executed_history_id = 20180808203232 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:34,497 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:32:34,528 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:32:34,540 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:34,541 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:32:34,646 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:32:34,647 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:32:34,647 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:34,647 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:32:34", case_exec_history_id="20180808203234" WHERE executed_history_id = 20180808203232 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:34,768 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:32:34,783 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:32:34,796 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:32:34,797 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:32:34,815 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:32:34,830 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:32:34,843 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:34,843 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:32:34,951 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:32:34,953 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:32:34,954 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:32:34,958 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:34,958 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203234', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:35,068 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:32:35,068 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:32:35,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,069 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:32:35,069 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:32:35,069 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:32:35,141 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:32:35,141 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:32:35,141 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:32:42 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:32:35,142 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:32:35,142 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:32:35,142 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:32:35,143 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:32:35,143 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:32:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808203234 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:35,257 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:32:35,257 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:35,258 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:32:34", case_exec_history_id="20180808203234" WHERE executed_history_id = 20180808203232 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:35,379 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:32:35,411 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:32:35,424 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:35,424 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:32:35,531 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:32:35,531 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:32:35,532 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:32:35,532 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:35,532 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203235', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:35,640 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:32:35,640 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:32:35,640 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,640 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,641 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:32:35,641 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:32:35,641 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:32:35,641 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:32:35,712 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:32:35,712 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:32:35,712 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:32:42 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:32:35,713 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:32:35,713 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:32:35,713 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:32:35,713 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:32:35,713 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:35,713 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:35,713 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:32:35,714 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:32:35,714 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:32:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808203235 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:35,822 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:32:35,822 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:32:35,823 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:32:35,823 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203235', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '默认', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:32:35,932 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:32:35,932 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:32:35,932 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:32:35" WHERE executed_history_id = 20180808203235 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:32:36,043 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:36,043 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:32:35", case_exec_history_id="20180808203235" WHERE executed_history_id = 20180808203232 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:36,167 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:32:36,200 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:32:36,212 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:32:36,212 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808203232', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:32:36,329 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:32:36,329 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:32:36,330 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:32:36,330 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:32:36", case_exec_history_id="20180808203236" WHERE executed_history_id = 20180808203232 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:32:36,450 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:32:36,465 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:32:36,465 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:32:36,466 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:32:36,466 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808203232',)
2018-08-08 20:32:36,571 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:32:36,572 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808203232')
2018-08-08 20:32:36,676 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:32:36,676 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808203232')
2018-08-08 20:32:36,780 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:32:36,780 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808203232')
2018-08-08 20:32:36,886 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:32:36,886 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808203232')
2018-08-08 20:32:36,992 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:32:36,993 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808203232',)
2018-08-08 20:32:37,092 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:32:37,092 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808203232')
2018-08-08 20:32:37,201 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:32:37,201 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:32:37,201 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808203232')
2018-08-08 20:32:37,308 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:32:37,310 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:32:37,311 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808203232',)
2018-08-08 20:32:37,417 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:32:37,418 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808203232')
2018-08-08 20:32:37,524 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:32:37,525 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808203233')
2018-08-08 20:32:37,631 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:32:37,631 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808203233')
2018-08-08 20:32:37,739 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:32:37,739 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808203234')
2018-08-08 20:32:37,844 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:32:37,845 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808203232')
2018-08-08 20:32:37,949 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:32:37,949 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808203234')
2018-08-08 20:32:38,056 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:32:38,056 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808203235')
2018-08-08 20:32:38,163 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:32:38,163 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808203236')
2018-08-08 20:32:38,269 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:32:38,269 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808203232.html
2018-08-08 20:32:38,269 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:32:38,272 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:32:39,458 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808203232.html
2018-08-08 20:32:39,460 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:32:40,219 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:48:04,757 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:48:04,758 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:48:04,976 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:48:05,185 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:48:05,379 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:48:05,379 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:48:05,506 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:48:05,506 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:48:05,638 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:48:05,639 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:48:05,639 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:48:05,639 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:48:05,699 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:48:05,699 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-08 20:48:05,699 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:48:05,700 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:48:05,700 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:48:05,722 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:48:05,746 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:48:05,746 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:48:05,780 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:48:05,812 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:48:05,837 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:05,838 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:48:05,980 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:48:05,980 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:48:05,981 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:48:05,981 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:48:05,981 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:48:06,107 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:48:06,108 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:48:06,109 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,109 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,109 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,110 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:48:06,110 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:48:06,110 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:48:06,222 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:48:06,223 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:48:06,223 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:48:13 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:48:06,223 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:48:06,223 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:48:06,226 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-08 20:48:06,226 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:48:06,226 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:48:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808204805 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:06,335 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:06,335 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:48:05", case_exec_history_id="20180808204805" WHERE executed_history_id = 20180808204805 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:06,465 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:48:06,527 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:48:06,550 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:06,550 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:48:06,659 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:48:06,659 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:48:06,659 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:48:06,659 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:48:06,659 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204806', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:48:06,768 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:48:06,769 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:48:06,769 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,769 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,769 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:06,770 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:48:06,770 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:48:06,770 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:48:06,844 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:48:06,844 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:48:06,844 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:48:13 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:48:06,845 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:48:06,845 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:48:06,847 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:48:06,847 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:48:06,847 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:48:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808204806 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:06,953 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:06,954 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:48:06", case_exec_history_id="20180808204806" WHERE executed_history_id = 20180808204805 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:07,081 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:48:07,132 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:48:07,151 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:07,151 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:48:07,260 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:48:07,260 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:48:07,260 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:07,260 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:48:07", case_exec_history_id="20180808204807" WHERE executed_history_id = 20180808204805 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:07,390 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:48:07,415 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:48:07,435 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:48:07,436 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:48:07,464 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:48:07,489 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:48:07,511 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:07,511 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:48:07,619 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:48:07,619 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:48:07,619 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:48:07,619 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:48:07,620 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204807', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:48:07,728 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:48:07,728 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:48:07,728 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:07,728 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:07,729 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:07,729 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:48:07,729 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:48:07,729 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:48:07,808 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:48:07,808 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:48:07,810 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:48:14 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:48:07,810 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:48:07,811 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:48:07,812 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-08 20:48:07,813 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:48:07,813 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:48:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808204807 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:07,921 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:07,922 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:48:07", case_exec_history_id="20180808204807" WHERE executed_history_id = 20180808204805 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:08,054 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:48:08,116 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:48:08,139 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:08,139 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:48:08,247 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:48:08,248 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:48:08,248 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:48:08,248 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:48:08,249 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204808', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:48:08,358 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:48:08,358 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:48:08,358 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:08,359 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:08,359 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:48:08,359 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:48:08,359 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:48:08,360 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:48:08,442 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:48:08,443 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:48:08,443 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:48:15 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:48:08,443 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:48:08,443 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:48:08,445 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:48:08,445 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:48:08,445 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:48:08",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808204808 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:08,553 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:08,554 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:48:08", case_exec_history_id="20180808204808" WHERE executed_history_id = 20180808204805 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:08,687 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:48:08,745 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:48:08,767 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:48:08,768 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808204805', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:48:08,895 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:48:08,896 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:48:08,896 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:48:08,896 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:48:08", case_exec_history_id="20180808204808" WHERE executed_history_id = 20180808204805 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:48:09,018 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:48:09,033 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:48:09,034 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:48:09,034 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:48:09,034 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808204805',)
2018-08-08 20:48:09,138 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:48:09,139 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808204805')
2018-08-08 20:48:09,242 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:48:09,243 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808204805')
2018-08-08 20:48:09,348 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:48:09,348 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808204805')
2018-08-08 20:48:09,452 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:48:09,452 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808204805')
2018-08-08 20:48:09,557 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:48:09,557 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808204805',)
2018-08-08 20:48:09,670 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:48:09,671 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808204805')
2018-08-08 20:48:09,775 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:48:09,776 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:48:09,776 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808204805')
2018-08-08 20:48:09,880 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:48:09,881 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:48:09,881 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808204805',)
2018-08-08 20:48:09,988 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:48:09,988 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808204805')
2018-08-08 20:48:10,095 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:48:10,095 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808204805')
2018-08-08 20:48:10,202 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:48:10,202 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808204806')
2018-08-08 20:48:10,308 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:48:10,308 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808204807')
2018-08-08 20:48:10,414 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:48:10,414 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808204805')
2018-08-08 20:48:10,518 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:48:10,518 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808204807')
2018-08-08 20:48:10,622 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:48:10,622 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808204808')
2018-08-08 20:48:10,728 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:48:10,728 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808204808')
2018-08-08 20:48:10,833 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:48:10,834 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808204805.html
2018-08-08 20:48:10,834 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:48:10,838 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:48:11,885 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808204805.html
2018-08-08 20:48:11,885 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:48:12,581 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:51:31,883 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:51:31,883 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:51:32,106 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:51:32,313 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:51:32,506 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:51:32,506 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:51:32,615 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:51:32,616 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:51:32,732 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:51:32,736 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:51:32,736 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:51:32,737 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:51:32,769 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:51:32,769 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":"80"}
2018-08-08 20:51:32,769 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:51:32,769 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:51:32,770 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:51:32,782 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:51:32,797 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:51:32,798 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:51:32,817 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:51:32,834 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:51:32,848 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:32,848 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:51:32,958 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:51:32,958 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:51:32,958 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:51:32,958 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:51:32,958 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:51:33,069 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:51:33,070 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:51:33,070 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,070 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,070 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,071 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:51:33,071 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:51:33,071 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:51:33,149 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:51:33,149 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:51:33,149 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:51:40 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:51:33,149 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:51:33,150 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:51:33,152 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-08 20:51:33,152 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:51:33,152 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:51:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808205132 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:33,262 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:33,262 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:51:32", case_exec_history_id="20180808205132" WHERE executed_history_id = 20180808205132 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:33,384 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:51:33,418 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:51:33,435 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:33,436 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:51:33,567 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:51:33,567 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:51:33,568 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:51:33,571 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:51:33,571 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205133', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:51:33,679 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:51:33,679 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:51:33,679 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,680 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,680 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:33,680 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:51:33,680 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:51:33,681 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:51:33,755 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:51:33,755 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:51:33,756 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:51:40 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:51:33,756 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:51:33,756 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:51:33,757 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:51:33,757 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:51:33,757 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:51:33",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808205133 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:33,864 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:33,865 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:51:33", case_exec_history_id="20180808205133" WHERE executed_history_id = 20180808205132 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:33,988 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:51:34,020 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:51:34,033 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:34,033 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:51:34,169 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:51:34,169 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:51:34,169 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:34,170 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:51:34", case_exec_history_id="20180808205134" WHERE executed_history_id = 20180808205132 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:34,290 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:51:34,305 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:51:34,317 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:51:34,317 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:51:34,335 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:51:34,351 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:51:34,364 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:34,364 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:51:34,475 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:51:34,475 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:51:34,476 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:51:34,476 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:51:34,476 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205134', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:51:34,584 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:51:34,584 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:51:34,584 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:34,584 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:34,585 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:34,585 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:51:34,585 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:51:34,585 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:51:34,665 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:51:34,667 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:51:34,667 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:51:41 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:51:34,668 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:51:34,669 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:51:34,673 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1079, name=获取token]
2018-08-08 20:51:34,673 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:51:34,673 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:51:34",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808205134 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:34,782 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:34,783 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:51:34", case_exec_history_id="20180808205134" WHERE executed_history_id = 20180808205132 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:34,903 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:51:34,935 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:51:34,948 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:34,950 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:51:35,064 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:51:35,064 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:51:35,065 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:51:35,067 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:51:35,067 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205135', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '80', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:51:35,176 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:51:35,176 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:51:35,177 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:35,177 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:35,177 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:51:35,177 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:51:35,177 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com:80/mapp/token/get_token
2018-08-08 20:51:35,178 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:51:35,254 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:51:35,255 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:51:35,255 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:51:42 GMT'), ('Content-Type', 'text/html; charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Vary', 'Accept-Encoding')]
2018-08-08 20:51:35,256 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": 此域名不支持绑定在土拨鼠服务器上..
2018-08-08 20:51:35,257 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:51:35,260 testcase.py [line: 195] INFO: 步骤[1]执行失败,停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:51:35,261 testcase.py [line: 205] INFO: 正在更新步骤执行结果
2018-08-08 20:51:35,261 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Project\01_Python+Testlink\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 75, in test_interface_of_urlencode    self.assert_result(body)  File E:\Project\01_Python+Testlink\interface_project_for_dev\unittesttestcase.py, line 79, in assert_result    self.assertIn(pattern_str, response_to_check, item[消息])AssertionError: msg:success not found in 此域名不支持绑定在土拨鼠服务器上.. : 获取token失败,msg不为success", protocol_method="get", runtime="2018-08-08 20:51:35",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808205135 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:35,369 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:35,369 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2018-08-08 20:51:35", case_exec_history_id="20180808205135" WHERE executed_history_id = 20180808205132 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:35,495 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:51:35,550 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:51:35,573 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:51:35,573 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205132', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:51:35,680 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:51:35,680 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:51:35,680 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:51:35,681 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:51:35", case_exec_history_id="20180808205135" WHERE executed_history_id = 20180808205132 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:51:35,822 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:51:35,850 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:51:35,850 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:51:35,851 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:51:35,851 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808205132',)
2018-08-08 20:51:35,952 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:51:35,953 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808205132')
2018-08-08 20:51:36,057 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:51:36,057 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808205132')
2018-08-08 20:51:36,168 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:51:36,168 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808205132')
2018-08-08 20:51:36,272 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:51:36,272 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808205132')
2018-08-08 20:51:36,376 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:51:36,376 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808205132',)
2018-08-08 20:51:36,478 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:51:36,478 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808205132')
2018-08-08 20:51:36,581 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:51:36,581 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:51:36,582 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808205132')
2018-08-08 20:51:36,687 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:51:36,688 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:51:36,688 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808205132',)
2018-08-08 20:51:36,812 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:51:36,813 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808205132')
2018-08-08 20:51:36,916 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:51:36,916 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808205132')
2018-08-08 20:51:37,021 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:51:37,021 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808205133')
2018-08-08 20:51:37,127 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:51:37,127 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808205134')
2018-08-08 20:51:37,230 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:51:37,231 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808205132')
2018-08-08 20:51:37,335 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:51:37,336 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808205134')
2018-08-08 20:51:37,444 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:51:37,445 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808205135')
2018-08-08 20:51:37,548 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:51:37,549 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808205135')
2018-08-08 20:51:37,652 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:51:37,653 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808205132.html
2018-08-08 20:51:37,653 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:51:37,658 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:51:39,035 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808205132.html
2018-08-08 20:51:39,035 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:51:39,813 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 20:52:15,362 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 20:52:15,362 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 20:52:15,579 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 20:52:15,790 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 20:52:15,981 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 20:52:15,982 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 20:52:16,090 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 20:52:16,090 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 20:52:16,200 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 20:52:16,201 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 20:52:16,201 main.py [line: 89] INFO: 按项目运行测试
2018-08-08 20:52:16,201 main.py [line: 114] INFO: 运行指定项目
2018-08-08 20:52:16,230 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 20:52:16,230 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 20:52:16,230 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 20:52:16,231 main.py [line: 139] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-08 20:52:16,231 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-08 20:52:16,243 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-08 20:52:16,257 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-08 20:52:16,257 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 20:52:16,276 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:52:16,292 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:52:16,305 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:16,305 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:52:16,426 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:52:16,427 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:52:16,427 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:52:16,430 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:16,431 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205216', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:16,544 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:52:16,544 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:52:16,545 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:16,545 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:16,545 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:16,546 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:52:16,546 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:52:16,547 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:52:16,639 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:52:16,640 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:52:16,640 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:52:23 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=mchdu10se65t347fpplipdjab1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:52:16,640 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:52:16,640 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:52:16,640 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:52:16,641 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:52:16,641 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:52:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808205216 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:16,748 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:52:16,750 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:16,750 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:52:16", case_exec_history_id="20180808205216" WHERE executed_history_id = 20180808205215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:16,883 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:52:16,919 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:52:16,932 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:16,932 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:52:17,046 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:52:17,046 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:52:17,046 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:52:17,049 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:17,049 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205217', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:17,179 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:52:17,179 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:52:17,179 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:17,179 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:17,180 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:17,180 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:52:17,180 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:52:17,180 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:52:17,256 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:52:17,256 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:52:17,257 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:52:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:52:17,257 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:52:17,257 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:52:17,257 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:52:17,257 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:52:17,258 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:17,258 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:17,258 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:17,259 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:52:17,259 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:52:17",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808205217 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:17,368 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:52:17,369 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:52:17,369 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:17,369 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205217', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:17,479 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:52:17,479 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:52:17,480 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:52:17" WHERE executed_history_id = 20180808205217 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 20:52:17,587 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:17,587 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:52:17", case_exec_history_id="20180808205217" WHERE executed_history_id = 20180808205215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:17,716 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:52:17,774 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:52:17,795 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:17,796 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:52:17,902 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:52:17,902 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:52:17,902 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:17,902 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:52:17", case_exec_history_id="20180808205217" WHERE executed_history_id = 20180808205215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:18,023 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:52:18,039 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 20:52:18,052 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-08 20:52:18,052 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-08 20:52:18,070 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 20:52:18,086 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 20:52:18,098 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:18,098 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 20:52:18,207 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 20:52:18,210 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:52:18,211 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 20:52:18,213 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:18,213 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205218', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:18,326 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:52:18,327 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:52:18,327 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,327 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,327 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,327 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:52:18,327 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:52:18,327 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:52:18,402 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:52:18,402 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:52:18,402 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:52:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:52:18,402 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:52:18,403 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:52:18,403 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 20:52:18,404 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:52:18,404 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:52:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808205218 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:18,554 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 20:52:18,555 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:18,555 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:52:18", case_exec_history_id="20180808205218" WHERE executed_history_id = 20180808205215 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:18,679 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 20:52:18,712 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 20:52:18,725 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:18,725 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 20:52:18,835 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 20:52:18,835 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 20:52:18,835 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:52:18,836 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:18,836 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:18,945 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 20:52:18,945 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 20:52:18,945 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,945 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,945 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 20:52:18,946 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 20:52:18,946 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 20:52:18,946 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 20:52:19,021 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 20:52:19,022 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 20:52:19,022 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 12:52:25 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 20:52:19,022 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 20:52:19,022 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 20:52:19,023 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 20:52:19,023 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 20:52:19,023 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:19,023 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:19,023 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 20:52:19,025 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 20:52:19,025 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 20:52:18",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808205218 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:19,142 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 20:52:19,143 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 20:52:19,144 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 20:52:19,145 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205218', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 20:52:19,256 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 20:52:19,257 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 20:52:19,257 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 20:52:19" WHERE executed_history_id = 20180808205218 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-08 20:52:19,374 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:19,375 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 20:52:18", case_exec_history_id="20180808205218" WHERE executed_history_id = 20180808205215 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:19,517 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 20:52:19,551 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 20:52:19,567 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 20:52:19,567 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808205215', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 20:52:19,684 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 20:52:19,684 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 20:52:19,685 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 20:52:19,685 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 20:52:19", case_exec_history_id="20180808205219" WHERE executed_history_id = 20180808205215 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-08 20:52:19,818 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 20:52:19,833 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-08 20:52:19,833 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 20:52:19,834 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 20:52:19,835 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808205215',)
2018-08-08 20:52:19,937 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 20:52:19,938 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808205215')
2018-08-08 20:52:20,043 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 20:52:20,044 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808205215')
2018-08-08 20:52:20,149 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 20:52:20,150 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808205215')
2018-08-08 20:52:20,256 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 20:52:20,257 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808205215')
2018-08-08 20:52:20,361 htmlreporter.py [line: 120] INFO: 正在查询已运的测试计划
2018-08-08 20:52:20,361 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808205215',)
2018-08-08 20:52:20,466 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 20:52:20,466 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808205215')
2018-08-08 20:52:20,570 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 20:52:20,570 htmlreporter.py [line: 152] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-08 20:52:20,571 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808205215')
2018-08-08 20:52:20,677 htmlreporter.py [line: 161] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-08 20:52:20,678 htmlreporter.py [line: 187] INFO: 正在查询已运的测试计划
2018-08-08 20:52:20,678 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808205215',)
2018-08-08 20:52:20,783 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 20:52:20,784 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808205215')
2018-08-08 20:52:20,889 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:52:20,889 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808205216')
2018-08-08 20:52:20,994 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:52:20,994 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808205217')
2018-08-08 20:52:21,103 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:52:21,103 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808205217')
2018-08-08 20:52:21,209 htmlreporter.py [line: 207] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-08 20:52:21,209 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180808205215')
2018-08-08 20:52:21,313 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 20:52:21,314 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180808205218')
2018-08-08 20:52:21,419 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 20:52:21,420 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180808205218')
2018-08-08 20:52:21,525 htmlreporter.py [line: 247] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 20:52:21,525 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180808205219')
2018-08-08 20:52:21,630 htmlreporter.py [line: 278] INFO: 正在设置测试报告结果文件名
2018-08-08 20:52:21,631 htmlreporter.py [line: 288] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808205215.html
2018-08-08 20:52:21,632 htmlreporter.py [line: 281] INFO: 正在生成测试报告
2018-08-08 20:52:21,638 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 20:52:22,619 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808205215.html
2018-08-08 20:52:22,619 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 20:52:23,263 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 21:07:10,972 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 21:07:10,972 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 21:07:11,186 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 21:07:11,393 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 21:07:11,596 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 21:07:11,596 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 21:07:11,705 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 21:07:11,706 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 21:07:11,814 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 21:07:11,815 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 21:07:11,815 main.py [line: 142] INFO: 按计划运行测试
2018-08-08 21:07:11,815 main.py [line: 146] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-08 21:07:11,855 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 21:07:11,855 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 21:07:11,856 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 21:07:11,856 main.py [line: 170] INFO: 正在执行测试计划[project：APItest，testplan：user_operation]
2018-08-08 21:07:11,856 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-08 21:07:11,884 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-08 21:07:11,903 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 21:07:11,916 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:11,917 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210711', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 21:07:12,025 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 21:07:12,025 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 21:07:12,026 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 21:07:12,026 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:12,026 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210712', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:12,136 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 21:07:12,136 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 21:07:12,136 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,137 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,137 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,137 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 21:07:12,137 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 21:07:12,138 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 21:07:12,258 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 21:07:12,259 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 21:07:12,259 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 13:07:19 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=v7dp5ep5uai6dvdi4llu1g2r61; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 21:07:12,259 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 21:07:12,259 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 21:07:12,259 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 21:07:12,260 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 21:07:12,260 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 21:07:12",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808210712 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:12,365 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 21:07:12,366 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 21:07:12,367 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 21:07:12", case_exec_history_id="20180808210712" WHERE executed_history_id = 20180808210711 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:12,488 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-08 21:07:12,521 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 21:07:12,534 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:12,535 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210711', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 21:07:12,643 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 21:07:12,643 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 21:07:12,643 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:07:12,643 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:12,644 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210712', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:12,755 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 21:07:12,755 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 21:07:12,755 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,755 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,755 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:12,756 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 21:07:12,756 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 21:07:12,756 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 21:07:12,833 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 21:07:12,834 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 21:07:12,834 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 13:07:19 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 21:07:12,846 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 21:07:12,850 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 21:07:12,851 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 21:07:12,853 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 21:07:12,854 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:12,857 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:12,857 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:12,858 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 21:07:12,858 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 21:07:12",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808210712 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:12,976 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 21:07:12,976 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:07:12,976 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:12,976 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210712', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:13,085 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 21:07:13,085 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 21:07:13,085 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 21:07:13" WHERE executed_history_id = 20180808210712 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-08 21:07:13,206 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 21:07:13,206 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 21:07:12", case_exec_history_id="20180808210712" WHERE executed_history_id = 20180808210711 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:13,333 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-08 21:07:13,365 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 21:07:13,377 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:13,377 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210711', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 21:07:13,491 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 21:07:13,491 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 21:07:13,492 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-08 21:07:13,492 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 21:07:13", case_exec_history_id="20180808210713" WHERE executed_history_id = 20180808210711 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:13,620 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-08 21:07:13,648 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-08 21:07:13,648 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 21:07:13,649 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 21:07:13,649 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808210711',)
2018-08-08 21:07:13,752 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 21:07:13,752 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808210711')
2018-08-08 21:07:13,855 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 21:07:13,855 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808210711')
2018-08-08 21:07:13,959 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 21:07:13,959 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808210711')
2018-08-08 21:07:14,062 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 21:07:14,062 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808210711')
2018-08-08 21:07:14,167 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-08 21:07:14,167 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808210711',)
2018-08-08 21:07:14,272 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-08 21:07:14,272 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808210711')
2018-08-08 21:07:14,379 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-08 21:07:14,380 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-08 21:07:14,380 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808210711',)
2018-08-08 21:07:14,485 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-08 21:07:14,486 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180808210711')
2018-08-08 21:07:14,591 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 21:07:14,591 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180808210712')
2018-08-08 21:07:14,699 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 21:07:14,700 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180808210712')
2018-08-08 21:07:14,807 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 21:07:14,807 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180808210713')
2018-08-08 21:07:14,913 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-08 21:07:14,913 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808210711.html
2018-08-08 21:07:14,913 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-08 21:07:14,916 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 21:07:15,904 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808210711.html
2018-08-08 21:07:15,905 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 21:07:16,531 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 21:07:39,215 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 21:07:39,215 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 21:07:39,430 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 21:07:39,641 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 21:07:39,854 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 21:07:39,854 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 21:07:39,972 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 21:07:39,972 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 21:07:40,078 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 21:07:40,079 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 21:07:40,080 main.py [line: 173] INFO: 按套件运行测试
2018-08-08 21:07:40,080 main.py [line: 175] INFO: 已获取配置的套件id列表：[1078]
2018-08-08 21:07:40,107 main.py [line: 191] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-08 21:07:40,120 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 21:07:40,120 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 21:07:40,121 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 21:07:40,121 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-08 21:07:40,121 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-08 21:07:40,180 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-08 21:07:40,243 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-08 21:07:40,259 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-08 21:07:40,271 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:40,271 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210739', '1079', '获取token', '用户操作-获取token', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-08 21:07:40,457 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-08 21:07:40,457 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 21:07:40,457 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-08 21:07:40,458 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:40,458 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210740', '1079', '获取token', '无计划', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:40,564 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 21:07:40,565 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 21:07:40,565 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:40,566 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:40,566 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:40,566 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 21:07:40,566 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 21:07:40,566 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 21:07:40,657 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 21:07:40,662 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 21:07:40,664 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 13:07:47 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=9ris61qso8s4tu2icpr18e2qf5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 21:07:40,667 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 21:07:40,680 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 21:07:40,680 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-08 21:07:40,680 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 21:07:40,680 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 21:07:40",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180808210740 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:40,801 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-08 21:07:40,802 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-08 21:07:40,804 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 21:07:40", case_exec_history_id="20180808210740" WHERE executed_history_id = 20180808210739 and testcase_id = 1079 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:40,994 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 21:07:41,006 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:41,006 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210739', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 21:07:41,117 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 21:07:41,117 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 21:07:41,117 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:07:41,117 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:41,118 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210741', '1083', '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:41,227 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 21:07:41,227 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 21:07:41,227 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:41,228 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:41,228 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:07:41,228 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 21:07:41,228 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 21:07:41,229 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 21:07:41,302 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 21:07:41,302 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 21:07:41,302 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 13:07:48 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 21:07:41,303 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 21:07:41,303 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 21:07:41,303 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 21:07:41,303 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 21:07:41,303 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:41,304 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:41,304 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:07:41,305 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 21:07:41,305 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 21:07:41",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808210741 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:41,413 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 21:07:41,413 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:07:41,413 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:07:41,414 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210741', '1083', '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:07:41,518 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 21:07:41,519 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 21:07:41,519 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 21:07:41" WHERE executed_history_id = 20180808210741 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-08 21:07:41,634 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-08 21:07:41,635 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 21:07:41", case_exec_history_id="20180808210741" WHERE executed_history_id = 20180808210739 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:41,757 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-08 21:07:41,769 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-08 21:07:41,770 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210739', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-08 21:07:41,878 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-08 21:07:41,878 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-08 21:07:41,878 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-08 21:07:41,878 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-08 21:07:41", case_exec_history_id="20180808210741" WHERE executed_history_id = 20180808210739 and testcase_id = 1085 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-08 21:07:41,987 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-08 21:07:41,987 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-08 21:07:41,988 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-08 21:07:41,988 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180808210739',)
2018-08-08 21:07:42,095 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-08 21:07:42,095 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180808210739')
2018-08-08 21:07:42,196 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-08 21:07:42,196 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180808210739')
2018-08-08 21:07:42,297 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-08 21:07:42,298 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180808210739')
2018-08-08 21:07:42,403 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-08 21:07:42,404 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180808210739')
2018-08-08 21:07:42,506 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-08 21:07:42,507 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808210739',)
2018-08-08 21:07:42,610 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：无计划]的测试用例执行结果
2018-08-08 21:07:42,611 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', '无计划', '20180808210739')
2018-08-08 21:07:42,713 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：无计划]的测试用例运行结果到测试报告
2018-08-08 21:07:42,714 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-08 21:07:42,714 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180808210739',)
2018-08-08 21:07:42,819 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：无计划]已运行的测试用例
2018-08-08 21:07:42,819 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', '无计划', '20180808210739')
2018-08-08 21:07:42,925 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-08 21:07:42,926 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1079, '20180808210740')
2018-08-08 21:07:43,031 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-08 21:07:43,032 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1083, '20180808210741')
2018-08-08 21:07:43,139 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-08 21:07:43,139 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1085, '20180808210741')
2018-08-08 21:07:43,254 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-08 21:07:43,254 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\01_Python+Testlink\\report\\test_report20180808210739.html
2018-08-08 21:07:43,254 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-08 21:07:43,257 main.py [line: 234] INFO: 生成测试报告成功
2018-08-08 21:07:44,521 main.py [line: 241] INFO: E:\\Project\\01_Python+Testlink\\report\\test_report20180808210739.html
2018-08-08 21:07:44,522 main.py [line: 244] INFO: 正在发送测试报告邮件...
2018-08-08 21:07:45,129 main.py [line: 248] INFO: 发送邮件成功
2018-08-08 21:07:59,821 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-08 21:07:59,821 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-08 21:08:00,040 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-08 21:08:00,249 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-08 21:08:00,442 main.py [line: 57] INFO: 正在创建测试用例报告报表
2018-08-08 21:08:00,442 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2018-08-08 21:08:00,550 main.py [line: 60] INFO: 正在创建测试步骤报告报表
2018-08-08 21:08:00,551 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-08 21:08:00,658 main.py [line: 63] INFO: 正在读取运行模式配置
2018-08-08 21:08:00,659 main.py [line: 70] INFO: 正在获取运行全局初始化用例……
2018-08-08 21:08:00,659 main.py [line: 203] INFO: 运行指定用例……
2018-08-08 21:08:00,659 main.py [line: 205] INFO: 待运行用例id列表：[1083]
2018-08-08 21:08:00,694 global_function.py [line: 19] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 05:07:14', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-08 21:08:00,741 global_function.py [line: 88] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-08 21:08:00,742 global_function.py [line: 91] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-08 21:08:00,742 global_function.py [line: 105] INFO: 正在构建项目的http对象
2018-08-08 21:08:00,742 global_function.py [line: 53] INFO: 记录测试用例到测试用例报表
2018-08-08 21:08:00,742 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210800', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-08 21:08:00,851 global_function.py [line: 56] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-08 21:08:00,851 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-08 21:08:00,852 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:08:00,852 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:08:00,852 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210800', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:08:00,960 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-08 21:08:00,961 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-08 21:08:00,961 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:08:00,961 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:08:00,961 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-08 21:08:00,962 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-08 21:08:00,962 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-08 21:08:00,962 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-08 21:08:01,038 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-08 21:08:01,038 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-08 21:08:01,039 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Wed, 08 Aug 2018 13:08:07 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=m4qdph3ab8qc5l4umart780ft7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-08 21:08:01,039 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ="}
2018-08-08 21:08:01,039 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-08 21:08:01,039 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-08 21:08:01,040 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-08 21:08:01,040 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:08:01,040 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:08:01,040 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-N2UwNzJjZGRmMmNjZWE4OTgyYTdmNjFjZWU2ZWYzNjQ=
2018-08-08 21:08:01,041 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-08 21:08:01,041 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-08 21:08:00",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180808210800 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-08 21:08:01,148 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-08 21:08:01,149 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-08 21:08:01,149 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-08 21:08:01,150 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180808210800', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-08 21:08:01,267 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-08 21:08:01,267 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-08 21:08:01,267 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-08 21:08:01" WHERE executed_history_id = 20180808210800 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-08 21:08:01,386 global_function.py [line: 61] INFO: 正在更新用例执行结果
2018-08-08 21:08:01,386 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-08 21:08:00", case_exec_history_id="20180808210800" WHERE executed_history_id = 20180808210800 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-08 21:08:01,494 global_function.py [line: 72] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-08 21:08:01,494 main.py [line: 208] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-08 21:08:01,495 main.py [line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
