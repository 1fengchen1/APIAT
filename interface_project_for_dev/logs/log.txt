2018-08-14 08:52:29,700 global_var.py [line: 25] INFO: 已选择运行环境：预发布环境
2018-08-14 08:52:29,705 global_var.py [line: 26] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2018-08-14 08:52:29,933 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 08:52:30,136 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 08:52:30,402 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 08:52:30,402 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 08:52:30,506 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 08:52:30,506 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 08:52:30,621 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 08:52:30,622 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 08:52:30,622 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 08:52:30,623 main.py [line: 146] INFO: 按计划运行测试
2018-08-14 08:52:30,623 main.py [line: 150] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-14 08:53:18,729 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 08:53:18,729 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 08:53:18,935 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 08:53:19,128 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 08:53:19,328 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 08:53:19,329 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 08:53:19,427 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 08:53:19,428 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 08:53:19,527 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 08:53:19,527 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 08:53:19,528 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 08:53:19,528 main.py [line: 94] INFO: 按项目运行测试
2018-08-14 08:53:19,528 main.py [line: 119] INFO: 运行指定项目
2018-08-14 08:53:19,604 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 08:53:19,604 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 08:53:19,604 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 08:53:19,604 main.py [line: 143] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-14 08:53:19,604 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-14 08:53:19,637 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-14 08:53:19,664 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-14 08:53:19,664 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-14 08:53:19,744 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 08:53:19,790 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 08:53:19,815 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:19,815 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 08:53:19,941 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 08:53:19,942 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 08:53:19,942 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 08:53:19,942 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:19,942 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:20,050 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 08:53:20,050 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 08:53:20,050 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,050 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,051 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,061 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 08:53:20,061 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 08:53:20,061 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 08:53:20,182 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 08:53:20,184 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 08:53:20,184 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 00:53:29 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=mtmsqcvgdskv98sub81sjjt6s5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 08:53:20,184 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 08:53:20,184 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 08:53:20,184 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 08:53:20,184 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 08:53:20,184 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 08:53:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814085319 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:20,322 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 08:53:20,323 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:20,323 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 08:53:19", case_exec_history_id="20180814085319" WHERE executed_history_id = 20180814085319 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:20,454 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 08:53:20,524 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 08:53:20,549 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:20,550 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 08:53:20,652 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 08:53:20,653 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 08:53:20,653 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 08:53:20,653 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:20,653 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085320', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:20,756 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 08:53:20,756 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 08:53:20,756 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,756 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,756 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:20,756 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 08:53:20,756 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 08:53:20,757 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 08:53:20,835 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 08:53:20,835 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 08:53:20,835 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 00:53:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 08:53:20,836 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 08:53:20,836 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 08:53:20,836 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 08:53:20,836 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 08:53:20,836 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:20,836 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:20,836 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:20,836 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 08:53:20,836 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 08:53:20",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814085320 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:20,947 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 08:53:20,947 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 08:53:20,947 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:20,947 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085320', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:21,053 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 08:53:21,053 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 08:53:21,053 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 08:53:21" WHERE executed_history_id = 20180814085320 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-14 08:53:21,162 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:21,162 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 08:53:20", case_exec_history_id="20180814085320" WHERE executed_history_id = 20180814085319 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:21,297 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 08:53:21,363 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 08:53:21,387 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:21,387 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 08:53:21,497 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 08:53:21,497 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 08:53:21,497 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:21,498 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 08:53:21", case_exec_history_id="20180814085321" WHERE executed_history_id = 20180814085319 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:21,625 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 08:53:21,656 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-14 08:53:21,680 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-14 08:53:21,680 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-14 08:53:21,715 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 08:53:21,744 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 08:53:21,767 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:21,767 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 08:53:21,870 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 08:53:21,871 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 08:53:21,871 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 08:53:21,872 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:21,872 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085321', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:21,976 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 08:53:21,976 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 08:53:21,976 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:21,976 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:21,976 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:21,976 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 08:53:21,977 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 08:53:21,977 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 08:53:22,046 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 08:53:22,047 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 08:53:22,047 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 00:53:31 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 08:53:22,047 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 08:53:22,047 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 08:53:22,047 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 08:53:22,047 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 08:53:22,047 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 08:53:21",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814085321 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:22,168 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 08:53:22,168 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:22,169 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 08:53:21", case_exec_history_id="20180814085321" WHERE executed_history_id = 20180814085319 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:22,293 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 08:53:22,355 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 08:53:22,379 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:22,379 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 08:53:22,483 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 08:53:22,484 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 08:53:22,484 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 08:53:22,484 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:22,484 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085322', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:22,592 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 08:53:22,592 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 08:53:22,592 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:22,592 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:22,592 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 08:53:22,593 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 08:53:22,593 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 08:53:22,593 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 08:53:22,662 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 08:53:22,662 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 08:53:22,662 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 00:53:31 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 08:53:22,662 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 08:53:22,662 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 08:53:22,662 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 08:53:22,662 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 08:53:22,663 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:22,663 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:22,663 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 08:53:22,663 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 08:53:22,663 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 08:53:22",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814085322 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:22,771 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 08:53:22,771 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 08:53:22,771 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 08:53:22,771 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085322', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 08:53:22,876 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 08:53:22,876 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 08:53:22,876 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 08:53:22" WHERE executed_history_id = 20180814085322 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-14 08:53:22,982 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:22,982 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 08:53:22", case_exec_history_id="20180814085322" WHERE executed_history_id = 20180814085319 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:23,105 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 08:53:23,166 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 08:53:23,190 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 08:53:23,191 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814085319', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 08:53:23,296 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 08:53:23,296 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 08:53:23,296 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 08:53:23,296 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 08:53:23", case_exec_history_id="20180814085323" WHERE executed_history_id = 20180814085319 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 08:53:23,421 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 08:53:23,449 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-14 08:53:23,450 main.py [line: 214] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 08:53:23,451 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 08:53:23,451 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814085319',)
2018-08-14 08:53:23,558 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 08:53:23,558 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814085319')
2018-08-14 08:53:23,660 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 08:53:23,660 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814085319')
2018-08-14 08:53:23,759 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 08:53:23,759 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814085319')
2018-08-14 08:53:23,856 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 08:53:23,856 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814085319')
2018-08-14 08:53:23,997 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 08:53:23,998 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814085319',)
2018-08-14 08:53:24,112 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-14 08:53:24,112 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814085319')
2018-08-14 08:53:24,218 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-14 08:53:24,219 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-14 08:53:24,219 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180814085319')
2018-08-14 08:53:24,317 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-14 08:53:24,319 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 08:53:24,319 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814085319',)
2018-08-14 08:53:24,422 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-14 08:53:24,422 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814085319')
2018-08-14 08:53:24,522 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 08:53:24,522 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180814085319')
2018-08-14 08:53:24,618 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 08:53:24,619 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180814085320')
2018-08-14 08:53:24,719 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 08:53:24,719 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180814085321')
2018-08-14 08:53:24,817 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-14 08:53:24,817 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180814085319')
2018-08-14 08:53:24,919 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 08:53:24,919 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180814085321')
2018-08-14 08:53:25,019 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 08:53:25,019 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180814085322')
2018-08-14 08:53:25,120 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 08:53:25,120 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180814085323')
2018-08-14 08:53:25,223 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 08:53:25,224 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814085319.html
2018-08-14 08:53:25,224 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 08:53:25,225 main.py [line: 238] INFO: 生成测试报告成功
2018-08-14 08:53:26,558 main.py [line: 245] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814085319.html
2018-08-14 08:53:26,558 main.py [line: 248] INFO: 正在发送测试报告邮件...
2018-08-14 08:53:30,457 main.py [line: 252] INFO: 发送邮件成功
2018-08-14 08:59:39,571 global_var.py [line: 25] INFO: 已选择运行环境：预发布环境
2018-08-14 08:59:39,571 global_var.py [line: 26] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2018-08-14 08:59:39,781 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 08:59:39,981 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 08:59:40,180 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 08:59:40,180 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 08:59:40,288 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 08:59:40,288 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 08:59:40,392 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 08:59:40,393 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 08:59:40,393 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 08:59:40,394 main.py [line: 146] INFO: 按计划运行测试
2018-08-14 08:59:40,394 main.py [line: 150] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-14 10:37:38,160 global_var.py [line: 25] INFO: 已选择运行环境：预发布环境
2018-08-14 10:37:38,161 global_var.py [line: 26] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2018-08-14 10:37:38,378 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:37:38,570 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:37:38,774 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:37:38,774 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:37:38,874 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:37:38,875 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:37:38,978 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:37:38,980 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:37:38,980 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 10:37:38,981 main.py [line: 147] INFO: 按计划运行测试
2018-08-14 10:37:38,981 main.py [line: 151] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-14 10:37:39,039 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 10:37:39,039 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 10:37:39,039 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 10:37:39,039 main.py [line: 175] INFO: 正在执行测试计划[project：APItest，testplan：user_operation]
2018-08-14 10:37:39,039 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-14 10:37:39,078 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 10:37:39,111 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:37:39,135 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:37:39,135 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103738', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:37:39,237 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:37:39,237 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:37:39,237 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:37:39,237 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:37:39,237 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103739', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:37:39,347 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:37:39,347 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:37:39,347 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:39,347 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:39,347 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:39,347 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:37:39,347 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:37:39,347 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:37:39,481 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:37:39,482 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:37:39,482 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:37:48 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=pt5qda4l4i1j7m9ov64mraair1; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:37:39,482 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:37:39,482 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:37:39,482 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:37:39,483 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:37:39,483 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:37:39",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814103739 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:37:39,584 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:37:39,584 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:37:39,584 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:37:39", case_exec_history_id="20180814103739" WHERE executed_history_id = 20180814103738 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:37:39,710 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 10:37:39,776 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:37:39,798 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:37:39,799 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103738', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:37:39,912 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:37:39,913 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:37:39,913 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:37:39,913 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:37:39,913 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103739', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:37:40,018 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:37:40,019 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:37:40,019 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:40,019 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:40,019 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:37:40,019 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:37:40,019 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:37:40,019 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:37:40,089 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:37:40,089 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:37:40,089 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:37:48 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:37:40,089 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:37:40,089 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:37:40,089 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:37:40,089 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:37:40,089 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:37:40,089 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:37:40,089 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:37:40,090 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:37:40,090 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:37:40",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814103739 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:37:40,195 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:37:40,195 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:37:40,195 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:37:40,195 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103739', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:37:40,306 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:37:40,306 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:37:40,306 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:37:40" WHERE executed_history_id = 20180814103739 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-14 10:37:40,409 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:37:40,409 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:37:39", case_exec_history_id="20180814103739" WHERE executed_history_id = 20180814103738 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:37:40,539 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 10:37:40,599 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:37:40,622 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:37:40,622 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814103738', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:37:40,729 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:37:40,729 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:37:40,729 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:37:40,729 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:37:40", case_exec_history_id="20180814103740" WHERE executed_history_id = 20180814103738 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:37:40,851 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 10:37:40,880 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-14 10:37:40,880 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 10:37:40,881 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 10:37:40,881 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814103738',)
2018-08-14 10:37:41,002 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 10:37:41,003 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814103738')
2018-08-14 10:37:41,100 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 10:37:41,100 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814103738')
2018-08-14 10:37:41,196 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 10:37:41,196 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814103738')
2018-08-14 10:37:41,293 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 10:37:41,293 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814103738')
2018-08-14 10:37:41,391 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 10:37:41,391 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814103738',)
2018-08-14 10:37:41,484 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-14 10:37:41,484 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814103738')
2018-08-14 10:37:41,582 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-14 10:37:41,582 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 10:37:41,582 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814103738',)
2018-08-14 10:37:41,681 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-14 10:37:41,681 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814103738')
2018-08-14 10:37:41,811 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:37:41,811 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180814103739')
2018-08-14 10:37:41,930 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:37:41,930 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180814103739')
2018-08-14 10:37:42,034 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:37:42,034 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180814103740')
2018-08-14 10:37:42,131 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 10:37:42,131 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814103738.html
2018-08-14 10:37:42,131 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 10:37:42,133 main.py [line: 239] INFO: 生成测试报告成功
2018-08-14 10:37:43,422 main.py [line: 246] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814103738.html
2018-08-14 10:37:43,423 main.py [line: 249] INFO: 正在发送测试报告邮件...
2018-08-14 10:37:46,307 main.py [line: 253] INFO: 发送邮件成功
2018-08-14 10:39:40,141 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:39:40,367 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:40:19,955 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:40:20,155 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:47:04,772 global_var.py [line: 25] INFO: 已选择运行环境：预发布环境
2018-08-14 10:47:04,772 global_var.py [line: 26] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2018-08-14 10:47:04,975 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:47:05,175 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:47:05,377 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:47:05,378 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:47:05,478 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:47:05,478 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:47:05,580 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:47:05,587 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:47:05,591 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 10:47:05,591 main.py [line: 147] INFO: 按计划运行测试
2018-08-14 10:47:05,592 main.py [line: 151] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-14 10:47:05,654 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 10:47:05,654 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 10:47:05,654 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 10:47:05,654 main.py [line: 175] INFO: 正在执行测试计划[project：APItest，testplan：user_operation]
2018-08-14 10:47:05,655 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-14 10:47:05,689 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 10:47:05,720 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:47:05,743 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:47:05,743 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104705', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:47:05,865 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:47:05,865 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:47:05,865 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:47:05,866 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:47:05,866 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104705', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:47:05,976 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:47:05,977 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:47:05,977 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:05,977 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:05,977 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:05,977 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:47:05,977 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:47:05,977 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:47:06,052 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:47:06,053 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:47:06,053 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:47:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=d46c4bmlv2ggtk8ruocc1fs5c6; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:47:06,053 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:47:06,053 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:47:06,053 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:47:06,054 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:47:06,054 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:47:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814104705 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:47:06,155 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:47:06,155 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:47:06,155 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:47:05", case_exec_history_id="20180814104705" WHERE executed_history_id = 20180814104705 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:47:06,282 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 10:47:06,345 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:47:06,370 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:47:06,370 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104705', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:47:06,471 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:47:06,472 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:47:06,472 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:47:06,472 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:47:06,472 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104706', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:47:06,573 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:47:06,573 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:47:06,573 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:06,573 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:06,573 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:47:06,573 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:47:06,573 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:47:06,573 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:47:06,657 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:47:06,657 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:47:06,657 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:47:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:47:06,658 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:47:06,658 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:47:06,658 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:47:06,658 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:47:06,658 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:47:06,658 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:47:06,658 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:47:06,658 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:47:06,658 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:47:06",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814104706 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:47:06,758 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:47:06,758 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:47:06,758 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:47:06,758 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104706', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:47:06,861 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:47:06,861 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:47:06,861 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:47:06" WHERE executed_history_id = 20180814104706 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-14 10:47:06,970 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:47:06,970 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:47:06", case_exec_history_id="20180814104706" WHERE executed_history_id = 20180814104705 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:47:07,107 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 10:47:07,166 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:47:07,189 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:47:07,189 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814104705', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:47:07,300 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:47:07,300 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:47:07,300 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:47:07,300 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:47:07", case_exec_history_id="20180814104707" WHERE executed_history_id = 20180814104705 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:47:07,434 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 10:47:07,462 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-14 10:47:07,462 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 10:47:07,463 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 10:47:07,463 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814104705',)
2018-08-14 10:47:07,560 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 10:47:07,561 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814104705')
2018-08-14 10:47:07,658 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 10:47:07,658 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814104705')
2018-08-14 10:47:07,757 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 10:47:07,757 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814104705')
2018-08-14 10:47:07,862 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 10:47:07,862 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814104705')
2018-08-14 10:47:07,962 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 10:47:07,962 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814104705',)
2018-08-14 10:47:08,066 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-14 10:47:08,066 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814104705')
2018-08-14 10:47:08,166 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-14 10:47:08,166 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 10:47:08,166 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814104705',)
2018-08-14 10:47:08,267 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-14 10:47:08,267 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814104705')
2018-08-14 10:47:08,371 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:47:08,371 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180814104705')
2018-08-14 10:47:08,472 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:47:08,472 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180814104706')
2018-08-14 10:47:08,570 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:47:08,570 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180814104707')
2018-08-14 10:47:08,664 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 10:47:08,664 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814104705.html
2018-08-14 10:47:08,664 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 10:47:08,666 main.py [line: 239] INFO: 生成测试报告成功
2018-08-14 10:47:09,900 main.py [line: 246] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814104705.html
2018-08-14 10:47:09,900 main.py [line: 249] INFO: 正在发送测试报告邮件...
2018-08-14 10:47:10,519 main.py [line: 253] INFO: 发送邮件成功
2018-08-14 10:48:50,374 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 10:48:50,374 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 10:48:50,572 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:48:50,776 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:48:50,983 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:48:50,984 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:48:51,098 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:48:51,099 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:48:51,204 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:48:51,206 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:48:51,207 runmodeconfig.py [line: 30] ERROR: 读取运行模式配置失败：invalid syntax (<string>, line 1)
2018-08-14 10:54:03,982 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 10:54:03,982 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 10:54:04,189 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:54:04,394 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:54:04,607 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:54:04,607 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:54:04,710 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:54:04,710 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:54:04,813 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:54:04,815 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:54:04,816 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 10:54:04,816 main.py [line: 94] INFO: 按项目运行测试
2018-08-14 10:54:04,816 main.py [line: 119] INFO: 运行指定项目
2018-08-14 10:54:04,872 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 10:54:04,872 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 10:54:04,872 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 10:54:04,872 main.py [line: 144] INFO: 正在执行测试项目[id：951, project：APItest]
2018-08-14 10:54:04,872 testproject.py [line: 23] INFO: 正在获取测试项目[id：951, name：APItest]对应对应的测试计划名称列表
2018-08-14 10:54:04,895 testproject.py [line: 28] INFO: 成功获取项目测试计划名称列表[list=['user_operation', 'user_operation1']]
2018-08-14 10:54:04,920 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation]
2018-08-14 10:54:04,920 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-14 10:54:04,954 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 10:54:04,987 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:54:05,010 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:05,010 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:54:05,110 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:54:05,110 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:54:05,110 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:54:05,110 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:05,110 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105405', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:05,239 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:54:05,239 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:54:05,239 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,239 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,239 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,239 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:54:05,239 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:54:05,240 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:54:05,329 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:54:05,330 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:54:05,330 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:54:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=lnb86fqs57uoqqv1gsmk8pm594; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:54:05,330 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:54:05,330 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:54:05,330 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:54:05,331 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:54:05,331 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:54:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814105405 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:05,436 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:54:05,436 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:05,436 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:54:05", case_exec_history_id="20180814105405" WHERE executed_history_id = 20180814105404 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:05,569 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 10:54:05,630 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:54:05,652 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:05,652 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:54:05,754 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:54:05,755 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:54:05,755 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:54:05,755 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:05,755 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105405', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:05,874 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:54:05,875 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:54:05,875 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,876 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,876 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:05,877 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:54:05,877 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:54:05,877 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:54:05,949 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:54:05,949 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:54:05,949 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:54:14 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:54:05,949 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:54:05,949 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:54:05,950 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:54:05,950 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:54:05,950 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:05,950 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:05,950 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:05,950 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:54:05,950 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:54:05",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814105405 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:06,069 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:54:06,069 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:54:06,069 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:06,069 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105405', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:06,179 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:54:06,179 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:54:06,179 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:54:06" WHERE executed_history_id = 20180814105405 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-14 10:54:06,283 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:06,284 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:54:05", case_exec_history_id="20180814105405" WHERE executed_history_id = 20180814105404 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:06,417 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 10:54:06,475 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:54:06,497 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:06,497 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:54:06,599 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:54:06,599 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:54:06,599 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:06,599 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:54:06", case_exec_history_id="20180814105406" WHERE executed_history_id = 20180814105404 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:06,727 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 10:54:06,755 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-14 10:54:06,777 testproject.py [line: 38] INFO: 正在执行项目测试计划[project：APItest，testplan：user_operation1]
2018-08-14 10:54:06,778 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation1]的测试用例
2018-08-14 10:54:06,810 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation1]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 10:54:06,840 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:54:06,861 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:06,862 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1079, '获取token', '用户操作-获取token', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:54:06,967 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:54:06,967 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:54:06,967 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:54:06,968 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:06,968 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105406', 1079, '获取token', 'user_operation1', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:07,067 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:54:07,067 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:54:07,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,068 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,068 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:54:07,068 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:54:07,068 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:54:07,142 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:54:07,142 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:54:07,142 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:54:15 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:54:07,142 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:54:07,142 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:54:07,142 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:54:07,142 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:54:07,142 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:54:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814105406 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:07,243 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:54:07,243 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:07,243 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:54:06", case_exec_history_id="20180814105406" WHERE executed_history_id = 20180814105404 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:07,365 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 10:54:07,425 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:54:07,447 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:07,448 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:54:07,550 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:54:07,550 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:54:07,550 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:54:07,550 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:07,550 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105407', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:07,652 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:54:07,653 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:54:07,653 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,653 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,653 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:54:07,653 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:54:07,653 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:54:07,653 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:54:07,724 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:54:07,724 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:54:07,724 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:54:16 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:54:07,724 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:54:07,724 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:54:07,724 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:54:07,725 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:54:07,725 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:07,725 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:07,725 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:54:07,725 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:54:07,725 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:54:07",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814105407 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation1'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:07,832 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:54:07,832 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:54:07,832 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:54:07,832 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105407', 1083, '账号密码登录成功', 'user_operation1', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:54:07,941 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:54:07,941 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:54:07,941 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:54:07" WHERE executed_history_id = 20180814105407 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation1'
2018-08-14 10:54:08,051 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:08,051 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:54:07", case_exec_history_id="20180814105407" WHERE executed_history_id = 20180814105404 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:08,187 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 10:54:08,244 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:54:08,265 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:54:08,265 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105404', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation1', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:54:08,368 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:54:08,368 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:54:08,368 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:54:08,368 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:54:08", case_exec_history_id="20180814105408" WHERE executed_history_id = 20180814105404 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation1' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:54:08,491 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=1271, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 10:54:08,519 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation1]已执行完
2018-08-14 10:54:08,519 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 10:54:08,520 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 10:54:08,520 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814105404',)
2018-08-14 10:54:08,616 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 10:54:08,616 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814105404')
2018-08-14 10:54:08,721 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 10:54:08,722 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814105404')
2018-08-14 10:54:08,823 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 10:54:08,823 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814105404')
2018-08-14 10:54:08,922 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 10:54:08,923 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814105404')
2018-08-14 10:54:09,026 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 10:54:09,026 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105404',)
2018-08-14 10:54:09,125 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-14 10:54:09,125 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814105404')
2018-08-14 10:54:09,224 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-14 10:54:09,224 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]的测试用例执行结果
2018-08-14 10:54:09,224 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180814105404')
2018-08-14 10:54:09,320 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation1]的测试用例运行结果到测试报告
2018-08-14 10:54:09,320 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 10:54:09,320 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105404',)
2018-08-14 10:54:09,419 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-14 10:54:09,419 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814105404')
2018-08-14 10:54:09,516 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:54:09,516 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180814105405')
2018-08-14 10:54:09,627 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:54:09,627 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180814105405')
2018-08-14 10:54:09,727 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:54:09,727 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180814105406')
2018-08-14 10:54:09,825 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation1]已运行的测试用例
2018-08-14 10:54:09,825 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation1', '20180814105404')
2018-08-14 10:54:09,923 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:54:09,923 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1079, '20180814105406')
2018-08-14 10:54:10,024 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:54:10,024 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1083, '20180814105407')
2018-08-14 10:54:10,123 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:54:10,123 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation1', 1085, '20180814105408')
2018-08-14 10:54:10,232 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 10:54:10,232 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105404.html
2018-08-14 10:54:10,232 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 10:54:10,235 main.py [line: 239] INFO: 生成测试报告成功
2018-08-14 10:54:11,274 main.py [line: 246] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105404.html
2018-08-14 10:54:11,274 main.py [line: 249] INFO: 正在发送测试报告邮件...
2018-08-14 10:54:19,426 main.py [line: 253] INFO: 发送邮件成功
2018-08-14 10:55:14,226 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 10:55:14,226 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 10:55:14,531 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:55:14,739 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:55:14,940 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:55:14,940 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:55:15,055 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:55:15,055 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:55:15,169 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:55:15,171 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:55:15,171 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 10:55:15,171 main.py [line: 147] INFO: 按计划运行测试
2018-08-14 10:55:15,171 main.py [line: 151] INFO: 已获取配置的项目名称[name：APItest]及对应的测试计划名称列表[list=['user_operation']]
2018-08-14 10:55:15,223 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 10:55:15,223 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 10:55:15,223 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 10:55:15,223 main.py [line: 175] INFO: 正在执行测试计划[project：APItest，testplan：user_operation]
2018-08-14 10:55:15,223 testplan.py [line: 29] INFO: 正在获取测试计划[project=APItest，name=user_operation]的测试用例
2018-08-14 10:55:15,257 testplan.py [line: 35] INFO: 成功获取测试计划[project=APItest，name=user_operation]的测试用例id：dict_keys(['1079', '1083', '1085'])
2018-08-14 10:55:15,287 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:55:15,310 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:55:15,311 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105514', 1079, '获取token', '用户操作-获取token', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:55:15,422 testplan.py [line: 76] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:55:15,422 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:55:15,422 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:55:15,422 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:55:15,422 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105515', 1079, '获取token', 'user_operation', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:55:15,524 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:55:15,524 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:55:15,524 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:15,524 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:15,524 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:15,525 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:55:15,525 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:55:15,525 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:55:15,600 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:55:15,600 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:55:15,601 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:55:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=0ms150gtv039opb3qmcf6ln9s5; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:55:15,601 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:55:15,601 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:55:15,601 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:55:15,601 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:55:15,601 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:55:15",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814105515 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:55:15,697 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:55:15,697 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:55:15,697 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:55:15", case_exec_history_id="20180814105515" WHERE executed_history_id = 20180814105514 AND testcase_id = 1079 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:55:15,823 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1079]的执行结果
2018-08-14 10:55:15,884 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:55:15,905 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:55:15,906 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105514', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:55:16,013 testplan.py [line: 76] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:55:16,013 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:55:16,013 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:55:16,013 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:55:16,013 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105516', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:55:16,118 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:55:16,118 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:55:16,118 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:16,118 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:16,119 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:55:16,119 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:55:16,119 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:55:16,119 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:55:16,187 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:55:16,187 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:55:16,187 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:55:24 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:55:16,187 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:55:16,187 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:55:16,187 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:55:16,187 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:55:16,187 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:55:16,187 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:55:16,187 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:55:16,188 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:55:16,188 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:55:16",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814105516 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='user_operation'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:55:16,291 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:55:16,291 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:55:16,291 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:55:16,291 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105516', 1083, '账号密码登录成功', 'user_operation', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:55:16,394 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:55:16,394 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:55:16,394 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:55:16" WHERE executed_history_id = 20180814105516 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='user_operation'
2018-08-14 10:55:16,498 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:55:16,498 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:55:16", case_exec_history_id="20180814105516" WHERE executed_history_id = 20180814105514 AND testcase_id = 1083 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:55:16,622 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1083]的执行结果
2018-08-14 10:55:16,680 testplan.py [line: 46] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:55:16,702 testplan.py [line: 73] INFO: 记录测试用例到测试用例报表
2018-08-14 10:55:16,702 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105514', 1085, '登录失败', '用户操作-登录-账号密码登录', 'user_operation', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:55:16,807 testplan.py [line: 76] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:55:16,807 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:55:16,807 testplan.py [line: 81] INFO: 正在更新用例执行结果
2018-08-14 10:55:16,807 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:55:16", case_exec_history_id="20180814105516" WHERE executed_history_id = 20180814105514 AND testcase_id = 1085 AND project='APItest' AND testplan='user_operation' AND runtime='0000-00-00 00:00:00'
2018-08-14 10:55:16,931 testplan.py [line: 94] INFO: 正在更新testlink上测试计划[testplan_id=952, bulid_version=v1.0],对应用例[testcase_id=1085]的执行结果
2018-08-14 10:55:16,960 testplan.py [line: 104] INFO: 测试计划[project=APItest ,testplan=user_operation]已执行完
2018-08-14 10:55:16,961 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 10:55:16,962 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 10:55:16,962 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814105514',)
2018-08-14 10:55:17,069 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 10:55:17,069 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814105514')
2018-08-14 10:55:17,191 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 10:55:17,191 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814105514')
2018-08-14 10:55:17,300 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 10:55:17,300 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814105514')
2018-08-14 10:55:17,395 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 10:55:17,395 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814105514')
2018-08-14 10:55:17,493 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 10:55:17,494 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105514',)
2018-08-14 10:55:17,592 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]的测试用例执行结果
2018-08-14 10:55:17,592 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814105514')
2018-08-14 10:55:17,691 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：user_operation]的测试用例运行结果到测试报告
2018-08-14 10:55:17,691 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 10:55:17,691 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105514',)
2018-08-14 10:55:17,811 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：user_operation]已运行的测试用例
2018-08-14 10:55:17,811 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', 'user_operation', '20180814105514')
2018-08-14 10:55:17,909 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:55:17,910 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1079, '20180814105515')
2018-08-14 10:55:18,011 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:55:18,012 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1083, '20180814105516')
2018-08-14 10:55:18,113 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:55:18,113 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', 'user_operation', 1085, '20180814105516')
2018-08-14 10:55:18,231 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 10:55:18,231 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105514.html
2018-08-14 10:55:18,231 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 10:55:18,234 main.py [line: 239] INFO: 生成测试报告成功
2018-08-14 10:55:19,235 main.py [line: 246] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105514.html
2018-08-14 10:55:19,236 main.py [line: 249] INFO: 正在发送测试报告邮件...
2018-08-14 10:55:19,879 main.py [line: 253] INFO: 发送邮件成功
2018-08-14 10:56:19,885 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 10:56:19,885 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 10:56:20,096 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 10:56:20,290 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 10:56:20,497 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 10:56:20,497 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 10:56:20,615 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 10:56:20,616 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 10:56:20,716 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 10:56:20,718 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 10:56:20,719 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 10:56:20,719 main.py [line: 178] INFO: 按套件运行测试
2018-08-14 10:56:20,719 main.py [line: 180] INFO: 已获取配置的套件id列表：[1078]
2018-08-14 10:56:20,768 main.py [line: 196] INFO: 正在执行测试套件[id=1078 ,name=用户操作]
2018-08-14 10:56:20,790 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 10:56:20,791 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 10:56:20,791 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 10:56:20,791 testsuite.py [line: 71] INFO: 正在获取套件[id=1078，name=用户操作]的测试用例...
2018-08-14 10:56:20,791 testsuite.py [line: 27] INFO: 正在获取子套件……
2018-08-14 10:56:20,903 testsuite.py [line: 29] INFO: 成功获取子套件id列表：{'1081': {'id': '1081', 'details': '', 'name': '获取token', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1078'}, '1082': {'id': '1082', 'details': '', 'name': '登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1078'}, '1087': {'id': '1087', 'details': '', 'name': '账号密码登录', 'node_type_id': '2', 'node_order': '1', 'parent_id': '1082'}, '1088': {'id': '1088', 'details': '', 'name': '手机验证码登录', 'node_type_id': '2', 'node_order': '2', 'parent_id': '1082'}}
2018-08-14 10:56:21,018 testsuite.py [line: 74] INFO: 获取到用例id列表：['1079', '1083', '1085']
2018-08-14 10:56:21,048 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '获取token', 'node_order': '1000', 'testsuite_id': '1081', 'testcase_id': '1079', 'id': '1080', 'tc_external_id': '1', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:52:21', 'updater_id': '7', 'modification_ts': '2018-08-02 23:31:59', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1089', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}]<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-1'}]
2018-08-14 10:56:21,069 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-14 10:56:21,069 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105620', '1079', '获取token', '用户操作-获取token', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-1')
2018-08-14 10:56:21,208 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1079，name=获取token]
2018-08-14 10:56:21,208 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:56:21,208 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}]}
2018-08-14 10:56:21,209 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:56:21,209 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105621', '1079', '获取token', '无计划', 'APItest', 1089, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}]}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:56:21,313 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:56:21,313 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:56:21,313 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,313 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,313 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,313 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:56:21,313 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:56:21,313 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:56:21,386 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:56:21,387 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:56:21,387 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:56:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=eqhetmheu64c2gdoqf5qr7pgn0; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:56:21,387 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:56:21,387 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:56:21,387 unittesttestcase.py [line: 428] WARNING: 未检测到从服务器返回中提取内容的要求，请检查是否正确填写预期结果
2018-08-14 10:56:21,387 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:56:21,387 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:56:21",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}]}" WHERE executed_history_id = 20180814105621 AND testcase_id = 1079 AND step_id = 1089 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:56:21,515 testcase.py [line: 235] INFO: 测试用例[id=1079, name=获取token]执行成功
2018-08-14 10:56:21,515 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-14 10:56:21,515 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:56:21", case_exec_history_id="20180814105621" WHERE executed_history_id = 20180814105620 and testcase_id = 1079 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-14 10:56:21,649 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 10:56:21,670 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-14 10:56:21,671 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105620', '1083', '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 10:56:21,827 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 10:56:21,827 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 10:56:21,828 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:56:21,828 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:56:21,828 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105621', '1083', '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:56:21,950 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 10:56:21,950 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 10:56:21,950 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,950 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,950 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 10:56:21,951 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 10:56:21,951 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 10:56:21,951 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 10:56:22,051 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 10:56:22,051 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 10:56:22,051 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 02:56:30 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 10:56:22,051 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 10:56:22,051 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 10:56:22,051 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 10:56:22,051 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 10:56:22,052 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:56:22,052 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:56:22,052 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 10:56:22,052 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 10:56:22,052 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 10:56:21",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814105621 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-14 10:56:22,159 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 10:56:22,160 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 10:56:22,160 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 10:56:22,160 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105621', '1083', '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 10:56:22,320 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 10:56:22,320 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 10:56:22,320 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 10:56:22" WHERE executed_history_id = 20180814105621 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-14 10:56:22,419 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-14 10:56:22,420 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 10:56:21", case_exec_history_id="20180814105621" WHERE executed_history_id = 20180814105620 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-14 10:56:22,566 testsuite.py [line: 78] INFO: 获取测试用例信息 [{'updater_login': '', 'author_login': 'sonny.zhang', 'name': '登录失败', 'node_order': '1001', 'testsuite_id': '1087', 'testcase_id': '1085', 'id': '1086', 'tc_external_id': '3', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:36', 'updater_id': '', 'modification_ts': '2018-08-01 09:53:36', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '', 'updater_last_name': '', 'steps': '', 'full_tc_external_id': 'APItest-3'}]
2018-08-14 10:56:22,588 testsuite.py [line: 109] INFO: 记录测试用例到测试用例报表
2018-08-14 10:56:22,589 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814105620', '1085', '登录失败', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-3')
2018-08-14 10:56:22,693 testsuite.py [line: 112] INFO: 开始执行测试用例[id=1085，name=登录失败]
2018-08-14 10:56:22,693 testcase.py [line: 235] INFO: 测试用例[id=1085, name=登录失败]执行成功
2018-08-14 10:56:22,693 testsuite.py [line: 117] INFO: 正在更新用例执行结果
2018-08-14 10:56:22,693 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2018-08-14 10:56:22", case_exec_history_id="20180814105622" WHERE executed_history_id = 20180814105620 and testcase_id = 1085 AND project='APItest' AND testplan='无计划'AND runtime='0000-00-00 00:00:00'
2018-08-14 10:56:22,795 testsuite.py [line: 126] INFO: 测试套件[id=1078 ,name=用户操作]已执行完
2018-08-14 10:56:22,795 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
2018-08-14 10:56:22,797 htmlreporter.py [line: 50] INFO: 正在查询测试用例总数
2018-08-14 10:56:22,797 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20180814105620',)
2018-08-14 10:56:22,891 htmlreporter.py [line: 56] INFO: 正在查询执行通过的用例数
2018-08-14 10:56:22,891 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20180814105620')
2018-08-14 10:56:22,988 htmlreporter.py [line: 62] INFO: 正在查询执行失败的用例数
2018-08-14 10:56:22,988 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20180814105620')
2018-08-14 10:56:23,087 htmlreporter.py [line: 68] INFO: 正在查询执行出错的用例数
2018-08-14 10:56:23,087 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20180814105620')
2018-08-14 10:56:23,187 htmlreporter.py [line: 74] INFO: 正在查询未执行的用例数
2018-08-14 10:56:23,187 mydb.py [line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20180814105620')
2018-08-14 10:56:23,293 htmlreporter.py [line: 106] INFO: 正在查询已运的测试计划
2018-08-14 10:56:23,293 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105620',)
2018-08-14 10:56:23,415 htmlreporter.py [line: 138] INFO: 正在查询测试计划[project：APItest, testplan：无计划]的测试用例执行结果
2018-08-14 10:56:23,415 mydb.py [line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('APItest', '无计划', '20180814105620')
2018-08-14 10:56:23,534 htmlreporter.py [line: 147] INFO: 正在记录测试测试计划[project：APItest, testplan：无计划]的测试用例运行结果到测试报告
2018-08-14 10:56:23,534 htmlreporter.py [line: 173] INFO: 正在查询已运的测试计划
2018-08-14 10:56:23,534 mydb.py [line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20180814105620',)
2018-08-14 10:56:23,637 htmlreporter.py [line: 193] INFO: 正在查询测试计划[project：APItest, testplan：无计划]已运行的测试用例
2018-08-14 10:56:23,637 mydb.py [line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('APItest', '无计划', '20180814105620')
2018-08-14 10:56:23,739 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1079]步骤运行结果
2018-08-14 10:56:23,740 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1079, '20180814105621')
2018-08-14 10:56:23,852 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1083]步骤运行结果
2018-08-14 10:56:23,852 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1083, '20180814105621')
2018-08-14 10:56:23,965 htmlreporter.py [line: 233] INFO: 正在查询测试用例[id=1085]步骤运行结果
2018-08-14 10:56:23,965 mydb.py [line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('APItest', '无计划', 1085, '20180814105622')
2018-08-14 10:56:24,062 htmlreporter.py [line: 264] INFO: 正在设置测试报告结果文件名
2018-08-14 10:56:24,063 htmlreporter.py [line: 274] INFO: 测试报告文件名所在路径为：E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105620.html
2018-08-14 10:56:24,063 htmlreporter.py [line: 267] INFO: 正在生成测试报告
2018-08-14 10:56:24,065 main.py [line: 239] INFO: 生成测试报告成功
2018-08-14 10:56:25,077 main.py [line: 246] INFO: E:\\Project\\Test-Report\\01_AP-AutoTest\\Test_Report20180814105620.html
2018-08-14 10:56:25,077 main.py [line: 249] INFO: 正在发送测试报告邮件...
2018-08-14 10:56:59,650 main.py [line: 253] INFO: 发送邮件成功
2018-08-14 11:40:59,258 global_var.py [line: 21] INFO: 当前运行环境：测试环境
2018-08-14 11:40:59,258 global_var.py [line: 22] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2018-08-14 11:40:59,463 global_var.py [line: 29] INFO: 正在初始化数据库[名称：TESTDB]对象
2018-08-14 11:40:59,663 global_var.py [line: 32] INFO: 正在获取testlink
2018-08-14 11:40:59,884 main.py [line: 59] INFO: 正在创建测试用例报告报表
2018-08-14 11:40:59,884 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50))
2018-08-14 11:40:59,984 main.py [line: 62] INFO: 正在创建测试步骤报告报表
2018-08-14 11:40:59,985 mydb.py [line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2018-08-14 11:41:00,085 main.py [line: 65] INFO: 正在生成运行模式配置文件：runmodeconfig_xxx.conf
2018-08-14 11:41:00,087 main.py [line: 68] INFO: 正在读取运行模式配置
2018-08-14 11:41:00,088 main.py [line: 75] INFO: 正在获取运行全局初始化用例……
2018-08-14 11:41:00,088 main.py [line: 208] INFO: 运行指定用例……
2018-08-14 11:41:00,088 main.py [line: 210] INFO: 待运行用例id列表：[1083]
2018-08-14 11:41:00,128 global_function.py [line: 22] INFO: 获取测试用例信息 [{'updater_login': 'sonny.zhang', 'author_login': 'sonny.zhang', 'name': '账号密码登录成功', 'node_order': '1000', 'testsuite_id': '1087', 'testcase_id': '1083', 'id': '1084', 'tc_external_id': '2', 'version': '1', 'layout': '1', 'status': '1', 'summary': '', 'preconditions': '', 'importance': '2', 'author_id': '7', 'creation_ts': '2018-07-31 18:53:21', 'updater_id': '7', 'modification_ts': '2018-08-08 20:30:50', 'active': '1', 'is_open': '1', 'execution_type': '1', 'estimated_exec_duration': '', 'author_first_name': '少楠', 'author_last_name': '张', 'updater_first_name': '少楠', 'updater_last_name': '张', 'steps': [{'id': '1090', 'step_number': '1', 'actions': '<p>{&quot;方法&quot;:&quot;get&quot;,<br />\n&quot;url&quot;:&quot;/mapp/token/get_token&quot;,<br />\n&quot;参数&quot;:&quot;&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;msg\\&quot;:\\&quot;success\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，msg不为success&quot;}],<br />\n<br />\n&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}, {'id': '1091', 'step_number': '2', 'actions': '<p>{&quot;方法&quot;:&quot;post&quot;,<br />\n&quot;url&quot;:&quot;/mapp/user/login&quot;,<br />\n&quot;参数&quot;:{&quot;token&quot;:&quot;[token_1]&quot;,&quot;user_name&quot;:&quot;13811110000&quot;, &quot;password&quot;:&quot;e10adc3949ba59abbe56e057f20f883e&quot;,&quot;version&quot;:&quot;3.7&quot;<br />\n}</p>\n', 'expected_results': '<p>{&quot;检查&quot;:&quot;body&quot;,<br />\n&quot;匹配规则&quot;:&quot;包含字符串&quot;,<br />\n&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;id\\&quot;:\\&quot;278703\\&quot;&quot;, &quot;消息&quot;:&quot;获取token失败，id不为278703&quot;}],</p>\n\n<p>&quot;输出&quot;:{&quot;dic&quot;:{&quot;token&quot;:{&quot;data&quot;: &quot;value&quot;}}}<br />\n}</p>\n', 'active': '1', 'execution_type': '1'}], 'full_tc_external_id': 'APItest-2'}]
2018-08-14 11:41:00,179 global_function.py [line: 92] INFO: 正在读取测项目[project：APItest]的协议，host，端口配置...
2018-08-14 11:41:00,179 global_function.py [line: 95] INFO: 成功读取配置信息：{"protocol":"http","host":"www.dev.tobosu.com","port":""}
2018-08-14 11:41:00,180 global_function.py [line: 109] INFO: 正在构建项目的http对象
2018-08-14 11:41:00,180 global_function.py [line: 57] INFO: 记录测试用例到测试用例报表
2018-08-14 11:41:00,180 mydb.py [line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814114059', 1083, '账号密码登录成功', '用户操作-登录-账号密码登录', '无计划', 'APItest', 'Block', '0000-00-00 00:00:00', 'APItest-2')
2018-08-14 11:41:00,288 global_function.py [line: 60] INFO: 开始执行测试用例[id=1083，name=账号密码登录成功]
2018-08-14 11:41:00,288 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"get","url":"/mapp/token/get_token","参数":""}
2018-08-14 11:41:00,288 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"msg\":\"success\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 11:41:00,289 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 11:41:00,289 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814114100', 1083, '账号密码登录成功', '无计划', 'APItest', 1090, 1, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"get","url":"/mapp/token/get_token","参数":""}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"msg\\":\\"success\\"", "消息":"获取token失败,msg不为success"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 11:41:00,413 testcase.py [line: 140] INFO: 开始执行步骤操作[第1步]
2018-08-14 11:41:00,413 casestep.py [line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2018-08-14 11:41:00,414 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 11:41:00,415 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 11:41:00,415 casestep.py [line: 124] INFO: 没找到需要替换的动态参数
2018-08-14 11:41:00,416 InterfaceUnittestTestCase.py [line: 37] INFO: 正在发起GET请求...
2018-08-14 11:41:00,417 httpprotocol.py [line: 79] INFO: 发起的请求为：http://www.dev.tobosu.com/mapp/token/get_token
2018-08-14 11:41:00,417 httpprotocol.py [line: 80] INFO: 请求头为：{}
2018-08-14 11:41:00,577 InterfaceUnittestTestCase.py [line: 46] INFO: 正在对服务器返回body进行解码
2018-08-14 11:41:00,578 InterfaceUnittestTestCase.py [line: 64] INFO: 服务器返回结果"状态码(code)": 200
2018-08-14 11:41:00,578 InterfaceUnittestTestCase.py [line: 65] INFO: 服务器返回结果"请求头(headers)": [('Server', 'Tengine'), ('Date', 'Tue, 14 Aug 2018 03:41:09 GMT'), ('Content-Type', 'application/json; charset=utf-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Set-Cookie', 'PHPSESSID=jm3n2qi1ggo1i74ee6jbuatbo7; path=/'), ('Expires', 'Thu, 19 Nov 1981 08:52:00 GMT'), ('Cache-Control', 'no-store, no-cache, must-revalidate'), ('Pragma', 'no-cache')]
2018-08-14 11:41:00,578 InterfaceUnittestTestCase.py [line: 66] INFO: 服务器返回结果"响应体(body)": {"status":200,"msg":"success","data":"YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q="}
2018-08-14 11:41:00,578 unittesttestcase.py [line: 78] INFO: 要匹配的模式（子字符串）为："msg":"success"
2018-08-14 11:41:00,578 unittesttestcase.py [line: 387] INFO: 使用键值提取
2018-08-14 11:41:00,578 unittesttestcase.py [line: 298] INFO: 要提取的字典key,value层级为：['data', 'value']
2018-08-14 11:41:00,578 unittesttestcase.py [line: 312] INFO: 找到的对应字典层级的key的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 11:41:00,578 unittesttestcase.py [line: 389] INFO: 获取到的变量的值为：YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 11:41:00,578 unittesttestcase.py [line: 393] INFO: 使用“键值提取”提取的自定义变量-值(key-value对)为:token-YzM5Y2JhZmZmMmI5YzJkN2YwZDE3NTgzNzUwN2I2N2Q=
2018-08-14 11:41:00,579 testcase.py [line: 232] INFO: 正在更新步骤执行结果
2018-08-14 11:41:00,579 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2018-08-14 11:41:00",step_action="{'方法': 'get', 'url': '/mapp/token/get_token', '参数': ''}", expected_results="{'检查': 'body', '匹配规则': '包含字符串', '条件': [{'模式': ''msg':'success'', '消息': '获取token失败,msg不为success'}], '输出': {'dic': {'token': {'data': 'value'}}}}" WHERE executed_history_id = 20180814114100 AND testcase_id = 1083 AND step_id = 1090 AND project='APItest' AND testplan='无计划'  AND runtime='0000-00-00 00:00:00'
2018-08-14 11:41:00,697 testcase.py [line: 80] INFO: 转换来自test_link 的step_action值为：{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}
2018-08-14 11:41:00,698 testcase.py [line: 82] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\"id\":\"278703\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}
2018-08-14 11:41:00,698 testcase.py [line: 108] INFO: 记录测试步骤到测试步骤报告表
2018-08-14 11:41:00,698 mydb.py [line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20180814114100', 1083, '账号密码登录成功', '无计划', 'APItest', 1091, 2, '', 'http', 'www.dev.tobosu.com', '', '{"方法":"post","url":"/mapp/user/login","参数":{"token":"[token_1]","user_name":"13811110000", "password":"e10adc3949ba59abbe56e057f20f883e","version":"3.7"}', '{"检查":"body","匹配规则":"包含字符串","条件":[{"模式":"\\"id\\":\\"278703\\"", "消息":"获取token失败,id不为278703"}],"输出":{"dic":{"token":{"data": "value"}}}}', 'Block', '', '0000-00-00 00:00:00')
2018-08-14 11:41:00,830 testcase.py [line: 125] ERROR: 步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]
2018-08-14 11:41:00,830 testcase.py [line: 135] INFO: 正在更新步骤执行结果
2018-08-14 11:41:00,830 mydb.py [line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Block",reason="Expecting ',' delimiter: line 1 column 154 (char 153)", protocol_method="未获取到", runtime="2018-08-14 11:41:00" WHERE executed_history_id = 20180814114100 AND testcase_id = 1083 AND step_id = 1091 AND project='APItest' AND testplan='无计划'
2018-08-14 11:41:00,941 global_function.py [line: 65] INFO: 正在更新用例执行结果
2018-08-14 11:41:00,942 mydb.py [line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2018-08-14 11:41:00", case_exec_history_id="20180814114100" WHERE executed_history_id = 20180814114059 and testcase_id = 1083 AND project='APItest' AND testplan='无计划'
2018-08-14 11:41:01,046 global_function.py [line: 76] INFO: 指定用例[账号密码登录成功]已执行完
2018-08-14 11:41:01,047 main.py [line: 213] INFO: 用例[1083]运行结果：('Error', [('TestCase', "步骤[2]信息填写错误: Expecting ',' delimiter: line 1 column 154 (char 153),停止执行用例[id=1083, name=账号密码登录成功]")])
2018-08-14 11:41:01,047 main.py [line: 215] INFO: 接口测试已执行完成，正在关闭数据库连接
